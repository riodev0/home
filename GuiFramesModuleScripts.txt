ModuleScript: Benefits
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v2 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v3 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v4 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v6 = require(l_ReplicatedStorage_0.Shared.Data.Benefits);
local v7 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v9 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v10 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v11 = require(l_ReplicatedStorage_0.Shared.Palette);
local v12 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v13 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local l_Frame_0 = l_ScreenGui_0.Benefits.Frame;
local l_Benefits_0 = l_ScreenGui_0.HUD.Left.Currency.Coins.Bundles.Benefits;
local l_Template_0 = l_Frame_0.Main.ScrollingFrame.Template;
l_Template_0.Parent = nil;
local l_Template_1 = l_Template_0.Items.Template;
l_Template_1.Parent = nil;
v2:ConnectDataChanged("OGData", function(v19) --[[ Line: 33 ]]
    -- upvalues: l_Frame_0 (copy), l_ReplicatedStorage_0 (copy), l_Benefits_0 (copy)
    local v20 = v19.OGData.JoinYear > 0;
    if v19.OGData.Passes and #v19.OGData.Passes > 0 then
        v20 = true;
    end;
    if v19.OGData.Claimed then
        v20 = false;
    end;
    local l_JoinYear_0 = v19.OGData.JoinYear;
    local l_JoinDate_0 = l_Frame_0.Main.ScrollingFrame.JoinDate;
    if l_JoinYear_0 == 2018 then
        l_JoinDate_0.Label.Text = "OG Bubbler";
        l_JoinDate_0.Label.UIGradient.Color = l_ReplicatedStorage_0.Assets.Gradients.Titles.BubblerOG.Color;
    elseif l_JoinYear_0 == 2019 then
        l_JoinDate_0.Label.Text = "2019 Bubbler";
        l_JoinDate_0.Label.UIGradient.Color = l_ReplicatedStorage_0.Assets.Gradients.Titles.Bubbler2019.Color;
    elseif l_JoinYear_0 == 2020 then
        l_JoinDate_0.Label.Text = "2020 Bubbler";
        l_JoinDate_0.Label.UIGradient.Color = l_ReplicatedStorage_0.Assets.Gradients.Titles.Bubbler2020.Color;
    end;
    l_JoinDate_0.Description.Text = ("You've been playing since %*!"):format(l_JoinYear_0);
    local v23 = true;
    if l_JoinYear_0 ~= 2018 then
        v23 = true;
        if l_JoinYear_0 ~= 2019 then
            v23 = l_JoinYear_0 == 2020;
        end;
    end;
    l_JoinDate_0.Visible = v23;
    l_Benefits_0.Visible = v20;
end);
v5:BindOnOpened("Benefits", function() --[[ Line: 62 ]]
    -- upvalues: v2 (copy), v6 (copy), l_Frame_0 (copy), l_Template_0 (copy), l_Template_1 (copy), v7 (copy), v8 (copy), v9 (copy)
    local v24 = v2:Get();
    if not v24 then
        return;
    else
        local v25 = v24.OGData.Passes or {};
        for v26, v27 in v6 do
            if not l_Frame_0.Main.ScrollingFrame:FindFirstChild(v26) and table.find(v25, v26) then
                local v28 = l_Template_0:Clone();
                v28.Name = v26;
                v28.Label.Text = v26;
                v28.LayoutOrder = v27.LayoutOrder;
                v28.Icon.Label.Image = v27.Image;
                local v29 = false;
                for _, v31 in v28.Hint:GetChildren() do
                    if v31:IsA("GuiObject") then
                        if v31.Name == v26 then
                            v29 = true;
                            v31.Visible = true;
                        else
                            v31.Visible = false;
                        end;
                    end;
                end;
                for _, v33 in v28.Items:GetChildren() do
                    if v33:IsA("GuiObject") then
                        v33.Visible = v33.Name == v26;
                    end;
                end;
                for _, v35 in v27.Rewards do
                    local v36 = l_Template_1:Clone();
                    v36.Parent = v28.Items;
                    v7:UpdateIcon(v36, v35);
                    v7:FormatAmount(v36.Amount, v35);
                    v8:OnEnter(v36.Hover, function() --[[ Line: 103 ]]
                        -- upvalues: v9 (ref), v35 (copy)
                        return v9.fromItem(v35);
                    end);
                end;
                v28.Hint.Visible = v29;
                v28.Size = UDim2.new(1, 0, 0, 140 + (v29 and 20 or 0));
                v28.Parent = l_Frame_0.Main.ScrollingFrame;
            end;
        end;
        return;
    end;
end);
v12(l_Frame_0.Main.ScrollingFrame, l_Frame_0.Main.ScrollingFrame.UIListLayout);
v3(l_Benefits_0.Button, function() --[[ Line: 116 ]]
    -- upvalues: v5 (copy)
    v5:Open("Benefits");
end);
v10(l_Frame_0.Claim.Button, v11.Button.Green);
v3(l_Frame_0.Claim.Button, function() --[[ Line: 121 ]]
    -- upvalues: v5 (copy), v13 (copy), v4 (copy)
    v5:Close();
    v13("GenericSuccess");
    v4:FireServer("ClaimBenefits");
end);
v10(l_Frame_0.Close, v11.Button.Red);
v3(l_Frame_0.Close, function() --[[ Line: 128 ]]
    -- upvalues: v5 (copy)
    v5:Close();
end);
return {};
ModuleScript: Board
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local _ = game:GetService("HttpService");
local l_Players_0 = game:GetService("Players");
local l_RunService_0 = game:GetService("RunService");
local v4 = require(l_ReplicatedStorage_0.Client.PetRender.VisualPet);
local v5 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Table.Array);
local v6 = require(l_ReplicatedStorage_0.Client.PetRender);
local v7 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Maid);
local v8 = require(l_ReplicatedStorage_0.Shared.Utils.BoardUtil);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v12 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v13 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v14 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Board_0 = workspace.Board;
local v20 = v5.from(l_Board_0.Nodes:GetChildren()):sort(function(v18, v19) --[[ Line: 39 ]]
	return tonumber(v18.Name) < tonumber(v19.Name);
end):table();
local v21 = v7.new();
local v22 = {
	Pieces = {}
};
local l_Doggy_0 = workspace.Doggy;
l_Doggy_0.Parent = nil;
local function v36(_) --[[ Line: 56 ]] --[[ Name: newPiece ]]
	-- upvalues: v4 (copy), l_Doggy_0 (copy), v8 (copy), v20 (copy), v21 (copy), v6 (copy), l_RunService_0 (copy)
	local v25 = {};
	local v26 = v4.fromModel(l_Doggy_0:Clone());
	v26.WalkSpeed = 10;
	v25.move = function(v27, v28) --[[ Line: 63 ]] --[[ Name: move ]]
		-- upvalues: v25 (copy), v8 (ref), v26 (copy)
		local v29 = {};
		local l_Index_0 = v25.Index;
		repeat
			l_Index_0 = l_Index_0 + 1;
			if #v8.Nodes < l_Index_0 then
				l_Index_0 = 1;
			end;
			table.insert(v29, v8.Nodes[l_Index_0]);
		until l_Index_0 == v27;
		v26.ActiveDampener = false;
		v25.IsMoving = true;
		for v31, v32 in v29 do
			v26.ActiveDampener = v31 == #v29;
			v26:MoveTo(v32.Part.Position, true);
			while ((v32.Part.Position - v26.Position) * Vector3.new(1, 0, 1, 0)).Magnitude > 0.01 do
				task.wait();
			end;
		end;
		if v28 then
			v28();
		end;
		v8.Model.Display.BillboardGui.Enabled = false;
		v25.Index = v27;
		v25.IsMoving = false;
	end;
	v25.set = function(v33) --[[ Line: 96 ]] --[[ Name: set ]]
		-- upvalues: v20 (ref), v26 (copy), v25 (copy)
		local l_Position_0 = v20[v33].Position;
		v26.YDampener.Value = l_Position_0.Y;
		v26:SpawnAt(l_Position_0);
		v25.Index = v33;
	end;
	v25.remove = function() --[[ Line: 104 ]] --[[ Name: remove ]]
		-- upvalues: v21 (ref), v25 (copy)
		v21:Cleanup();
		table.clear(v25);
	end;
	v25.set(1);
	v6:Add(v26);
	v21:Add(function() --[[ Line: 112 ]]
		-- upvalues: v26 (copy)
		v26:Destroy();
	end);
	v21:Add(l_RunService_0.Heartbeat:Connect(function(v35) --[[ Line: 116 ]]
		-- upvalues: v26 (copy)
		v26:Render(v35);
	end));
	return v25;
end;
local function _(v37) --[[ Line: 124 ]] --[[ Name: getPiece ]]
	-- upvalues: v22 (copy), l_LocalPlayer_0 (copy)
	return v22.Pieces[(v37 or l_LocalPlayer_0).Name];
end;
local _ = function(v39) --[[ Line: 129 ]] --[[ Name: rollChance ]]
	-- upvalues: l_ScreenGui_0 (copy), v8 (copy), v11 (copy), v14 (copy), v12 (copy), v13 (copy)
	local v40 = script.Chance:Clone();
	v40.Parent = l_ScreenGui_0;
	local v41 = Random.new();
	local v42 = {
		v39
	};
	repeat
		local l_Item_0 = v8.ChanceTiles[v41:NextInteger(1, #v8.ChanceTiles)].Item;
		if not (table.find(v42, l_Item_0) ~= nil) then
			table.insert(v42, l_Item_0);
		end;
	until #v42 == 3;
	v41:Shuffle(v42);
	local v44 = table.find(v42, v39) or 1;
	local v45 = v41:NextInteger(1, 3);
	local function v49() --[[ Line: 147 ]] --[[ Name: updateSelected ]]
		-- upvalues: v45 (ref), v40 (copy), v8 (ref), v42 (copy), v11 (ref)
		for v46 = 1, 3 do
			local v47 = v45 == v46;
			local l_FirstChild_0 = v40.Frame.Slots:FindFirstChild("Slot" .. v46);
			l_FirstChild_0.BackgroundColor3 = v47 and Color3.fromRGB(255, 244, 183) or Color3.fromRGB(225, 243, 255);
			l_FirstChild_0.UIStroke.Color = v47 and Color3.fromRGB(241, 161, 0) or Color3.fromRGB(0, 41, 94);
			l_FirstChild_0.Label.Text = v8.ChanceTile[v42[v46]].DisplayName;
		end;
		v11("EasterEggReveal");
	end;
	for v50 = 1, 3 do
		local v51 = v8.ChanceTile[v42[v50]];
		local l_FirstChild_1 = v40.Frame.Slots:FindFirstChild("Slot" .. v50);
		l_FirstChild_1.Label.Text = v51.DisplayName;
		if typeof(v51.Color) == "string" then
			v14.Cycle(l_FirstChild_1.Label, "Rainbow", {
				Speed = 0.4
			});
		else
			l_FirstChild_1.Label.TextColor3 = v51.Color;
		end;
	end;
	v49();
	local v53 = 0.05;
	repeat
		task.wait(v53);
		v53 = v53 * 1.12;
		v45 = v45 + 1;
		if v45 > 3 then
			v45 = 1;
		end;
		v49();
	until v53 > 0.7;
	local l_v45_0 = v45;
	for _ = 1, 3 do
		task.wait(v53);
		l_v45_0 = l_v45_0 + 1;
		if l_v45_0 > 3 then
			l_v45_0 = 1;
		end;
		v45 = l_v45_0;
		v49();
		if l_v45_0 == v44 then
			break;
		end;
	end;
	local v56 = v8.ChanceTile[v39];
	local l_Color_0 = v8.ChanceTile[v39].Color;
	if typeof(l_Color_0) == "string" then
		l_Color_0 = Color3.fromRGB(49, 255, 73);
	end;
	v12(("%*!"):format((v13.autoColor(v56.DisplayName, l_Color_0))), {
		Sound = "NotificationHelp"
	});
	v11("GumBuy");
	task.wait(2);
	for v58 = 1, 3 do
		local l_FirstChild_2 = v40.Frame.Slots:FindFirstChild("Slot" .. v58);
		v14.None(l_FirstChild_2.Label);
	end;
	v40:Destroy();
end;
v9:ConnectDataChanged("Board", function(v61) --[[ Line: 251 ]]
	-- upvalues: v22 (copy), l_LocalPlayer_0 (copy), v36 (copy)
	if v61.Board.Piece > 0 and not v22.Pieces[l_LocalPlayer_0.Name] then
		local v62 = v36(l_LocalPlayer_0);
		v62.set(v61.Board.Tile);
		v22.Pieces[l_LocalPlayer_0.Name] = v62;
	end;
end);
return v22;
ModuleScript: Buffs
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v2 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v3 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v4 = require(l_ReplicatedStorage_0.Shared.Data.Potions);
local v5 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local v6 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v7 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v8 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatRomanNumeral);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v10 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v12 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v13 = require(l_ReplicatedStorage_0.Shared.Constants);
local v14 = require(l_ReplicatedStorage_0.Shared.Data.Buffs);
local v15 = require(l_ReplicatedStorage_0.Shared.Utils.GetFriendCountInServer);
local _ = require(l_ReplicatedStorage_0.Shared.Data.Mastery);
local v17 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.MasteryUtil);
local v18 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_Buffs_0 = l_LocalPlayer_0.PlayerGui.ScreenGui.Buffs;
local l_Template_0 = l_Buffs_0.Template;
l_Template_0.Parent = nil;
local v22 = {};
local v23 = nil;
local v24 = nil;
local v26 = v2.new(function() --[[ Line: 36 ]]
    -- upvalues: l_Template_0 (copy), v9 (copy), v18 (copy), v24 (ref), v23 (ref)
    local v25 = l_Template_0:Clone();
    v9:OnEnter(v25.Button, function() --[[ Line: 39 ]]
        -- upvalues: v18 (ref), v24 (ref), v25 (copy), v23 (ref)
        if v18.Mode == "Touch" then
            return;
        else
            v24 = v25;
            return v23();
        end;
    end);
    return v25;
end);
v23 = function() --[[ Line: 50 ]] --[[ Name: tooltip ]]
    -- upvalues: v24 (ref), v3 (copy), v10 (copy)
    if not v24 then
        return;
    else
        local v27 = v3:Get();
        if not v27 then
            return;
        else
            local l_v24_Attribute_0 = v24:GetAttribute("Type");
            if l_v24_Attribute_0 == "ActivePotion" then
                local v29 = v27.ActivePotions[v24.Name];
                if v29 then
                    return v10.fromActivePotion(v24.Name, v29);
                end;
            elseif l_v24_Attribute_0 == "Buff" then
                local v30 = v27.ActiveBuffs[v24.ZIndex];
                return v10.fromBuff(v24.Name, v30);
            end;
            return;
        end;
    end;
end;
local function v37() --[[ Line: 72 ]] --[[ Name: shallow ]]
    -- upvalues: v6 (copy), v22 (copy), v23 (ref), v9 (copy)
    local v31 = v6.now();
    for v32, v33 in v22 do
        if v33.Type == "Timer" then
            local v34 = math.max(v33.Duration - v31, 0);
            v32.Visible = v34 > 0;
            v32.Button.Label.Text = v6.formatTime(v34, true);
        else
            local _ = v33.Duration > 0;
            v32.Button.Label.Text = ("%* Left"):format(v33.Duration);
            v32.Visible = v33.Duration > 0;
        end;
    end;
    local v36 = v23();
    if v36 then
        v9:Apply(v36, true);
    end;
end;
local function v51() --[[ Line: 91 ]] --[[ Name: update ]]
    -- upvalues: v3 (copy), v22 (copy), v14 (copy), v26 (copy), l_Buffs_0 (copy), v8 (copy), v7 (copy), v4 (copy), v12 (copy), v13 (copy), v37 (copy)
    local v38 = v3:Get();
    table.clear(v22);
    if not v38 then
        return;
    else
        local v39 = 0;
        for v40, v41 in v38.ActiveBuffs do
            local v42 = v14[v41.Name];
            local v43 = v26:Get();
            v43.Name = v41.Name;
            v43.ZIndex = v40;
            v43.LayoutOrder = v39;
            v43.Parent = l_Buffs_0;
            v43.Button.Level.Visible = false;
            v43.Button.Level.Text = v41.Level == 6 and "\226\152\133" or v8(v41.Level);
            v43:SetAttribute("Type", "Buff");
            v7:UpdateIcon(v43.Button.Icon);
            v43.Button.Icon.Label.Image = v42.Level[v41.Level].Image;
            v43.Button.Icon.Label.Visible = true;
            v22[v43] = v41.Expiry;
            v39 = v39 + 1;
        end;
        for v44, v45 in v38.ActivePotions do
            local l_Active_0 = v45.Active;
            if l_Active_0 then
                local v47 = v4[v44];
                local v48 = v26:Get();
                v48.Name = v44;
                v48.LayoutOrder = v39 + v47.LayoutOrder;
				if l_Active_0.Level == 7 then
					v48.Button.Level.Text = "\226\136\158"
				elseif l_Active_0.Level == 6 then
					v48.Button.Level.Text = "\226\152\133"
				else
					v48.Button.Level.Text = v8(l_Active_0.Level)
				end
                v48.Button.Level.Visible = l_Active_0.Level > 1;
                v48.Parent = l_Buffs_0;
                v48:SetAttribute("Type", "ActivePotion");
                local v49 = {
                    Type = "Potion", 
                    Name = v44, 
                    Level = l_Active_0.Level
                };
                local l_v7_Rarity_0 = v7:GetRarity(v49);
                if l_v7_Rarity_0 == "Legendary" or l_v7_Rarity_0 == "Secret" then
                    v48.Button.Level.TextColor3 = Color3.new(1, 1, 1);
                    v12.Shift(v48.Button.Level, "Rainbow", {
                        Speed = 0.5
                    });
                else
                    v12.None(v48.Button.Level);
                    v48.Button.Level.TextColor3 = v13.RarityColors[l_v7_Rarity_0];
                end;
                v7:UpdateIcon(v48.Button.Icon, v49);
                v22[v48] = l_Active_0.Expiry;
            end;
        end;
        v37();
        v26:Done();
        return;
    end;
end;
local function _(v52, v53, v54) --[[ Line: 151 ]] --[[ Name: updateProgessiveBuff ]]
    -- upvalues: v3 (copy)
    v52.Visible = false;
    v3:ConnectDataChanged(v53, function(v55) --[[ Line: 161 ]]
        -- upvalues: v54 (copy), v52 (copy)
        local v56 = v54(v55);
        local v57 = math.clamp(v56.Alpha, 0.05, 0.98);
        v52.Visible = v56.Active;
        v52.Button.Amount.Text = v56.Number;
        v52.Button.Amount.Visible = v56.Number > 0;
        v52.Button.Icon.Label.UIGradient.Transparency = NumberSequence.new({
            NumberSequenceKeypoint.new(0, 0), 
            NumberSequenceKeypoint.new(v57 * 0.99, 0), 
            NumberSequenceKeypoint.new(v57, 1), 
            NumberSequenceKeypoint.new(1, 1)
        });
    end);
end;
local v59 = false;
local function v63() --[[ Line: 178 ]] --[[ Name: updateFriends ]]
    -- upvalues: v15 (copy), l_LocalPlayer_0 (copy), l_Buffs_0 (copy), v59 (ref)
    task.defer(function() --[[ Line: 179 ]]
        -- upvalues: v15 (ref), l_LocalPlayer_0 (ref), l_Buffs_0 (ref), v59 (ref)
        local v60 = v15(l_LocalPlayer_0);
        l_Buffs_0.Friendship.Button.Amount.Text = ("x%*"):format(v60);
        local l_Friendship_0 = l_Buffs_0.Friendship;
        local v62 = false;
        if v60 > 0 then
            v62 = v59;
        end;
        l_Friendship_0.Visible = v62;
        l_Buffs_0.Friendship.Button.Amount.Visible = v60 > 1;
    end);
end;
local l_Shiny_0 = l_Buffs_0.Shiny;
local v65 = {
    "MasteryUpgrades", 
    "EggsOpened", 
    "Stats"
};
local function v71(v66) --[[ Line: 188 ]]
    local v67 = 0;
    for _, v69 in v66.MasteryUpgrades do
        if v69.Type == "GoldenEgg" then
            v67 = v69.Every;
            break;
        end;
    end;
    if v67 == 0 then
        return {
            Active = false, 
            Number = 0, 
            Alpha = 0
        };
    else
        local v70 = v67 - v66.Stats.Hatches % v67;
        return {
            Active = true, 
            Number = v70, 
            Alpha = 1 - v70 / v67
        };
    end;
end;
l_Shiny_0.Visible = false;
v3:ConnectDataChanged(v65, function(v72) --[[ Line: 161 ]]
    -- upvalues: v71 (copy), l_Shiny_0 (copy)
    local v73 = v71(v72);
    local v74 = math.clamp(v73.Alpha, 0.05, 0.98);
    l_Shiny_0.Visible = v73.Active;
    l_Shiny_0.Button.Amount.Text = v73.Number;
    l_Shiny_0.Button.Amount.Visible = v73.Number > 0;
    l_Shiny_0.Button.Icon.Label.UIGradient.Transparency = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0), 
        NumberSequenceKeypoint.new(v74 * 0.99, 0), 
        NumberSequenceKeypoint.new(v74, 1), 
        NumberSequenceKeypoint.new(1, 1)
    });
end);
v9:OnEnter(l_Buffs_0.Friendship.Button, function() --[[ Line: 208 ]]
    -- upvalues: v18 (copy), v3 (copy), v17 (copy), v15 (copy), l_LocalPlayer_0 (copy), v10 (copy), l_Buffs_0 (copy)
    if v18.Mode == "Touch" then
        return;
    else
        local v75 = v3:Get();
        if not v75 then
            return;
        else
            local v76 = nil;
            for _, v78 in v75.MasteryUpgrades do
                if v78.Type == "Friendship" then
                    v76 = v78.Buff;
                    break;
                end;
            end;
            if not v76 then
                return;
            else
                local l_v17_UpgradeInfo_0 = v17:GetUpgradeInfo(v75, {
                    Type = "Friendship", 
                    Buff = v76
                });
                local v80 = v15(l_LocalPlayer_0);
                return v10.new():Title(l_Buffs_0.Friendship.Button.Label.Image, ("Friendship %*"):format(v80 > 1 and ("x%*"):format(v80) or ""), "Mastery"):Add({
                    Type = "Text", 
                    Text = l_v17_UpgradeInfo_0.Description, 
                    Size = 28
                }):Build();
            end;
        end;
    end;
end);
v3:ConnectDataChanged("MasteryUpgrades", function(v81) --[[ Line: 240 ]]
    -- upvalues: v59 (ref), v15 (copy), l_LocalPlayer_0 (copy), l_Buffs_0 (copy)
    for _, v83 in v81.MasteryUpgrades do
        if v83.Type == "Friendship" then
            v59 = true;
            break;
        end;
    end;
    task.defer(function() --[[ Line: 179 ]]
        -- upvalues: v15 (ref), l_LocalPlayer_0 (ref), l_Buffs_0 (ref), v59 (ref)
        local v84 = v15(l_LocalPlayer_0);
        l_Buffs_0.Friendship.Button.Amount.Text = ("x%*"):format(v84);
        local l_Friendship_1 = l_Buffs_0.Friendship;
        local v86 = false;
        if v84 > 0 then
            v86 = v59;
        end;
        l_Friendship_1.Visible = v86;
        l_Buffs_0.Friendship.Button.Amount.Visible = v84 > 1;
    end);
end);
v9.Changed:Connect(function(v87) --[[ Line: 251 ]]
    -- upvalues: v24 (ref)
    if not v87 or v24 and v24.Button ~= v87 then
        v24 = nil;
    end;
end);
v5(0.5, v37);
v3:ConnectDataChanged({
    "ActiveBuffs", 
    "ActivePotions"
}, v51);
l_Players_0.PlayerAdded:Connect(v63);
l_Players_0.PlayerRemoving:Connect(v63);
return {};
ModuleScript: DailyRewards
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local l_MarketplaceService_0 = game:GetService("MarketplaceService");
local _ = game:GetService("RunService");
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v5 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v9 = require(l_ReplicatedStorage_0.Shared.Palette);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v11 = require(l_ReplicatedStorage_0.Shared.Data.StarsShop);
local v12 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v13 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v14 = require(l_ReplicatedStorage_0.Shared.Constants);
local v15 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v16 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v17 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v18 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v19 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v20 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v21 = require(l_ReplicatedStorage_0.Shared.Data.DailyRewards);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v23 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v24 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v25 = require(l_ReplicatedStorage_0.Client.Gui.Animations.ProcessingPurchase);
local _ = require(l_ReplicatedStorage_0.Client.Tutorial);
local v27 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.ProductInfo);
local v28 = require(l_ReplicatedStorage_0.Client.Gui.Utils.CheckInventorySpace);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_DailyRewards_0 = l_ScreenGui_0.DailyRewards;
local function _() --[[ Line: 45 ]] --[[ Name: updateTimer ]]
    -- upvalues: v10 (copy), l_DailyRewards_0 (copy)
    local v33 = v10.untilMidnight();
    l_DailyRewards_0.Shop.Top.Countdown.Text = string.format("%02i:%02i:%02i", v33 // 3600, v33 // 60 % 60, v33 % 60);
end;
task.spawn(function() --[[ Line: 50 ]]
    -- upvalues: v8 (copy), v10 (copy), l_DailyRewards_0 (copy)
    while true do
        if v8:IsOpen("DailyRewards") then
            local v35 = v10.untilMidnight();
            l_DailyRewards_0.Shop.Top.Countdown.Text = string.format("%02i:%02i:%02i", v35 // 3600, v35 // 60 % 60, v35 % 60);
        end;
        task.wait(0.25);
    end;
end);
local l_Content_0 = l_DailyRewards_0.Login.Frame.Content;
local l_Template_0 = l_Content_0.Template;
l_Template_0.Parent = nil;
local v38 = {};
for v39 = 1, 7 do
    local v40 = v21[v39];
    local v41 = ("Day%*"):format(v39);
    local v42 = false;
    if v39 == 7 then
        v42 = l_DailyRewards_0.Login.Frame.Bundle;
    end;
    if not v42 then
        v42 = l_Template_0:Clone();
        v42.Name = v41;
        v42.LayoutOrder = v39;
    end;
    do
        local l_v42_0 = v42;
        local function v45() --[[ Line: 80 ]] --[[ Name: updateAmountLabelSize ]]
            -- upvalues: l_v42_0 (ref), l_UIScale_0 (copy)
            local v44 = math.ceil(l_v42_0.Amount.Label.TextBounds.X / l_UIScale_0.Scale) + 1;
            l_v42_0.Amount.Label.Size = UDim2.fromOffset(v44, 30);
        end;
        local l_Items_0 = l_v42_0:FindFirstChild("Items");
        if l_Items_0 then
            for _, v48 in l_Items_0:GetChildren() do
                if v48:IsA("Frame") then
                    local v49 = v40[v48.LayoutOrder];
                    if v49 then
                        v17:FormatAmount(v48.Amount, v49);
                        v17:UpdateIcon(v48, v49);
                        v22:OnEnter(v48.Hover, function() --[[ Line: 95 ]]
                            -- upvalues: v23 (copy), v49 (copy)
                            return v23.fromItem(v49);
                        end);
                    end;
                    v48.Visible = v49 ~= nil;
                end;
            end;
        else
            v17:FormatAmount(l_v42_0.Icon.Amount, v40[1]);
            v17:UpdateIcon(l_v42_0.Icon, v40[1]);
            l_v42_0.Parent = l_Content_0;
            v22:OnEnter(l_v42_0.Hover, function() --[[ Line: 105 ]]
                -- upvalues: v23 (copy), v40 (copy)
                return v23.fromItem(v40[1]);
            end);
        end;
        l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v45);
        l_v42_0.Amount.Label:GetPropertyChangedSignal("TextBounds"):Connect(v45);
        local v50 = math.ceil(l_v42_0.Amount.Label.TextBounds.X / l_UIScale_0.Scale) + 1;
        l_v42_0.Amount.Label.Size = UDim2.fromOffset(v50, 30);
        v38[v39] = l_v42_0;
    end;
end;
local l_ScrollingFrame_0 = l_DailyRewards_0.Shop.Content.ScrollingFrame;
local l_Template_1 = l_ScrollingFrame_0.Template;
l_Template_1.Parent = nil;
v20(l_ScrollingFrame_0, l_ScrollingFrame_0.UIGridLayout);
local v53 = {};
for v54, v55 in v11 do
    local v56 = l_Template_1:Clone();
    local v57, _ = v15(v55.Item, true, true);
    v57.Size = UDim2.fromScale(1, 1);
    v57.Parent = v56.Frame;
    local l_Label_0 = v56.Buy.Button.Frame.Label;
    l_Label_0.Text = v16(v55.Cost, 5000);
    local function v61() --[[ Line: 145 ]] --[[ Name: updateLabelSize ]]
        -- upvalues: l_Label_0 (copy), l_UIScale_0 (copy)
        local v60 = math.ceil(l_Label_0.TextBounds.X / l_UIScale_0.Scale) + 1;
        l_Label_0.Size = UDim2.new(0, v60, 1, 0);
    end;
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v61);
    l_Label_0:GetPropertyChangedSignal("TextBounds"):Connect(v61);
    local v62 = math.ceil(l_Label_0.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_Label_0.Size = UDim2.new(0, v62, 1, 0);
    v7(v56.Buy.Button, function() --[[ Line: 156 ]]
        -- upvalues: v5 (copy), v55 (copy), v17 (copy), v18 (copy), v19 (copy), v28 (copy), v12 (copy), v54 (copy)
        local v63 = v5:Get();
        if not v63 then
            return;
        else
            local v64 = {
                Type = "Currency", 
                Currency = "Stars", 
                Amount = v55.Cost
            };
            if v17:GetOwnedAmount(v63, v64) < v17:GetAmount(v64) then
                local v66 = v18.fromNotEnough(v63, v64, function(v65) --[[ Line: 169 ]]
                    return (("You need %* to buy this!"):format(v65));
                end);
                return v19(v66:Build());
            elseif v55.Item.Type == "Pet" and not v28(v63) then
                return;
            else
                v12:FireServer("DailyRewardsBuyItem", v54);
                return;
            end;
        end;
    end);
    v56.Parent = l_ScrollingFrame_0;
    v53[v54] = v56;
end;
local v67 = nil;
local function v84() --[[ Line: 191 ]] --[[ Name: update ]]
    -- upvalues: v5 (copy), v10 (copy), l_DailyRewards_0 (copy), v13 (copy), v14 (copy), v27 (copy), v67 (ref), v53 (copy), v11 (copy), v17 (copy), v6 (copy), v9 (copy), v38 (copy), v24 (copy)
    local v68 = v5:Get();
    if not v68 then
        return;
    else
        local l_DailyRewards_1 = v68.DailyRewards;
        local v70 = v10.getAbsoluteDay() > l_DailyRewards_1.LastDay;
        l_DailyRewards_0.Login.Visible = not v70 and not l_DailyRewards_1.Claimed;
        l_DailyRewards_0.Shop.Visible = not l_DailyRewards_0.Login.Visible;
        l_DailyRewards_0.Shop.Streak.Label.Text = ("\240\159\148\165 %* Day%*"):format(l_DailyRewards_1.LastStreak, l_DailyRewards_1.LastStreak == 1 and "" or "s");
        l_DailyRewards_0.Shop.Content.Cover.Label.Text = ("You lost your %*-day streak!"):format(l_DailyRewards_1.LastStreak);
        l_DailyRewards_0.Shop.Content.Cover.Visible = v70;
        l_DailyRewards_0.Shop.Top.Amount.Label.Text = v13(l_DailyRewards_1.Stars);
        if v70 then
            local l_DailyRewardsProducts_0 = v14.DailyRewardsProducts;
            for v72 = #l_DailyRewardsProducts_0, 1, -1 do
                local v73 = l_DailyRewardsProducts_0[v72];
                if l_DailyRewards_1.LastStreak >= v73.Days then
                    l_DailyRewards_0.Shop.Content.Cover.Buttons.Buy.Button.Visible = false;
                    v27.fromProduct(v73.ProductId, function(v74) --[[ Line: 216 ]]
                        -- upvalues: l_DailyRewards_0 (ref), v14 (ref)
                        l_DailyRewards_0.Shop.Content.Cover.Buttons.Buy.Button.Visible = true;
                        l_DailyRewards_0.Shop.Content.Cover.Buttons.Buy.Button.Label.Text = ("%*%*"):format(v14.RobuxUnicode, v74 and v74.PriceInRobux or "__");
                    end);
                    v67 = v73.ProductId;
                    break;
                end;
            end;
        else
            v67 = nil;
        end;
        local v75 = v10.untilMidnight();
        l_DailyRewards_0.Shop.Top.Countdown.Text = string.format("%02i:%02i:%02i", v75 // 3600, v75 // 60 % 60, v75 % 60);
        for v76, v77 in v53 do
            local v78 = v11[v76];
            local v79 = {
                Type = "Currency", 
                Currency = "Stars", 
                Amount = v78.Cost
            };
            if v17:CanAfford(v68, v79) then
                v6(v77.Buy.Button, v9.Button.Purple);
                v77.LayoutOrder = v76;
            else
                v6(v77.Buy.Button, v9.Button.Red);
                v77.LayoutOrder = v76 + 999;
            end;
        end;
        v75 = (l_DailyRewards_1.LastStreak - 1) % 7 + 1;
        for v80, v81 in v38 do
            local v82 = v80 == v75;
            local v83 = math.clamp((l_DailyRewards_1.LastStreak - v75 + v80) * v14.DailyRewardsStarsPerDay, 0, v14.DailyRewardsStarCap);
            if v82 then
                v24.None(v81.Label);
                v81.Label.TextColor3 = Color3.fromRGB(255, 94, 247);
                v81.UIStroke.Color = Color3.fromRGB(255, 94, 247);
                v81.BackgroundColor3 = Color3.fromRGB(255, 212, 251);
                v81.UIStroke.Thickness = 5;
                v81.Label.Text = "Today";
            else
                if v80 == 7 then
                    v24.Shift(v81.Label, "Rainbow", {
                        Speed = 0.4
                    });
                else
                    v81.Label.TextColor3 = Color3.new(1, 1, 1);
                end;
                if v80 - 1 == v75 then
                    v81.Label.Text = "Tomorrow";
                    v24.Cycle(v81.Label, "Shiny", {
                        Speed = 1
                    });
                else
                    v24.None(v81.Label);
                    v81.Label.Text = ("Day %*"):format(v80);
                end;
                v81.UIStroke.Thickness = 3;
                v81.UIStroke.Color = Color3.fromRGB(0, 41, 94);
                v81.BackgroundColor3 = Color3.fromRGB(225, 243, 255);
            end;
            v81.Amount.Label.Text = ("+%*"):format((v13(v83)));
        end;
        return;
    end;
end;
v6(l_DailyRewards_0.Shop.Content.Cover.Buttons.Buy.Button, v9.Button.Green);
v7(l_DailyRewards_0.Shop.Content.Cover.Buttons.Buy.Button, function() --[[ Line: 287 ]]
    -- upvalues: v67 (ref), v25 (copy), l_MarketplaceService_0 (copy), l_LocalPlayer_0 (copy)
    if v67 then
        v25:Show();
        l_MarketplaceService_0:PromptProductPurchase(l_LocalPlayer_0, v67);
    end;
end);
v6(l_DailyRewards_0.Shop.Content.Cover.Buttons.Forfeit.Button, v9.Button.Red);
v7(l_DailyRewards_0.Shop.Content.Cover.Buttons.Forfeit.Button, function() --[[ Line: 296 ]]
    -- upvalues: v12 (copy)
    v12:FireServer("DailyRewardsForfeitStreak");
end);
v6(l_DailyRewards_0.Login.Frame.Claim.Button, v9.Button.Purple);
v7(l_DailyRewards_0.Login.Frame.Claim.Button, function() --[[ Line: 304 ]]
    -- upvalues: v12 (copy)
    v12:FireServer("DailyRewardClaimStars");
end);
v5:ConnectDataChanged({
    "DailyRewards", 
    "Stars"
}, v84);
v8:BindOnOpened("DailyRewards", v84);
v6(l_DailyRewards_0.Shop.Top.Close.Button, v9.Button.Red);
v7(l_DailyRewards_0.Shop.Top.Close.Button, function() --[[ Line: 316 ]]
    -- upvalues: v8 (copy)
    v8:Close();
end);
return {};
ModuleScript: DoggyJump
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_Workspace_0 = game:GetService("Workspace");
local l_RunService_0 = game:GetService("RunService");
local l_UserInputService_0 = game:GetService("UserInputService");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v5 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v8 = require(l_ReplicatedStorage_0.Shared.Palette);
local v9 = require(l_ReplicatedStorage_0.Shared.Utils.DoggyJumpUtil);
local v10 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v11 = require(l_ReplicatedStorage_0.Shared.Constants);
local v12 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local _ = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v14 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil.PotionIcon);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v16 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local v17 = require(l_ReplicatedStorage_0.Shared.Data.Powerups);
local v18 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v19 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v20 = require(l_ReplicatedStorage_0.Client.Music);
local v21 = require(l_ReplicatedStorage_0.Client.Activation);
local v22 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v24 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v25 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Animations.SetFade);
local v26 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v27 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v28 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local v29 = {};
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Frame_0 = l_ScreenGui_0.DoggyJump.Frame;
local l_Main_0 = l_ScreenGui_0.DoggyJump.Frame.Inner.Main;
local l_Area_0 = l_Main_0.Area;
local l_Layers_0 = l_Area_0.Layers;
local l_Objects_0 = l_Area_0.Objects;
local l_Prizes_0 = l_Frame_0.Inner.Prizes;
local l_Doggy_0 = l_Objects_0.Doggy;
local l_Activation_0 = workspace.Worlds["The Overworld"].Islands["Outer Space"].Island.DoggyJump.Activation;
local l_UIScale_0 = l_ScreenGui_0.DoggyJump.Frame.UIScale;
local l_CurrentCamera_0 = l_Workspace_0.CurrentCamera;
l_CurrentCamera_0:GetPropertyChangedSignal("ViewportSize"):Connect(function() --[[ Line: 60 ]] --[[ Name: update ]]
    -- upvalues: l_CurrentCamera_0 (copy), l_UIScale_0 (copy)
    l_UIScale_0.Scale = math.clamp(math.floor(l_CurrentCamera_0.ViewportSize.x / 600 * 5) / 5, 0.8, 2);
end);
l_UIScale_0.Scale = math.clamp(math.floor(l_CurrentCamera_0.ViewportSize.x / 600 * 5) / 5, 0.8, 2);
v29.JUMP_SPEED = Vector2.new(0, 550);
v29.GRAVITY = Vector2.new(0, 1900);
v29.SPEED_MIN = 280;
v29.SPEED_MAX = 820;
v29.SPEED_INCREASE_RATE = 11;
v29.OBJECTS_PER_SECOND_MIN = 0.9;
v29.OBJECTS_PER_SECOND_MAX = 1.3;
v29.OBJECTS_PER_SECOND_INCREASE_RATE = 0.01;
v29.UNTIL_FIRST_OBJECT = 1;
v29.POINTS_PER_SECOND = v9.PointsPerSecond;
v29.layers = {
    Sky = {
        p = 0, 
        v = 0
    }, 
    Clouds1 = {
        p = 0, 
        v = 0.18
    }, 
    Mountains = {
        p = 0, 
        v = 0.2
    }, 
    Clouds2 = {
        p = 0, 
        v = 0.24
    }, 
    Ground = {
        p = 0, 
        v = 1
    }
};
v29.objectTypes = {
    {
        i = "rbxassetid://133429322374627", 
        w = 62, 
        h = 36, 
        y = -3, 
        m = Vector2.new(7, 3)
    }, 
    {
        i = "rbxassetid://135190396224590", 
        w = 55, 
        h = 35, 
        y = -3, 
        m = Vector2.new(5, 4)
    }
};
local l_Content_0 = l_Prizes_0.Content;
local l_Template_0 = l_Content_0.Template;
l_Template_0.Parent = nil;
local l_Prizes_1 = l_Main_0.Area.Overlay.Result.Prizes;
local l_Template_1 = l_Prizes_1.Template;
l_Template_1.Parent = nil;
local v46 = {};
local v47 = {};
for v48 = 1, #v9.PrizeScores do
    local v49 = l_Template_0:Clone();
    v49.LayoutOrder = v48;
    v49.Name = ("Prize%*"):format(v48);
    v49.Parent = l_Content_0;
    v46[v48] = v49;
    local v50 = l_Template_1:Clone();
    v50.LayoutOrder = v48;
    v50.Name = ("Prize%*"):format(v48);
    v50.Parent = l_Prizes_1;
    v47[v48] = v50;
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(function() --[[ Line: 165 ]] --[[ Name: updateScales ]]
        -- upvalues: l_UIScale_0 (copy), v50 (copy)
        local v51 = 1 / l_UIScale_0.Scale;
        v50.UIScale.Scale = v51;
    end);
    local v52 = 1 / l_UIScale_0.Scale;
    v50.UIScale.Scale = v52;
end;
local _ = function(v53) --[[ Line: 176 ]] --[[ Name: cleanupPrizeEntry ]]
    -- upvalues: v14 (copy)
    v53.ImageTransparency = 0;
    v14.cleanup(v53);
    for _, v55 in v53:GetChildren() do
        if not v55:IsA("UIScale") then
            v55:Destroy();
        end;
    end;
end;
local function _(v57, v58) --[[ Line: 187 ]] --[[ Name: setupPrizeEntry ]]
    -- upvalues: v16 (copy), v17 (copy), v14 (copy)
    if v58.Type == "Currency" then
        v57.Image = v16[v58.Currency].Image;
        return;
    elseif v58.Type == "Powerup" then
        v57.Image = v17[v58.Name].Icon;
        return;
    elseif v58.Type == "Potion" then
        v57.ImageTransparency = 1;
        v14.new(v57, v58, 1.1);
        return;
    else
        print("unknown prize entry type", v58);
        return;
    end;
end;
local function v68() --[[ Line: 202 ]] --[[ Name: updatePrizes ]]
    -- upvalues: v10 (copy), v9 (copy), l_LocalPlayer_0 (copy), v46 (copy), v23 (copy), v27 (copy), v26 (copy), v11 (copy), v47 (copy)
    local v60 = v10:Get();
    if not v60 then
        return;
    else
        for v61, v62 in (v9:GetPrizes(l_LocalPlayer_0, v60)) do
            local v63 = v46[v61];
            v23:UpdateIcon(v63.Inner.Icon, v62);
            v63.Inner.Title.Text = v23:GetName(v62);
            if v62.Type == "Currency" then
                local v64 = table.clone(v62);
                local l_v27_CurrencyMultiplier_0 = v27:GetCurrencyMultiplier(v60, v62.Currency, true);
                v64.Amount = math.ceil(v64.Amount * l_v27_CurrencyMultiplier_0);
                v62 = v64;
            end;
            v23:FormatAmount(v63.Inner.Icon.Amount, v62);
            local l_v23_Rarity_0 = v23:GetRarity(v62);
            if l_v23_Rarity_0 == "Legendary" then
                v26.Cycle(v63.Inner.Title, "Rainbow", {
                    Speed = 0.4
                });
            else
                v26.None(v63.Inner.Title);
                v63.Inner.Title.TextColor3 = v11.RarityColors[l_v23_Rarity_0];
            end;
            local v67 = v47[v61];
            v23:UpdateIcon(v67, v62);
            v23:FormatAmount(v67.Amount, v62);
        end;
        return;
    end;
end;
v10:ConnectDataChanged(v28.CurrencyMultUpdateKeys, v68);
local function v74() --[[ Line: 240 ]] --[[ Name: updateTimer ]]
    -- upvalues: v10 (copy), v9 (copy), l_Main_0 (copy), v12 (copy)
    local v69 = v10:Get();
    if not v69 then
        return;
    else
        local v70 = #v9.PrizeScores;
        local l_RefreshPeriod_0 = v9.RefreshPeriod;
        if v69.DoggyJump.Claimed < v70 then
            l_Main_0.Parent.Parent.Label.Text = ("Win up to %* prizes every %* minutes!"):format(v70, l_RefreshPeriod_0 // 60);
            return;
        else
            local v72 = v12.now();
            local v73 = math.max(1, v69.DoggyJump.Began + l_RefreshPeriod_0 - v72);
            l_Main_0.Parent.Parent.Label.Text = ("More prizes available in %*"):format((v12.formatRealTime(v73)));
            return;
        end;
    end;
end;
task.spawn(function() --[[ Line: 261 ]]
    -- upvalues: v7 (copy), v74 (copy)
    while true do
        if v7:IsOpen("DoggyJump") then
            v74();
        end;
        task.wait(0.5);
    end;
end);
v10:ConnectDataChanged("DoggyJump", function() --[[ Line: 272 ]]
    -- upvalues: v68 (copy), v74 (copy)
    v68();
    v74();
end);
v29.running = false;
v29.t = nil;
v29.speed = nil;
v29.score = nil;
v29.lastObject = nil;
v29.updateConnection = nil;
v29.inputConnection = nil;
v29.objects = {};
v29.doggy = {};
v29.doggy.w = 22;
v29.doggy.h = 22;
v29.lastSounds = {};
v29.lastSounds.Squeak = {
    t = 0, 
    max = 0.25
};
v29.lastSounds.Spring = {
    t = 0, 
    max = 0.25
};
v29.playSound = function(_, v76, _) --[[ Line: 305 ]] --[[ Name: playSound ]]
    -- upvalues: v29 (copy), v19 (copy)
    local v78 = v29.lastSounds[v76];
    if not v78 or tick() - v78.t < v78.max then
        return;
    else
        v78.t = tick();
        v19(v76);
        return;
    end;
end;
v29.newObject = function(v79) --[[ Line: 316 ]] --[[ Name: newObject ]]
    -- upvalues: l_Doggy_0 (copy), l_Objects_0 (copy)
    local v80 = v79.objectTypes[math.random(2)];
    local l_w_0 = v80.w;
    local l_h_0 = v80.h;
    local l_ImageLabel_0 = Instance.new("ImageLabel");
    l_ImageLabel_0.BackgroundTransparency = 1;
    l_ImageLabel_0.BorderMode = Enum.BorderMode.Inset;
    l_ImageLabel_0.Image = v80.i;
    l_ImageLabel_0.AnchorPoint = Vector2.new(0.5, 1);
    l_ImageLabel_0.Size = UDim2.fromOffset(l_w_0, l_h_0);
    l_ImageLabel_0.Position = UDim2.new(100, 0, 0, 0);
    l_ImageLabel_0.ZIndex = l_Doggy_0.ZIndex - 1;
    l_ImageLabel_0.Parent = l_Objects_0;
    table.insert(v79.objects, {
        f = l_ImageLabel_0, 
        p = Vector2.new(300 + l_w_0 + math.random(0, 85), v80.y), 
        w = l_w_0, 
        h = l_h_0, 
        m = v80.m
    });
end;
local v84 = {
    "Frame", 
    "ImageButton"
};
local function v92() --[[ Line: 346 ]] --[[ Name: updateTopRightPrizesFromScore ]]
    -- upvalues: v10 (copy), v9 (copy), v29 (copy), v46 (copy), v25 (copy), v84 (copy), v24 (copy)
    local v85 = v10:Get();
    local v86 = if v85 then v85.DoggyJump.Claimed else 0;
    for v87, v88 in v9.PrizeScores do
        local v89 = v88 <= (v29.score or 0);
        local v90 = v87 <= v86;
        local v91 = v46[v87];
        v91.Claimed.Visible = v90;
        v25(v91.Inner, v90 and 0.5 or 0, nil, v84);
        v91.Inner.Score.Text = ("%*%* Score"):format(v89 and "\226\156\133 " or "", (v24(v9.PrizeScores[v87])));
    end;
end;
v10:ConnectDataChanged("DoggyJump", v92);
v29.stepGame = function(v93, v94) --[[ Line: 370 ]] --[[ Name: stepGame ]]
    -- upvalues: l_Area_0 (copy), v92 (copy), l_Layers_0 (copy), l_Doggy_0 (copy)
    local v95 = v93.t + v94;
    v93.t = v95;
    local v96 = math.clamp(v93.SPEED_MIN + v95 * v93.SPEED_INCREASE_RATE, v93.SPEED_MIN, v93.SPEED_MAX);
    v93.speed = v96;
    local v97 = math.floor(v93.POINTS_PER_SECOND * v95);
    v93.score = v97;
    l_Area_0.Score.Text = ("Score: %i"):format(v97);
    v92();
    local v98 = 1 / math.min(v93.OBJECTS_PER_SECOND_MIN + v93.OBJECTS_PER_SECOND_INCREASE_RATE * v95, v93.OBJECTS_PER_SECOND_MAX);
    local l_lastObject_0 = v93.lastObject;
    if v98 < v95 - v93.lastObject then
        v93:newObject();
        v93.lastObject = l_lastObject_0 + v98;
    end;
    local l_layers_0 = v93.layers;
    for v101, v102 in pairs(l_layers_0) do
        local l_l_Layers_0_FirstChild_0 = l_Layers_0:FindFirstChild(v101);
        local l_Frame1_0 = l_l_Layers_0_FirstChild_0.Frame1;
        local l_Frame2_0 = l_l_Layers_0_FirstChild_0.Frame2;
        local v106 = v102.p + v94 * v102.v * -v96;
        local v107 = v106 % 300;
        local v108 = v107 - 300;
        v102.p = v106;
        l_Frame1_0.Position = UDim2.new(0, v107, 0, 0);
        l_Frame2_0.Position = UDim2.new(0, v108, 0, 0);
    end;
    local l_doggy_0 = v93.doggy;
    local l_v_0 = l_doggy_0.v;
    local l_p_0 = l_doggy_0.p;
    if l_doggy_0.j then
        l_v_0 = l_doggy_0.v - v93.GRAVITY * v94;
        l_p_0 = l_doggy_0.p + l_v_0 * v94;
        if l_p_0.y <= 4 then
            l_p_0 = Vector2.new(l_p_0.x, 0);
            l_v_0 = Vector2.new();
            l_doggy_0.j = false;
        end;
        l_doggy_0.p = l_p_0;
        l_doggy_0.v = l_v_0;
    end;
    if l_p_0.y == 0 then
        l_Doggy_0.Position = UDim2.new(0, l_p_0.x, 1, math.abs((math.sin(v95 * 9))) * -4.2);
        local v112 = math.sin((v95 - v94) * 9) * 3;
        local v113 = math.sin(v95 * 9) * 3;
        l_Doggy_0.Rotation = v113;
        if math.sign(v112) == math.sign(v113) then

        end;
    else
        l_Doggy_0.Position = UDim2.new(0, l_p_0.x, 1, -l_p_0.y);
        l_Doggy_0.Rotation = math.min(360, l_Doggy_0.Rotation + v94 * 760);
    end;
    local l_objects_0 = v93.objects;
    for v115 = #l_objects_0, 1, -1 do
        local v116 = l_objects_0[v115];
        local l_f_0 = v116.f;
        local v118 = v116.p + Vector2.new(v94 * -v96, 0);
        if v118.x <= -10 then
            l_f_0:Destroy();
            table.remove(l_objects_0, v115);
        else
            v116.p = v118;
            l_f_0.Position = UDim2.new(0, v118.x, 1, -v118.y);
        end;
    end;
    local v119 = l_doggy_0.p + Vector2.new(0, 16);
    local v120 = Vector2.new(l_doggy_0.w, l_doggy_0.h) * 0.5;
    for _, v122 in ipairs(l_objects_0) do
        local v123 = v122.p + Vector2.new(0, v122.h * 0.5);
        local v124 = Vector2.new(v122.w, v122.h) * 0.5 - v122.m;
        local v125 = v123 - v119;
        local v126 = v120 + v124;
        if math.abs(v125.x) < v126.x and math.abs(v125.y) < v126.y then
            return true;
        end;
    end;
    return false;
end;
v29.stopGame = function(v127, v128) --[[ Line: 498 ]] --[[ Name: stopGame ]]
    -- upvalues: l_Area_0 (copy), v10 (copy), l_Frame_0 (copy), v9 (copy), v18 (copy), v47 (copy)
    if v127.updateConnection then
        v127.updateConnection:Disconnect();
        v127.updateConnection = nil;
    end;
    if v127.inputConnection then
        v127.inputConnection:Disconnect();
        v127.inputConnection = nil;
    end;
    local l_Overlay_0 = l_Area_0.Overlay;
    local l_Result_0 = l_Overlay_0.Result;
    local v131 = 0;
    local v132 = v10:Get();
    if v132 then
        v131 = v132.DoggyJump.Claimed;
    end;
    l_Frame_0.Input.Visible = false;
    l_Overlay_0.Play.Visible = false;
    delay(0.5, function() --[[ Line: 522 ]]
        -- upvalues: l_Overlay_0 (copy)
        l_Overlay_0.Play.Visible = true;
    end);
    if not v128 then
        l_Result_0.Visible = false;
    else
        local v133 = 0;
        for v134, v135 in v9.PrizeScores do
            if v135 <= v128 and v131 < v134 then
                v133 = v134;
            end;
        end;
        local v136 = #v9.PrizeScores <= v131;
        local v137 = v133 > 0;
        if v137 then
            v18:FireServer("DoggyJumpWin", v133);
        end;
        if v136 then
            l_Result_0.Extra.Visible = true;
            l_Result_0.Extra.Text = "More prizes available later!";
            l_Result_0.Prizes.Visible = false;
        elseif v128 < v9.PrizeScores[1] then
            l_Result_0.Extra.Visible = true;
            l_Result_0.Extra.Text = "Get a higher score to win prizes!";
            l_Result_0.Prizes.Visible = false;
        elseif not v137 then
            l_Result_0.Extra.Visible = true;
            l_Result_0.Extra.Text = "Get a higher score to win more prizes!";
            l_Result_0.Prizes.Visible = false;
        else
            l_Result_0.Extra.Visible = false;
            l_Result_0.Prizes.Visible = true;
            for v138, v139 in v9.PrizeScores do
                local v140 = v47[v138];
                local v141 = false;
                if v139 <= v128 then
                    v141 = v131 < v138;
                end;
                v140.Visible = v141;
            end;
        end;
        l_Result_0.Subtitle.Visible = l_Result_0.Prizes.Visible;
        l_Result_0.Visible = true;
    end;
    l_Overlay_0.Visible = true;
    v127.running = false;
end;
v29.resetGame = function(v142) --[[ Line: 582 ]] --[[ Name: resetGame ]]
    -- upvalues: l_Area_0 (copy), v92 (copy), l_Layers_0 (copy), l_Doggy_0 (copy)
    v142.t = 0;
    v142.speed = v142.SPEED_MIN;
    v142.score = 0;
    v142.lastObject = v142.UNTIL_FIRST_OBJECT - v142.OBJECTS_PER_SECOND_MIN;
    v142.running = false;
    l_Area_0.Score.Text = ("Score: %i"):format(0);
    v92();
    local l_objects_1 = v142.objects;
    for v144 in ipairs(l_objects_1) do
        l_objects_1[v144].f:Destroy();
        l_objects_1[v144] = nil;
    end;
    local l_layers_1 = v142.layers;
    for v146, v147 in pairs(l_layers_1) do
        v147.p = 0;
        local l_l_Layers_0_FirstChild_1 = l_Layers_0:FindFirstChild(v146);
        l_l_Layers_0_FirstChild_1.Frame1.Position = UDim2.fromScale(0, 0);
        l_l_Layers_0_FirstChild_1.Frame2.Position = UDim2.fromScale(1, 0);
    end;
    local l_doggy_1 = v142.doggy;
    l_doggy_1.p = Vector2.new(40, 0);
    l_doggy_1.v = Vector2.new(0, 0);
    l_doggy_1.j = false;
    l_Doggy_0.Position = UDim2.new(0, l_doggy_1.p.x, 1, 0);
    l_Doggy_0.Rotation = 0;
end;
v29.startGame = function(v150, _) --[[ Line: 617 ]] --[[ Name: startGame ]]
    -- upvalues: v20 (copy), l_RunService_0 (copy), l_UserInputService_0 (copy), l_Frame_0 (copy), l_Area_0 (copy)
    v150:resetGame();
    spawn(function() --[[ Line: 620 ]]
        -- upvalues: v20 (ref)
        v20:SetTrack("rbxassetid://4853930727");
    end);
    local v152 = 0;
    v150.updateConnection = l_RunService_0.Heartbeat:Connect(function(v153) --[[ Line: 625 ]]
        -- upvalues: v152 (ref), v150 (copy)
        v152 = v152 + v153;
        while v152 >= 0.016666666666666666 do
            if v150:stepGame(0.016666666666666666) then
                v150:stopGame(v150.score);
            end;
            v152 = v152 - 0.016666666666666666;
        end;
    end);
    local l_doggy_2 = v150.doggy;
    v150.inputConnection = l_UserInputService_0.InputBegan:Connect(function(v155) --[[ Line: 639 ]]
        -- upvalues: l_doggy_2 (copy), v150 (copy)
        local l_UserInputType_0 = v155.UserInputType;
        if (l_UserInputType_0 == Enum.UserInputType.MouseButton1 or l_UserInputType_0 == Enum.UserInputType.Touch or v155.KeyCode == Enum.KeyCode.ButtonY) and not l_doggy_2.j then
            l_doggy_2.j = true;
            l_doggy_2.v = v150.JUMP_SPEED;
            v150:playSound("Spring", 0.8);
        end;
    end);
    l_Frame_0.Input.Visible = true;
    l_Area_0.Overlay.Visible = false;
    v150.running = true;
end;
v7:BindOnOpened("DoggyJump", function() --[[ Line: 662 ]]
    -- upvalues: l_ScreenGui_0 (copy)
    l_ScreenGui_0.HUD.Visible = false;
end);
v7:BindOnClosed("DoggyJump", function() --[[ Line: 669 ]]
    -- upvalues: v29 (copy), l_ScreenGui_0 (copy)
    v29:stopGame(nil);
    l_ScreenGui_0.HUD.Visible = true;
end);
v5(l_Main_0.Parent.Parent.Top.Close.Button, v8.Button.Red);
v6(l_Main_0.Parent.Parent.Top.Close.Button, function() --[[ Line: 680 ]]
    -- upvalues: v7 (copy)
    v7:Close();
end);
v5(l_Main_0.Area.Overlay.Play.Button, v8.Button.Purple);
v6(l_Main_0.Area.Overlay.Play.Button, function() --[[ Line: 688 ]]
    -- upvalues: v29 (copy)
    if v29.running then
        return;
    else
        v29:startGame();
        return;
    end;
end);
l_UserInputService_0.InputBegan:Connect(function(v157, v158) --[[ Line: 695 ]]
    -- upvalues: v7 (copy), v29 (copy), l_Main_0 (copy)
    if v158 or not v7:IsOpen("DoggyJump") or v29.running then
        return;
    else
        if v157.KeyCode == Enum.KeyCode.ButtonY and l_Main_0.Area.Overlay.Play.Visible then
            v29:startGame();
        end;
        return;
    end;
end);
l_Frame_0.Input.Gamepad.Icon.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.ButtonY);
l_Main_0.Area.Overlay.Play.Button.GamepadIcon.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.ButtonY);
v22.Changed:Connect(function(v159) --[[ Line: 709 ]] --[[ Name: onInputChanged ]]
    -- upvalues: l_Frame_0 (copy), l_Main_0 (copy)
    local l_Main_1 = l_Frame_0.Input.Main;
    local v161 = true;
    if v159 ~= "Keyboard" then
        v161 = v159 == "Touch";
    end;
    l_Main_1.Visible = v161;
    l_Frame_0.Input.Gamepad.Visible = v159 == "Gamepad";
    l_Main_0.Area.Overlay.Play.Button.GamepadIcon.Visible = v159 == "Gamepad";
    if v159 == "Keyboard" then
        l_Frame_0.Input.Main.Text = "Click to jump!";
        return;
    else
        if v159 == "Touch" then
            l_Frame_0.Input.Main.Text = "Tap to jump!";
        end;
        return;
    end;
end);
local l_Mode_0 = v22.Mode;
local l_Main_2 = l_Frame_0.Input.Main;
local v164 = true;
if l_Mode_0 ~= "Keyboard" then
    v164 = l_Mode_0 == "Touch";
end;
l_Main_2.Visible = v164;
l_Frame_0.Input.Gamepad.Visible = l_Mode_0 == "Gamepad";
l_Main_0.Area.Overlay.Play.Button.GamepadIcon.Visible = l_Mode_0 == "Gamepad";
if l_Mode_0 == "Keyboard" then
    l_Frame_0.Input.Main.Text = "Click to jump!";
elseif l_Mode_0 == "Touch" then
    l_Frame_0.Input.Main.Text = "Tap to jump!";
end;
v29.Stop = function(_) --[[ Line: 726 ]] --[[ Name: Stop ]]
    -- upvalues: v29 (copy)
    v29:stopGame(nil);
    v29:resetGame();
end;
v29.IsPlaying = function(_) --[[ Line: 731 ]] --[[ Name: IsPlaying ]]
    -- upvalues: v29 (copy)
    return v29.running == true;
end;
v29:Stop();
v21:Bind(l_Activation_0, function() --[[ Line: 738 ]]
    -- upvalues: v7 (copy)
    v7:Open("DoggyJump");
end);
return v29;
ModuleScript: EasterClient
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local l_TweenService_0 = game:GetService("TweenService");
local l_RunService_0 = game:GetService("RunService");
local l_SoundService_0 = game:GetService("SoundService");
local l_Workspace_0 = game:GetService("Workspace");
local v6 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v7 = require(l_ReplicatedStorage_0.Shared.Data.EasterEggs);
local v8 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Animations.SetFade);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Viewport);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Table.CountKeys);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v12 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v13 = require(l_ReplicatedStorage_0.Client.Gui.Utils.SetCoreGuiEnabled);
local v14 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v15 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v16 = require(l_ReplicatedStorage_0.Shared.Palette);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v18 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v19 = require(l_ReplicatedStorage_0.Client.Gui.ProximityPrompt);
local v20 = require(l_ReplicatedStorage_0.Client.Gui.PlayTransition);
local v21 = require(l_ReplicatedStorage_0.Client.PlayerControls);
local v22 = require(l_ReplicatedStorage_0.Client.Music);
local v23 = require(l_ReplicatedStorage_0.Client.Effects.Bubble);
local v24 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.CharacterUtil);
local v25 = require(l_ReplicatedStorage_0.Shared.Constants);
local v26 = require(l_ReplicatedStorage_0.Shared.Data.Titles);
local v27 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v28 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v29 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v30 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v31 = require(l_ReplicatedStorage_0.Client.Activation);
local v32 = require(l_ReplicatedStorage_0.Shared.Utils.SetModelUnlocked);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_CurrentCamera_0 = workspace.CurrentCamera;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Easter_0 = l_ScreenGui_0.Easter;
local l_Template_0 = l_Easter_0.Template;
l_Template_0.BackgroundTransparency = 1;
l_Template_0.Parent = nil;
v9.Template("EasterEgg", {
    FOV = 1, 
    Scale = 0.9, 
    CFrame = CFrame.Angles(0, 3.141592653589793, 0)
});
local v38 = {};
local function v40(v39) --[[ Line: 61 ]] --[[ Name: colorFromDifficulty ]]
    if v39 == "Insane" then
        return Color3.fromRGB(255, 29, 195);
    elseif v39 == "Hard" then
        return Color3.fromRGB(255, 61, 61);
    elseif v39 == "Medium" then
        return Color3.fromRGB(255, 168, 80);
    else
        return Color3.fromRGB(87, 255, 75);
    end;
end;
local function _(v41) --[[ Line: 73 ]] --[[ Name: getEggModel ]]
    -- upvalues: l_ReplicatedStorage_0 (copy)
    return (l_ReplicatedStorage_0.Assets.EasterEggs:FindFirstChild(v41) or l_ReplicatedStorage_0.Assets.EasterEggs.Template):Clone();
end;
local l_Leaderboard_0 = l_Workspace_0:FindFirstChild("Event"):FindFirstChild("EasterLeaderboard").Display.Leaderboard;
for _, v45 in {
    {
        holder = l_Leaderboard_0.MainRewards, 
        data = v25.EasterRewards.Everyone
    }, 
    {
        holder = l_Leaderboard_0.TopRewards, 
        data = v25.EasterRewards.Top250
    }
} do
    local l_Title_0 = v45.data.Title;
    local v47 = v26[l_Title_0];
    local l_TextLabel_0 = v45.holder.List.Title.TextLabel;
    l_TextLabel_0.Text = v47.Display or l_Title_0;
    if typeof(v47.Color) == "ColorSequence" then
        local l_UIGradient_0 = Instance.new("UIGradient");
        l_UIGradient_0.Color = v47.Color;
        l_UIGradient_0.Parent = l_TextLabel_0;
        l_TextLabel_0.TextColor3 = Color3.fromRGB(255, 255, 255);
    else
        l_TextLabel_0.TextColor3 = v47.Color;
    end;
    local l_List_0 = v45.holder.List;
    local l_Template_1 = l_List_0.Template;
    l_Template_1.BackgroundTransparency = 1;
    l_Template_1.Parent = nil;
    for v52, v53 in v45.data.Items do
        local v54 = l_Template_1:Clone();
        local v55 = v27(v53);
        v55.Size = UDim2.fromScale(1, 1);
        v55.Parent = v54;
        v54.LayoutOrder = v52;
        v54.Name = ("Item%*"):format(v52);
        v54.Parent = l_List_0;
    end;
end;
local l_l_Leaderboard_0_0 = l_Leaderboard_0 --[[ copy: 42 -> 64 ]];
local function v59() --[[ Line: 127 ]] --[[ Name: update ]]
    -- upvalues: v14 (copy), l_l_Leaderboard_0_0 (copy), v28 (copy)
    local v57 = v14:Get();
    if not v57 then
        return;
    else
        local _ = v57.Easter.FinishPosition;
        if v57.Easter.Claimed == false then
            l_l_Leaderboard_0_0.You.Text = "You haven't finished yet!";
            return;
        elseif v57.Easter.FinishPosition then
            l_l_Leaderboard_0_0.You.Text = ("You placed: #%*!"):format((v28(v57.Easter.FinishPosition)));
            return;
        else
            l_l_Leaderboard_0_0.You.Text = "You finished!";
            return;
        end;
    end;
end;
v14:ConnectDataChanged("Easter", v59);
v59();
v18.Event("EasterHuntClaimed"):Connect(function(v60) --[[ Line: 150 ]]
    -- upvalues: v29 (copy), v17 (copy), v16 (copy), v11 (copy), v30 (copy)
    local v61 = "You finished the Egg Hunt!";
    if v60 then
        v61 = ("You placed #%* in the Egg Hunt!"):format(v60);
    end;
    v61 = ("%* Enjoy your rewards!"):format(v61);
    local v64 = v29.new("Well done!"):Text(v61):Button(function(v62, v63) --[[ Line: 159 ]]
        -- upvalues: v17 (ref), v16 (ref), v11 (ref)
        v62.Label.Text = "Okay";
        v17(v62, v16.Button.Purple);
        v11(v62, v63);
    end);
    v30(v64:Build());
end);
local v65 = nil;
l_Leaderboard_0 = l_ScreenGui_0.EasterReceived;
l_Leaderboard_0.Visible = true;
l_Leaderboard_0.Parent = nil;
local v66 = TweenInfo.new(0.35, Enum.EasingStyle.Quint);
local l_l_Leaderboard_0_1 = l_Leaderboard_0 --[[ copy: 42 -> 65 ]];
local l_v66_0 = v66 --[[ copy: 43 -> 66 ]];
v65 = function(v69) --[[ Line: 179 ]] --[[ Name: eggFound ]]
    -- upvalues: v7 (copy), l_l_Leaderboard_0_1 (copy), l_RunService_0 (copy), v6 (copy), v9 (copy), l_ReplicatedStorage_0 (copy), v40 (copy), l_ScreenGui_0 (copy), v8 (copy), l_v66_0 (copy), l_TweenService_0 (copy), v15 (copy), v17 (copy), v16 (copy), v11 (copy)
    local v70 = v7[v69];
    local v71 = l_l_Leaderboard_0_1:Clone();
    local v73 = l_RunService_0.Heartbeat:Connect(function(v72) --[[ Line: 182 ]]
        -- upvalues: v71 (copy)
        v71.Frame.Radial.Rotation = (v71.Frame.Radial.Rotation + v72 * 10) % 360;
    end);
    v6:Close();
    v9.Mount(v71.Frame.Item.Viewport, (l_ReplicatedStorage_0.Assets.EasterEggs:FindFirstChild(v69) or l_ReplicatedStorage_0.Assets.EasterEggs.Template):Clone(), "EasterEgg");
    v71.Frame.Item.UIScale.Scale = 2;
    v71.BackgroundTransparency = 1;
    v71.Frame.Continue.Visible = false;
    v71.Frame.Item.Label.Text = v69;
    v71.Frame.Item.Difficulty.Text = v70.Difficulty;
    v71.Frame.Item.Difficulty.TextColor3 = v40(v70.Difficulty);
    v71.Parent = l_ScreenGui_0;
    v8(v71.Frame.Item, 0, l_v66_0);
    l_TweenService_0:Create(v71, l_v66_0, {
        BackgroundTransparency = 0.5
    }):Play();
    l_TweenService_0:Create(v71.Frame.Item.UIScale, l_v66_0, {
        Scale = 1
    }):Play();
    v15("Fireworks");
    v17(v71.Frame.Continue.Button, v16.Button.Green);
    v11(v71.Frame.Continue.Button, function() --[[ Line: 204 ]]
        -- upvalues: v71 (copy), v73 (copy)
        v71:Destroy();
        v73:Disconnect();
    end);
    task.wait(0.5);
    v71.Frame.Continue.Visible = true;
end;
l_Leaderboard_0 = l_ScreenGui_0.EasterWordSearch;
v66 = l_Leaderboard_0.Frame.Grid.Template;
v66.Parent = nil;
v59 = string.gsub("LDCXCGVLHS AOBUBBLEDA AGYRQIEQRK NGBSDTXVOL AYDEKXTKLH DOGCATIMRZ MSLRUQMTET GCWEDSGRVX UCOTOLPKOB MNOSGQHSLI", " ", "");
local l_l_Leaderboard_0_2 = l_Leaderboard_0 --[[ copy: 42 -> 67 ]];
local function v83() --[[ Line: 225 ]] --[[ Name: generateKey ]]
    -- upvalues: l_l_Leaderboard_0_2 (copy)
    local v75 = {};
    for _, v77 in l_l_Leaderboard_0_2.Frame.Grid:GetChildren() do
        if v77:IsA("Frame") then
            table.insert(v75, v77);
        end;
    end;
    table.sort(v75, function(v78, v79) --[[ Line: 232 ]]
        return v78.LayoutOrder < v79.LayoutOrder;
    end);
    local v80 = "";
    for _, v82 in v75 do
        v80 = v80 .. (v82.BackgroundColor3 == Color3.new(1, 1, 1) and 0 or 1);
    end;
    return v80;
end;
for v84 = 1, string.len(v59) do
    local v85 = v66:Clone();
    v85.Button.Label.Text = string.sub(v59, v84, v84);
    v85.LayoutOrder = v84;
    v85.Name = v85.Button.Label.Text;
    v85.Parent = l_Leaderboard_0.Frame.Grid;
    v11(v85.Button, function() --[[ Line: 248 ]]
        -- upvalues: v85 (copy), v18 (copy), v83 (copy)
        v85.BackgroundColor3 = v85.BackgroundColor3 == Color3.new(1, 1, 1) and Color3.fromRGB(93, 228, 255) or Color3.new(1, 1, 1);
        v18:FireServer("EasterNerdEgg", (v83()));
    end);
end;
v17(l_Leaderboard_0.Frame.Close, v16.Button.Red);
v11(l_Leaderboard_0.Frame.Close, function() --[[ Line: 255 ]]
    -- upvalues: v6 (copy)
    v6:Close();
end);
local v86 = v19.new();
v86.MaxActivationDistance = 10;
v86.Parent = workspace.Worlds["The Overworld"].Islands["Floating Island"].Island.Crossword.Prompt;
v86.Triggered:Connect(function() --[[ Line: 262 ]]
    -- upvalues: v6 (copy)
    v6:Open("EasterWordSearch");
end);
local l_v86_0 = v86 --[[ copy: 46 -> 68 ]];
v14:ConnectDataChanged("Easter", function(v88) --[[ Line: 266 ]]
    -- upvalues: l_v86_0 (copy)
    l_v86_0.Enabled = v88.Easter.Found["Nerd Egg"] == nil;
end);
l_Leaderboard_0 = v19.new();
v66 = false;
local l_l_Leaderboard_0_3 = l_Leaderboard_0 --[[ copy: 42 -> 69 ]];
do
    local l_v66_1 = v66;
    v59 = function() --[[ Line: 277 ]] --[[ Name: updateEnabled ]]
        -- upvalues: v14 (copy), l_l_Leaderboard_0_3 (copy), l_v66_1 (ref)
        local v91 = v14:Get();
        if not v91 then
            return;
        else
            local l_l_l_Leaderboard_0_3_0 = l_l_Leaderboard_0_3;
            local v93 = false;
            if v91.Easter.Found["Disco Egg"] == nil then
                v93 = not l_v66_1 and v91.AreasUnlocked["The Void"] ~= nil;
            end;
            l_l_l_Leaderboard_0_3_0.Enabled = v93;
            return;
        end;
    end;
    v83 = require(script.Dance);
    local l_v83_0 = v83 --[[ copy: 45 -> 70 ]];
    v86 = function() --[[ Line: 287 ]] --[[ Name: start ]]
        -- upvalues: l_v66_1 (ref), v14 (copy), l_l_Leaderboard_0_3 (copy), v20 (copy), v6 (copy), l_ScreenGui_0 (copy), v21 (copy), v22 (copy), v23 (copy), v13 (copy), v24 (copy), l_LocalPlayer_0 (copy), l_CurrentCamera_0 (copy), l_v83_0 (copy)
        if l_v66_1 then
            return;
        else
            l_v66_1 = true;
            local v95 = v14:Get();
            if v95 then
                local l_l_l_Leaderboard_0_3_1 = l_l_Leaderboard_0_3;
                local v97 = false;
                if v95.Easter.Found["Disco Egg"] == nil then
                    v97 = not l_v66_1 and v95.AreasUnlocked["The Void"] ~= nil;
                end;
                l_l_l_Leaderboard_0_3_1.Enabled = v97;
            end;
            v20("Dance Off!", function() --[[ Line: 293 ]]
                -- upvalues: v6 (ref), l_ScreenGui_0 (ref), v21 (ref), v22 (ref), v23 (ref), v13 (ref), v24 (ref), l_LocalPlayer_0 (ref), l_CurrentCamera_0 (ref), l_v83_0 (ref), l_v66_1 (ref), v14 (ref), l_l_Leaderboard_0_3 (ref)
                v6:Close();
                l_ScreenGui_0.Enabled = false;
                v21:Disable();
                v21:EnableMaster();
                v22:SetVolume(0);
                v23:SetVisible(false);
                v13(false);
                local l_v24_Humanoid_0 = v24:GetHumanoid(l_LocalPlayer_0);
                local v99 = l_v24_Humanoid_0 and l_v24_Humanoid_0:LoadAnimation(script.Dance1);
                if v99 then
                    v99:Play();
                end;
                local v100 = workspace.Dancer.Alien.Humanoid.Animator:LoadAnimation(script.Dance2);
                v100:Play();
                l_CurrentCamera_0.CameraType = Enum.CameraType.Scriptable;
                l_CurrentCamera_0.CFrame = CFrame.new(1197.6322, 2438.43774, 1082.82886, -0.63733542, -0.236294419, 0.733463407, -1.49011612E-8, 0.951824903, 0.306642264, -0.77058655, 0.195433959, -0.606631696);
                l_v83_0:Main(function() --[[ Line: 315 ]]
                    -- upvalues: l_LocalPlayer_0 (ref), l_CurrentCamera_0 (ref), v99 (copy), v100 (copy), v13 (ref), v23 (ref), l_v66_1 (ref), v14 (ref), l_l_Leaderboard_0_3 (ref), v22 (ref), l_ScreenGui_0 (ref)
                    local l_Character_0 = l_LocalPlayer_0.Character;
                    local v102 = l_Character_0 and l_Character_0:FindFirstChild("Humanoid");
                    if v102 ~= nil then
                        l_CurrentCamera_0.CameraSubject = v102;
                        l_CurrentCamera_0.CameraType = Enum.CameraType.Custom;
                    end;
                    if v99 then
                        v99:Stop();
                    end;
                    v100:Stop();
                    v13(true);
                    v23:SetVisible(true);
                    l_v66_1 = false;
                    local v103 = v14:Get();
                    if v103 then
                        local l_l_l_Leaderboard_0_3_2 = l_l_Leaderboard_0_3;
                        local v105 = false;
                        if v103.Easter.Found["Disco Egg"] == nil then
                            v105 = not l_v66_1 and v103.AreasUnlocked["The Void"] ~= nil;
                        end;
                        l_l_l_Leaderboard_0_3_2.Enabled = v105;
                    end;
                    v22:SetVolume(1);
                    l_ScreenGui_0.Enabled = true;
                end);
            end);
            return;
        end;
    end;
    l_Leaderboard_0.MaxActivationDistance = 10;
    l_Leaderboard_0.ActionText = "Challenge?";
    l_Leaderboard_0.Parent = workspace.Worlds["The Overworld"].Islands.Twilight.Island.Alien.HumanoidRootPart;
    l_Leaderboard_0.Triggered:Connect(v86);
    v14:ConnectDataChanged({
        "Easter", 
        "AreasUnlocked"
    }, v59);
end;
l_Leaderboard_0 = l_ScreenGui_0.Easter.Claim;
v17(l_Leaderboard_0.Button, v16.Button.Purple);
v11(l_Leaderboard_0.Button, function() --[[ Line: 350 ]]
    -- upvalues: v18 (copy), v6 (copy)
    v18:FireServer("EasterClaimRewards");
    v6:Close();
end);
v66 = l_ScreenGui_0.ItemShop.Frame.Sticker;
v59 = l_ScreenGui_0.HUD.Left.Currency.Coins.Bundles.Hunt;
v11(v59.Button, function() --[[ Line: 361 ]]
    -- upvalues: v6 (copy)
    v6:Open("Easter");
end);
v11(l_Easter_0.Close, function() --[[ Line: 365 ]]
    -- upvalues: v6 (copy)
    v6:Close();
end);
local l_v59_0 = v59 --[[ copy: 44 -> 71 ]];
local l_v66_2 = v66 --[[ copy: 43 -> 72 ]];
v14:ConnectDataChanged("Easter", function(v108) --[[ Line: 369 ]]
    -- upvalues: v10 (copy), v7 (copy), l_v59_0 (copy), l_v66_2 (copy), l_Leaderboard_0 (copy)
    local v109 = v10(v108.Easter.Found) >= v10(v7);
    l_v59_0.Visible = false;
    l_v66_2.Visible = v108.Easter.Found["Sticker Egg"] == nil;
    local l_l_Leaderboard_0_4 = l_Leaderboard_0;
    local v111 = false;
    if v108.Easter.Claimed == false then
        v111 = v109 == true;
    end;
    l_l_Leaderboard_0_4.Visible = v111;
    l_Leaderboard_0.Parent.Claimed.Visible = v108.Easter.Claimed == true;
end);
v66.Activated:Connect(function() --[[ Line: 380 ]]
    -- upvalues: v18 (copy)
    v18:FireServer("ClaimStickerEgg");
end);
v31:Bind(workspace.Event.View, function() --[[ Line: 384 ]]
    -- upvalues: v6 (copy)
    v6:Open("Easter");
end);
v66 = {};
local l_v66_3 = v66 --[[ copy: 43 -> 73 ]];
v59 = function() --[[ Line: 393 ]] --[[ Name: update ]]
    -- upvalues: v14 (copy), l_v66_3 (copy), v32 (copy)
    local v113 = v14:Get();
    if not v113 then
        return;
    else
        for v114, v115 in l_v66_3 do
            local v116 = v113.Easter.Found[v114] ~= nil;
            local l_FirstChild_0 = workspace.Event.Eggs:FindFirstChild(v114);
            if l_FirstChild_0 then
                v32(l_FirstChild_0.Colors, v116);
            end;
            v32(v115, v116);
        end;
        return;
    end;
end;
for v118 in v7 do
    local l_Root_0 = workspace.Event.Eggs:FindFirstChild(v118).Root;
    l_Root_0.Transparency = 1;
    l_Root_0.CanCollide = false;
    local v120 = (l_ReplicatedStorage_0.Assets.EasterEggs:FindFirstChild(v118) or l_ReplicatedStorage_0.Assets.EasterEggs.Template):Clone();
    v120:ScaleTo(2);
    v120:PivotTo(l_Root_0.CFrame);
    v120.Parent = workspace.Rendered;
    v66[v118] = v120;
    v32(v120, false);
end;
v14:ConnectDataChanged("Easter", v59);
v66 = 0;
v59 = NumberRange.new(100, 400);
v83 = TweenInfo.new(0.8, Enum.EasingStyle.Back);
v86 = TweenInfo.new(v83.Time, Enum.EasingStyle.Quint);
local v121 = TweenInfo.new(0.2, Enum.EasingStyle.Sine);
local v122 = TweenInfo.new(0.35, Enum.EasingStyle.Sine);
local v123 = v10(v7);
local v124 = {
    "ImageButton"
};
local function _(v125, v126) --[[ Line: 437 ]] --[[ Name: getPosition ]]
    -- upvalues: v123 (copy)
    local v127 = math.rad(360 / v123) * (v125 - 1) - 1.5707963267948966;
    return UDim2.new(0.5, math.cos(v127) * v126, 0.5, math.sin(v127) * v126);
end;
do
    local l_v66_4, l_v59_1 = v66, v59;
    local function v143(v131) --[[ Line: 443 ]] --[[ Name: highlight ]]
        -- upvalues: v38 (copy), v7 (copy), l_TweenService_0 (copy), v122 (copy), l_v59_1 (ref), v123 (copy), l_Easter_0 (copy), v8 (copy), v121 (copy)
        for _, v133 in v38 do
            if v133.Element ~= v131 then
                local v134 = v7[v133.Element.Name];
                v133.Element.ZIndex = 1;
                l_TweenService_0:Create(v133.Element.UIScale, v122, {
                    Scale = 1
                }):Play();
                local l_l_TweenService_0_0 = l_TweenService_0;
                local l_Element_0 = v133.Element;
                local l_v122_0 = v122;
                local v138 = {};
                local l_LayoutOrder_0 = v134.LayoutOrder;
                local l_Max_0 = l_v59_1.Max;
                local v141 = math.rad(360 / v123) * (l_LayoutOrder_0 - 1) - 1.5707963267948966;
                v138.Position = UDim2.new(0.5, math.cos(v141) * l_Max_0, 0.5, math.sin(v141) * l_Max_0);
                l_l_TweenService_0_0:Create(l_Element_0, l_v122_0, v138):Play();
            end;
        end;
        if v131 then
            local v142 = v7[v131.Name];
            l_Easter_0.Hint.Label.Text = v142.Hint;
            v131.ZIndex = 11;
            v8(l_Easter_0.Middle, 1, v121, {
                "Frame"
            });
            l_TweenService_0:Create(v131.UIScale, v122, {
                Scale = 1.5
            }):Play();
            l_TweenService_0:Create(v131, v122, {
                Position = UDim2.fromScale(0.5, 0.5)
            }):Play();
        end;
        v8(l_Easter_0.Hint, 1, TweenInfo.new(0.01));
        task.defer(v8, l_Easter_0.Hint, 0, v121);
    end;
    local l_v83_1 = v83 --[[ copy: 45 -> 74 ]];
    local function v173(v145, v146) --[[ Line: 465 ]] --[[ Name: display ]]
        -- upvalues: v7 (copy), v38 (copy), v8 (copy), v124 (copy), l_Easter_0 (copy), v86 (copy), l_TweenService_0 (copy), l_v83_1 (copy), v121 (copy), v14 (copy), l_v59_1 (ref), v123 (copy), l_ReplicatedStorage_0 (copy), l_SoundService_0 (copy), l_v66_4 (ref)
        local v147 = {};
        for v148 in v7 do
            local v149 = v38[v148];
            v8(v149.Element, v145 and 1 or 0, TweenInfo.new(0.01), v124);
            table.insert(v147, v148);
        end;
        table.sort(v147, function(v150, v151) --[[ Line: 472 ]]
            -- upvalues: v145 (copy), v7 (ref)
            if v145 then
                return v7[v150].LayoutOrder < v7[v151].LayoutOrder;
            else
                return v7[v150].LayoutOrder > v7[v151].LayoutOrder;
            end;
        end);
        if v145 then
            v8(l_Easter_0.Middle, 0, v86, {
                "Frame"
            });
            l_TweenService_0:Create(l_Easter_0.Middle.UIScale, l_v83_1, {
                Scale = 1
            }):Play();
        else
            v8(l_Easter_0.Middle, 1, v121, {
                "Frame"
            });
            l_TweenService_0:Create(l_Easter_0.Middle.UIScale, v86, {
                Scale = 0.5
            }):Play();
        end;
        v8(l_Easter_0.Hint, 1, v121);
        local v152 = v14:Get();
        local v153 = v152 and v152.Settings["Sound Effects"] or 100;
        for _, v155 in v147 do
            local v156 = v38[v155];
            local v157 = v7[v155];
            if v145 then
                l_TweenService_0:Create(v156.Element.UIScale, v86, {
                    Scale = 1
                }):Play();
                local l_l_TweenService_0_1 = l_TweenService_0;
                local l_Element_1 = v156.Element;
                local l_l_v83_1_0 = l_v83_1;
                local v161 = {};
                local l_LayoutOrder_1 = v157.LayoutOrder;
                local l_Max_1 = l_v59_1.Max;
                local v164 = math.rad(360 / v123) * (l_LayoutOrder_1 - 1) - 1.5707963267948966;
                v161.Position = UDim2.new(0.5, math.cos(v164) * l_Max_1, 0.5, math.sin(v164) * l_Max_1);
                l_l_TweenService_0_1:Create(l_Element_1, l_l_v83_1_0, v161):Play();
            else
                l_TweenService_0:Create(v156.Element.UIScale, v86, {
                    Scale = 0.2
                }):Play();
                local l_l_TweenService_0_2 = l_TweenService_0;
                local l_Element_2 = v156.Element;
                local l_v86_1 = v86;
                local v168 = {};
                local l_LayoutOrder_2 = v157.LayoutOrder;
                local l_Min_0 = l_v59_1.Min;
                local v171 = math.rad(360 / v123) * (l_LayoutOrder_2 - 1) - 1.5707963267948966;
                v168.Position = UDim2.new(0.5, math.cos(v171) * l_Min_0, 0.5, math.sin(v171) * l_Min_0);
                l_l_TweenService_0_2:Create(l_Element_2, l_v86_1, v168):Play();
            end;
            local v172 = l_ReplicatedStorage_0.Assets.Sounds.UI.EasterEggReveal:Clone();
            v172.PlaybackSpeed = 1.25 + v157.LayoutOrder / 20;
            v172.Volume = 0.25 * v153 / 100;
            l_SoundService_0:PlayLocalSound(v172);
            task.delay(v172.PlaybackSpeed, function() --[[ Line: 508 ]]
                -- upvalues: v172 (copy)
                v172:Destroy();
            end);
            task.defer(v8, v156.Element, v145 and 0 or 1, v145 and l_v83_1 or v121, v124);
            task.wait(0.02);
            if l_v66_4 ~= v146 then
                break;
            end;
        end;
    end;
    for v174, v175 in v7 do
        local v176 = l_Template_0:Clone();
        v176.Name = v174;
        v176.Button.Label.Text = v174;
        v176.UIScale.Scale = 0.2;
        v176.Button.Difficulty.Text = v175.Difficulty;
        v176.Button.Difficulty.TextColor3 = v40(v175.Difficulty);
        local l_LayoutOrder_3 = v175.LayoutOrder;
        local l_Min_1 = l_v59_1.Min;
        local v179 = math.rad(360 / v123) * (l_LayoutOrder_3 - 1) - 1.5707963267948966;
        v176.Position = UDim2.new(0.5, math.cos(v179) * l_Min_1, 0.5, math.sin(v179) * l_Min_1);
        v176.Parent = l_Easter_0;
        v11(v176.Button, function() --[[ Line: 538 ]]
            -- upvalues: v143 (copy), v176 (copy)
            v143(v176);
        end);
        local v180 = (l_ReplicatedStorage_0.Assets.EasterEggs:FindFirstChild(v174) or l_ReplicatedStorage_0.Assets.EasterEggs.Template):Clone();
        v9.Mount(v176.Button.Viewport, v180, "EasterEgg");
        v38[v174] = {
            Model = v180, 
            Element = v176
        };
    end;
    l_Easter_0.Middle.BackgroundTransparency = 1;
    l_Easter_0.Middle.UIScale.Scale = 0.5;
    v8(l_Easter_0.Hint, 1);
    v12.Changed:Connect(function(v181) --[[ Line: 554 ]]
        -- upvalues: l_v59_1 (ref)
        l_v59_1 = NumberRange.new(100, v181 == "Touch" and 325 or 400);
    end);
    v14:ConnectDataChanged("Easter", function(v182) --[[ Line: 558 ]]
        -- upvalues: v38 (copy), l_Easter_0 (copy)
        local v183 = 0;
        local v184 = 0;
        for v185, v186 in v38 do
            local v187 = v182.Easter.Found[v185] ~= nil;
            if v187 then
                v183 = v183 + 1;
            end;
            v184 = v184 + 1;
            v186.Element.Button.Viewport.ImageColor3 = v187 and Color3.new(1, 1, 1) or Color3.new();
            v186.Element.Button.Label.Text = v187 and v185 or "???";
        end;
        l_Easter_0.Middle.Front.Size = UDim2.fromScale(1, v183 / v184);
    end);
    local l_v83_2 = v83 --[[ copy: 45 -> 75 ]];
    v6:BindOnOpened("Easter", function() --[[ Line: 573 ]]
        -- upvalues: l_v66_4 (ref), l_ScreenGui_0 (copy), v13 (copy), v173 (copy), l_TweenService_0 (copy), l_Easter_0 (copy), l_v83_2 (copy)
        local v189 = l_v66_4 + 1;
        l_v66_4 = v189;
        l_ScreenGui_0.HUD.Visible = false;
        v13(false);
        task.defer(v173, true, v189);
        l_TweenService_0:Create(l_Easter_0, TweenInfo.new(l_v83_2.Time), {
            BackgroundTransparency = 0.3
        }):Play();
    end);
    v6:BindOnClosed("Easter", function() --[[ Line: 585 ]]
        -- upvalues: l_v66_4 (ref), l_ScreenGui_0 (copy), v13 (copy), v173 (copy), l_Easter_0 (copy), l_TweenService_0 (copy), l_v83_2 (copy)
        local v190 = l_v66_4 + 1;
        l_v66_4 = v190;
        l_ScreenGui_0.HUD.Visible = true;
        v13(true);
        task.defer(v173, false, v190);
        l_Easter_0.Visible = true;
        l_TweenService_0:Create(l_Easter_0, TweenInfo.new(l_v83_2.Time), {
            BackgroundTransparency = 1
        }):Play();
        task.delay(l_v83_2.Time, function() --[[ Line: 597 ]]
            -- upvalues: l_v66_4 (ref), v190 (copy), l_Easter_0 (ref)
            if l_v66_4 == v190 then
                l_Easter_0.Visible = false;
            end;
        end);
    end);
    l_Easter_0.Visible = false;
end;
v66 = function(v191) --[[ Line: 609 ]] --[[ Name: hookHumanoid ]]
    -- upvalues: v18 (copy)
    local v192 = nil;
    v191.StateChanged:Connect(function(_, v194) --[[ Line: 611 ]]
        -- upvalues: v192 (ref), v18 (ref)
        if v194 == Enum.HumanoidStateType.Landed then
            if not v192 then
                return;
            else
                if os.clock() - v192 > 25 then
                    v18:FireServer("EasterBrokenEgg");
                end;
                v192 = nil;
                return;
            end;
        elseif v194 == Enum.HumanoidStateType.Freefall then
            v192 = os.clock();
            return;
        else
            v192 = nil;
            return;
        end;
    end);
end;
v59 = v24:GetHumanoid(l_LocalPlayer_0);
if v59 then
    v83 = nil;
    do
        local l_v83_3 = v83;
        v59.StateChanged:Connect(function(_, v197) --[[ Line: 611 ]]
            -- upvalues: l_v83_3 (ref), v18 (copy)
            if v197 == Enum.HumanoidStateType.Landed then
                if not l_v83_3 then
                    return;
                else
                    if os.clock() - l_v83_3 > 25 then
                        v18:FireServer("EasterBrokenEgg");
                    end;
                    l_v83_3 = nil;
                    return;
                end;
            elseif v197 == Enum.HumanoidStateType.Freefall then
                l_v83_3 = os.clock();
                return;
            else
                l_v83_3 = nil;
                return;
            end;
        end);
    end;
end;
l_LocalPlayer_0.CharacterAdded:Connect(function(v198) --[[ Line: 634 ]]
    -- upvalues: v18 (copy)
    local l_Humanoid_0 = v198:WaitForChild("Humanoid");
    if l_Humanoid_0 then
        local v200 = nil;
        do
            local l_v200_0 = v200;
            l_Humanoid_0.StateChanged:Connect(function(_, v203) --[[ Line: 611 ]]
                -- upvalues: l_v200_0 (ref), v18 (ref)
                if v203 == Enum.HumanoidStateType.Landed then
                    if not l_v200_0 then
                        return;
                    else
                        if os.clock() - l_v200_0 > 25 then
                            v18:FireServer("EasterBrokenEgg");
                        end;
                        l_v200_0 = nil;
                        return;
                    end;
                elseif v203 == Enum.HumanoidStateType.Freefall then
                    l_v200_0 = os.clock();
                    return;
                else
                    l_v200_0 = nil;
                    return;
                end;
            end);
        end;
    end;
end);
v18.Event("EasterEggFound"):Connect(v65);
v31:Bind(workspace.Event.Easter, function() --[[ Line: 646 ]]
    -- upvalues: v6 (copy)
    v6:Open("ChallengePass");
end);
return {};
ModuleScript: Dance
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v1 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v2 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v3 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v4 = require(l_ReplicatedStorage_0.Shared.Palette);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.PlayTransition);
local v6 = require(l_ReplicatedStorage_0.Client.PlayerControls);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.SetCoreGuiEnabled);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v10 = {};
local l_LocalPlayer_0 = game.Players.LocalPlayer;
local v12 = false;
v10.Main = function(_, v14) --[[ Line: 22 ]] --[[ Name: Main ]]
    -- upvalues: l_LocalPlayer_0 (copy), v12 (ref), v9 (copy), v8 (copy), v2 (copy), v3 (copy), v4 (copy), v1 (copy), v5 (copy), v6 (copy), v7 (copy)
    local l_RunService_0 = game:GetService("RunService");
    local l_UserInputService_0 = game:GetService("UserInputService");
    local _ = game:GetService("ReplicatedStorage");
    local v18 = require(script.BeatMap);
    local l_EasterDance_0 = l_LocalPlayer_0.PlayerGui:WaitForChild("EasterDance");
    local l_Frame_0 = l_EasterDance_0.Frame;
    local _ = l_Frame_0.HitZone;
    if not v12 then
        local function v22() --[[ Line: 34 ]] --[[ Name: updateFromInput ]]
            -- upvalues: v9 (ref), l_Frame_0 (copy), l_UserInputService_0 (copy)
            if v9.Mode == "Gamepad" then
                l_Frame_0.Buttons.ArrowDown.ImageLabel.Visible = true;
                l_Frame_0.Buttons.ArrowDown.ImageLabel.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.DPadDown);
                l_Frame_0.Buttons.ArrowDown.Text = "";
                l_Frame_0.Buttons.ArrowUp.ImageLabel.Visible = true;
                l_Frame_0.Buttons.ArrowUp.ImageLabel.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.DPadUp);
                l_Frame_0.Buttons.ArrowUp.Text = "";
                l_Frame_0.Buttons.ArrowLeft.ImageLabel.Visible = true;
                l_Frame_0.Buttons.ArrowLeft.ImageLabel.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.DPadLeft);
                l_Frame_0.Buttons.ArrowLeft.Text = "";
                l_Frame_0.Buttons.ArrowRight.ImageLabel.Visible = true;
                l_Frame_0.Buttons.ArrowRight.ImageLabel.Image = l_UserInputService_0:GetImageForKeyCode(Enum.KeyCode.DPadRight);
                l_Frame_0.Buttons.ArrowRight.Text = "";
                return;
            else
                l_Frame_0.Buttons.ArrowDown.ImageLabel.Visible = false;
                l_Frame_0.Buttons.ArrowDown.Text = "\226\134\147";
                l_Frame_0.Buttons.ArrowUp.ImageLabel.Visible = false;
                l_Frame_0.Buttons.ArrowUp.Text = "\226\134\145";
                l_Frame_0.Buttons.ArrowLeft.ImageLabel.Visible = false;
                l_Frame_0.Buttons.ArrowLeft.Text = "\226\134\144";
                l_Frame_0.Buttons.ArrowRight.ImageLabel.Visible = false;
                l_Frame_0.Buttons.ArrowRight.Text = "\226\134\146";
                return;
            end;
        end;
        v9.Changed:Connect(v22);
        v22();
        v12 = true;
    end;
    local v23 = 0;
    local v24 = {
        White = Color3.fromRGB(255, 255, 255), 
        Grey = Color3.fromRGB(100, 100, 100), 
        LightGrey = Color3.fromRGB(175, 175, 175), 
        DarkGrey = Color3.fromRGB(50, 50, 50), 
        Blue = Color3.fromRGB(0, 175, 255), 
        Green = Color3.fromRGB(0, 200, 100), 
        Yellow = Color3.fromRGB(220, 220, 0), 
        Orange = Color3.fromRGB(255, 127, 0), 
        Red = Color3.fromRGB(225, 75, 75), 
        BrightGreen = Color3.fromRGB(0, 255, 50), 
        BrightYellow = Color3.fromRGB(255, 255, 50), 
        BrightOrange = Color3.fromRGB(255, 135, 50), 
        BrightRed = Color3.fromRGB(255, 25, 25), 
        GreyRed = Color3.fromRGB(76, 25, 25), 
        Checkmark = Color3.fromRGB(50, 255, 50), 
        Completed = Color3.fromRGB(0, 255, 128), 
        X = Color3.fromRGB(255, 0, 0)
    };
    local function v38(v25, v26) --[[ Line: 96 ]] --[[ Name: lilNoteFunc ]]
        -- upvalues: v24 (copy), v23 (ref), l_EasterDance_0 (copy)
        v26 = v26 or {};
        local v27 = "Default";
        local v28 = v24[v26.Color or "White"];
        if v25:find("Error") or v28 == Color3.fromRGB(255, 50, 50) then
            v27 = "Error";
        elseif v28 == Color3.fromRGB(50, 255, 50) then
            v27 = "Success";
        end;
        v27 = v26.NoteType or v27;
        spawn(function() --[[ Line: 107 ]]
            -- upvalues: v23 (ref), v26 (ref), v25 (copy), v28 (copy), l_EasterDance_0 (ref)
            v23 = v23 + 1;
            local v29 = v23 % 50;
            local v30 = script.BaseLilNote:Clone();
            v30.Name = "LilNote";
            v30.FontFace = v26.Font and Font.fromName(v26.Font) or v30.FontFace;
            v30.Text = v25;
            v30.TextColor3 = v28 or Color3.fromRGB(255, 50, 50);
            v30.Visible = true;
            v30.ZIndex = v30.ZIndex + v29;
            v30.Parent = l_EasterDance_0;
            local v31 = v26.Time or 3.5;
            local v32 = 0;
            local function v36() --[[ Line: 120 ]] --[[ Name: alphaUpdated ]]
                -- upvalues: v30 (copy), v32 (ref), v26 (ref)
                if v30 then
                    local l_Value_0 = game.TweenService:GetValue(v32, Enum.EasingStyle.Cubic, Enum.EasingDirection.In);
                    local v34 = math.clamp(1.5 * l_Value_0 - 0.5, 0, 1);
                    local v35 = v26.Side == "Top" and l_Value_0 * 0.175 + 0.25 or l_Value_0 * -0.17499999999999993 + 0.825;
                    v30.Position = UDim2.new(0.5, 0, v35, 0);
                    v30.TextTransparency = v34;
                    v30.UIStroke.Transparency = v34;
                end;
            end;
            v36();
            while v32 < 1 do
                local v37 = game["Run Service"].Heartbeat:Wait() / v31;
                v32 = v32 + v37;
                v36();
            end;
            if v30 then
                v30:Destroy();
            end;
        end);
    end;
    local function v41(v39, v40) --[[ Line: 141 ]] --[[ Name: scaleUDim2 ]]
        if typeof(v40) == "Vector2" then
            return UDim2.new(v39.X.Scale * v40.X, v39.X.Offset * v40.X, v39.Y.Scale * v40.Y, v39.Y.Offset * v40.Y);
        else
            return UDim2.new(v39.X.Scale * v40, v39.X.Offset * v40, v39.Y.Scale * v40, v39.Y.Offset * v40);
        end;
    end;
    local v42 = {
        W = l_Frame_0.ArrowUp, 
        A = l_Frame_0.ArrowLeft, 
        S = l_Frame_0.ArrowDown, 
        D = l_Frame_0.ArrowRight
    };
    local v43 = {
        W = l_Frame_0.Buttons.ArrowUp, 
        A = l_Frame_0.Buttons.ArrowLeft, 
        S = l_Frame_0.Buttons.ArrowDown, 
        D = l_Frame_0.Buttons.ArrowRight
    };
    local v44 = {
        "W", 
        "A", 
        "S", 
        "D"
    };
    local l_Scale_0 = l_Frame_0.Buttons.ArrowDown.Position.Y.Scale;
    local v46 = {};
    local v47 = false;
    local v48 = 1;
    local v49 = 0;
    local v50 = 0;
    local l_DanceTrack_0 = script.DanceTrack;
    local function v55() --[[ Line: 185 ]] --[[ Name: spawnArrow ]]
        -- upvalues: v44 (copy), v42 (copy), v48 (ref), l_Frame_0 (copy), v46 (copy)
        local v52 = v44[math.random(1, #v44)];
        local v53 = v42[v52];
        if not v53 then
            return;
        else
            local v54 = v53:Clone();
            v54.Visible = true;
            v54.Position = UDim2.new(v53.Position.X.Scale, v53.Position.X.Offset, -0.5, 0);
            v54:SetAttribute("BeatIndex", v48);
            v54:SetAttribute("KeyTitle", v52);
            v54.Parent = l_Frame_0;
            v54:AddTag("DanceArrow");
            table.insert(v46, {
                Arrow = v54, 
                Key = v52
            });
            return;
        end;
    end;
    local function _(v56, v57, v58) --[[ Line: 201 ]] --[[ Name: lerp ]]
        return v56 + (v57 - v56) * v58;
    end;
    local function v94() --[[ Line: 205 ]] --[[ Name: startDanceMinigame ]]
        -- upvalues: v47 (ref), v48 (ref), v49 (ref), l_EasterDance_0 (copy), v41 (copy), l_RunService_0 (copy), l_DanceTrack_0 (copy), v18 (copy), v55 (copy), v50 (ref), v38 (copy), v8 (ref), l_Scale_0 (copy), l_Frame_0 (copy), l_UserInputService_0 (copy), v43 (copy), v46 (copy), v2 (ref), v3 (ref), v4 (ref), v1 (ref), v5 (ref), l_LocalPlayer_0 (ref), v6 (ref), v7 (ref), v14 (copy)
        if v47 then
            return;
        else
            v47 = true;
            v48 = 1;
            v49 = tick();
            l_EasterDance_0.Enabled = true;
            l_EasterDance_0.Frame.Points.Text = "0 Points";
            local function _(v60) --[[ Line: 213 ]] --[[ Name: arrowHitDestroy ]]
                -- upvalues: v41 (ref), l_RunService_0 (ref)
                local v61 = 0;
                v60:RemoveTag("DanceArrow");
                spawn(function() --[[ Line: 216 ]]
                    -- upvalues: v60 (copy), v61 (ref), v41 (ref), l_RunService_0 (ref)
                    v60.Text = "";
                    local v62 = v60:GetAttribute("BaseSize") or v60.Size;
                    while v61 < 1 and v60 do
                        v60.BackgroundTransparency = v61;
                        v60.Size = v41(v62, v61 ^ 0.5 + 1);
                        v61 = v61 + l_RunService_0.Heartbeat:Wait() / 0.75;
                    end;
                    if v60 then
                        v60:Destroy();
                    end;
                end);
            end;
            local function v65() --[[ Line: 234 ]] --[[ Name: updateBeatSync ]]
                -- upvalues: v47 (ref), l_DanceTrack_0 (ref), v18 (ref), v48 (ref), v55 (ref)
                if not v47 then
                    return;
                else
                    local l_TimePosition_0 = l_DanceTrack_0.TimePosition;
                    while v18[v48] and v18[v48] - 3 <= l_TimePosition_0 do
                        v55();
                        v48 = v48 + 1;
                    end;
                    return;
                end;
            end;
            local function v77(v66) --[[ Line: 245 ]] --[[ Name: onInput ]]
                -- upvalues: l_DanceTrack_0 (ref), v18 (ref), v50 (ref), l_EasterDance_0 (ref), v38 (ref), v41 (ref), l_RunService_0 (ref), v8 (ref)
                if v66 == Enum.KeyCode.DPadUp.Name then
                    v66 = "W";
                elseif v66 == Enum.KeyCode.DPadLeft.Name then
                    v66 = "A";
                elseif v66 == Enum.KeyCode.DPadDown.Name then
                    v66 = "S";
                elseif v66 == Enum.KeyCode.DPadRight.Name then
                    v66 = "D";
                end;
                local v67 = 0;
                local v68 = nil;
                local l_TimePosition_1 = l_DanceTrack_0.TimePosition;
                for _, v71 in pairs(game.CollectionService:GetTagged("DanceArrow")) do
                    if v71:GetAttribute("KeyTitle") == v66 then
                        local v72 = 0.35 * (l_TimePosition_1 - v18[v71:GetAttribute("BeatIndex")]) + 1;
                        if v67 < v72 then
                            v67 = v72;
                            v68 = v71;
                        end;
                    end;
                end;
                if v68 and math.abs(v67 - 1) < 0.1 then
                    v50 = v50 + 1;
                    l_EasterDance_0.Frame.Points.Text = ("%* Point%*"):format(v50, v50 == 1 and "" or "s");
                    v38("Nice!", {
                        Color = "Green", 
                        Time = 1
                    });
                    local l_v68_0 = v68;
                    local v74 = 0;
                    l_v68_0:RemoveTag("DanceArrow");
                    do
                        local l_v74_0 = v74;
                        spawn(function() --[[ Line: 216 ]]
                            -- upvalues: l_v68_0 (copy), l_v74_0 (ref), v41 (ref), l_RunService_0 (ref)
                            l_v68_0.Text = "";
                            local v76 = l_v68_0:GetAttribute("BaseSize") or l_v68_0.Size;
                            while l_v74_0 < 1 and l_v68_0 do
                                l_v68_0.BackgroundTransparency = l_v74_0;
                                l_v68_0.Size = v41(v76, l_v74_0 ^ 0.5 + 1);
                                l_v74_0 = l_v74_0 + l_RunService_0.Heartbeat:Wait() / 0.75;
                            end;
                            if l_v68_0 then
                                l_v68_0:Destroy();
                            end;
                        end);
                    end;
                    v8("NoteHit");
                end;
            end;
            local function v83(_) --[[ Line: 284 ]] --[[ Name: updateArrows ]]
                -- upvalues: l_DanceTrack_0 (ref), v18 (ref), l_Scale_0 (ref)
                local l_TimePosition_2 = l_DanceTrack_0.TimePosition;
                for _, v81 in pairs(game.CollectionService:GetTagged("DanceArrow")) do
                    local v82 = 0.35 * (l_TimePosition_2 - v18[v81:GetAttribute("BeatIndex")]) + 1;
                    v81.Position = UDim2.new(v81.Position.X.Scale, v81.Position.X.Offset, -0.2 + (l_Scale_0 - -0.2) * v82, 0);
                    if v82 > 1.25 then
                        v81:Destroy();
                    end;
                end;
            end;
            l_Frame_0.Visible = true;
            v50 = 0;
            l_DanceTrack_0:Play();
            l_UserInputService_0.InputBegan:Connect(function(v84, v85) --[[ Line: 304 ]]
                -- upvalues: v47 (ref), v77 (copy)
                if v85 or not v47 then
                    return;
                else
                    local l_Name_0 = v84.KeyCode.Name;
                    v77(l_Name_0);
                    return;
                end;
            end);
            for v87, v88 in pairs(v43) do
                v88.Activated:Connect(function() --[[ Line: 310 ]]
                    -- upvalues: v8 (ref), v77 (copy), v87 (copy)
                    v8("ButtonPress");
                    v77(v87);
                end);
            end;
            local function v91() --[[ Line: 316 ]] --[[ Name: stopDanceMinigame ]]
                -- upvalues: v47 (ref), l_DanceTrack_0 (ref), v46 (ref), v50 (ref), v2 (ref), v3 (ref), v4 (ref), v1 (ref), l_EasterDance_0 (ref), l_Frame_0 (ref), v5 (ref), l_LocalPlayer_0 (ref), v6 (ref), v7 (ref), v14 (ref)
                v47 = false;
                if l_DanceTrack_0 then
                    l_DanceTrack_0:Stop();
                end;
                for _, v90 in ipairs(v46) do
                    v90.Arrow:Destroy();
                end;
                table.clear(v46);
                if v50 < 40 then
                    v2(v3.autoColor("Better luck next time...", v4.Color.Red));
                end;
                v1:FireServer("EggDanceFinish");
                l_EasterDance_0.Enabled = false;
                l_Frame_0.Visible = false;
                v5("Returning...", function() --[[ Line: 337 ]]
                    -- upvalues: l_LocalPlayer_0 (ref), v6 (ref), v7 (ref), v14 (ref)
                    l_LocalPlayer_0.PlayerGui.ScreenGui.HUD.Visible = true;
                    v6:Enable();
                    v6:EnableMaster();
                    v7(true);
                    v14();
                end);
            end;
            local v92 = nil;
            v92 = l_RunService_0.Heartbeat:Connect(function(_) --[[ Line: 347 ]]
                -- upvalues: l_DanceTrack_0 (ref), v91 (copy), v47 (ref), v92 (ref), v83 (copy), v65 (copy)
                if not l_DanceTrack_0.Playing then
                    v91();
                end;
                if not v47 then
                    v92:Disconnect();
                    v92 = nil;
                    return;
                else
                    v83();
                    v65();
                    return;
                end;
            end);
            return;
        end;
    end;
    spawn(function() --[[ Line: 358 ]]
        -- upvalues: v1 (ref)
        wait(0.5);
        v1:FireServer("EggDanceStart");
    end);
    v94();
    local function _() --[[ Line: 365 ]] --[[ Name: createBeatMap ]]
        local l_DanceTrack_1 = workspace.DanceTrack;
        local l_RunService_1 = game:GetService("RunService");
        local v97 = {};
        local v98 = 0;
        local v99 = 0;
        l_DanceTrack_1:Play();
        local v100 = tick();
        l_RunService_1.Heartbeat:Connect(function() --[[ Line: 377 ]]
            -- upvalues: l_DanceTrack_1 (copy), v100 (copy), v98 (ref), v99 (ref), v97 (copy)
            if not l_DanceTrack_1.IsPlaying then
                return;
            else
                local v101 = tick() - v100;
                local l_PlaybackLoudness_0 = l_DanceTrack_1.PlaybackLoudness;
                if l_PlaybackLoudness_0 - v98 > 50 and l_PlaybackLoudness_0 > 50 and v99 < v101 then
                    table.insert(v97, math.floor(v101 * 100) / 100);
                    print("Beat at", v101);
                    v99 = v101 + 0.75;
                end;
                v98 = l_PlaybackLoudness_0;
                return;
            end;
        end);
        task.delay(l_DanceTrack_1.TimeLength + 1, function() --[[ Line: 394 ]]
            -- upvalues: l_DanceTrack_1 (copy), v97 (copy)
            l_DanceTrack_1:Stop();
            print(game:GetService("HttpService"):JSONEncode(v97));
        end);
    end;
end;
return v10;
ModuleScript: BeatMap
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

return {
    3.54, 
    4.39, 
    5.21, 
    6.16, 
    7.09, 
    7.92, 
    8.76, 
    9.59, 
    10.41, 
    11.24, 
    12.19, 
    13.12, 
    13.96, 
    15.01, 
    16.24, 
    17.07, 
    17.91, 
    18.76, 
    19.56, 
    20.42, 
    21.26, 
    22.09, 
    22.91, 
    23.76, 
    24.59, 
    25.42, 
    26.29, 
    27.19, 
    28.12, 
    28.87, 
    29.79, 
    30.62, 
    31.46, 
    32.29, 
    33.14, 
    33.89, 
    34.81, 
    35.64, 
    36.47, 
    37.29, 
    38.12, 
    38.96, 
    39.82, 
    40.96, 
    41.89, 
    42.96, 
    43.89, 
    44.82, 
    46.09, 
    46.89, 
    47.96, 
    49.42, 
    50.22, 
    51.29, 
    52.09, 
    52.92
};
ModuleScript: Enchants
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v2 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v4 = require(l_ReplicatedStorage_0.Shared.Constants);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v6 = require(l_ReplicatedStorage_0.Shared.Palette);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v8 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v10 = require(l_ReplicatedStorage_0.Shared.Data.Enchants);
local v11 = require(l_ReplicatedStorage_0.Shared.Utils.EnchantUtil);
local v12 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatPercent);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatRomanNumeral);
local v14 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v15 = require(l_ReplicatedStorage_0.Shared.Data.Flavors);
local v16 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local v17 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.PetUtil);
local v18 = require(l_ReplicatedStorage_0.Client.Gui.PetEntryAppearance);
local v19 = require(l_ReplicatedStorage_0.Client.Gui.Frames.PetChoosePrompt);
local v20 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v21 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v22 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v23 = require(l_ReplicatedStorage_0.Shared.Data.Pets);
local v24 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v25 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Utils.CheckInventorySpace);
local v27 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v28 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v29 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v30 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_Frame_0 = l_ScreenGui_0.Enchants.Frame;
local l_Details_0 = l_Frame_0.Inner.Details;
l_Details_0.Main.Stats.Bubbles.Icon.Image = v15["Bubble Gum"].Image;
l_Details_0.Main.Stats.Bubbles.Amount.TextColor3 = v15["Bubble Gum"].Color;
l_Details_0.Main.Stats.Gems.Icon.Image = v16.Gems.Image;
l_Details_0.Main.Stats.Gems.Amount.TextColor3 = v16.Gems.Color;
local function v38() --[[ Line: 51 ]] --[[ Name: updateStatSizes ]]
    -- upvalues: l_Details_0 (copy), l_UIScale_0 (copy)
    local v35 = math.ceil(l_Details_0.Main.Stats.Bubbles.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    local v36 = math.ceil(l_Details_0.Main.Stats.Currency.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    local v37 = math.ceil(l_Details_0.Main.Stats.Gems.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_Details_0.Main.Stats.Bubbles.Amount.Size = UDim2.new(0, v35, 1, 0);
    l_Details_0.Main.Stats.Currency.Amount.Size = UDim2.new(0, v36, 1, 0);
    l_Details_0.Main.Stats.Gems.Amount.Size = UDim2.new(0, v37, 1, 0);
end;
l_Details_0.Main.Stats.Bubbles.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v38);
l_Details_0.Main.Stats.Currency.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v38);
l_Details_0.Main.Stats.Gems.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v38);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v38);
v38();
v38 = function() --[[ Line: 67 ]] --[[ Name: playSound ]]
    -- upvalues: v30 (copy)
    task.spawn(function() --[[ Line: 68 ]]
        -- upvalues: v30 (ref)
        for _ = 1, 2 do
            v30("Upgrade");
            task.wait(0.15 + math.random() / 10);
        end;
    end);
    v30("EnchantDiscover");
end;
local v40 = nil;
local v41 = nil;
local v42 = nil;
local v43 = nil;
local v44 = nil;
local function _() --[[ Line: 99 ]] --[[ Name: isAutoActive ]]
    -- upvalues: v43 (ref)
    return v43 ~= nil;
end;
local function v46() --[[ Line: 103 ]] --[[ Name: stopAuto ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
end;
local v47 = 0;
local function _() --[[ Line: 119 ]] --[[ Name: isOnCooldown ]]
    -- upvalues: v47 (ref), v4 (copy)
    return os.clock() - v47 < v4.EnchantRerollCooldown;
end;
local function _() --[[ Line: 124 ]] --[[ Name: setCooldown ]]
    -- upvalues: v47 (ref)
    v47 = os.clock();
end;
local l_Main_0 = l_Frame_0.Inner.Main;
local l_ScrollingFrame_0 = l_Main_0.ScrollingFrame;
local l_Template_0 = l_ScrollingFrame_0.Template;
l_Template_0.Parent = nil;
l_ScrollingFrame_0.TemplateNotFound.Parent = nil;
local v53 = {};
for v54, v55 in v10 do
    for v56 = 1, v55.Levels do
        local l_v11_Identifier_0 = v11:GetIdentifier(v54, v56);
        local v58 = l_Template_0:Clone();
        v58.Name = l_v11_Identifier_0;
        v5(v58.Buttons.Reroll.Button, v6.Button.Purple);
        v7(v58.Buttons.Reroll.Button, function() --[[ Line: 149 ]]
            -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref), v2 (copy), v40 (ref), v23 (copy), v4 (copy), v27 (copy), v29 (copy), v28 (copy), v54 (copy), v56 (copy), v21 (copy), v46 (copy), v11 (copy), v10 (copy), v25 (copy), v5 (copy), v6 (copy), v7 (copy)
            if v43 ~= nil then
                v43 = nil;
                if v44 and v44 ~= coroutine.running() then
                    task.cancel(v44);
                end;
                v44 = nil;
                v41();
                v42();
            end;
            local v59 = v2:Get();
            if not v40 or not v59 then
                return;
            else
                local v60 = nil;
                for _, v62 in v59.Pets do
                    if v62.Id == v40 then
                        v60 = v62;
                        break;
                    end;
                end;
                if not v60 then
                    return;
                else
                    local v63 = v23[v60.Name];
                    local l_Rarity_0 = v63.Rarity;
                    if l_Rarity_0 == "Legendary" and (v63.Tier or 1) == 1 then
                        l_Rarity_0 = "EasyLegendary";
                    end;
                    local v65 = {
                        Type = "Currency", 
                        Currency = "Gems", 
                        Amount = v4.EnchantsRerollAllGemCosts[l_Rarity_0]
                    };
                    if not v27:CanAfford(v59, v65) then
                        local v67 = v29.fromNotEnough(v59, v65, function(v66) --[[ Line: 182 ]]
                            return (("You need %* to reroll enchants!"):format(v66));
                        end);
                        return v28(v67:Build());
                    else
                        local function v79() --[[ Line: 188 ]] --[[ Name: start ]]
                            -- upvalues: v43 (ref), v54 (ref), v56 (ref), v44 (ref), v40 (ref), v4 (ref), v21 (ref), v46 (ref), v2 (ref), v27 (ref), v65 (copy), v29 (ref), v59 (copy), v28 (ref), v42 (ref), v41 (ref)
                            v43 = {
                                Type = "Specific", 
                                Id = v54, 
                                MinLevel = v56
                            };
                            v44 = task.spawn(function() --[[ Line: 194 ]]
                                -- upvalues: v40 (ref), v4 (ref), v21 (ref), v46 (ref), v54 (ref), v56 (ref), v2 (ref), v27 (ref), v65 (ref), v29 (ref), v59 (ref), v28 (ref)
                                local l_v40_0 = v40;
                                local _ = nil;
                                while true do
                                    local v70 = os.clock() + v4.EnchantRerollCooldown;
                                    local v71, v72 = v21:InvokeServer("RerollEnchants", l_v40_0);
                                    if not v71 or not v72 then
                                        return v46();
                                    else
                                        l_v40_0 = v71;
                                        for _, v74 in v72 do
                                            if v74.Id == v54 and v74.Level >= v56 then
                                                return v46();
                                            end;
                                        end;
                                        local v75 = os.clock();
                                        if v75 < v70 then
                                            task.wait(v70 - v75);
                                        end;
                                        local v76 = v2:Get();
                                        if not v27:CanAfford(v76, v65) then
                                            local v78 = v29.fromNotEnough(v59, v65, function(v77) --[[ Line: 221 ]]
                                                return (("You need %* to reroll enchants!"):format(v77));
                                            end);
                                            v28(v78:Build());
                                            return v46();
                                        end;
                                    end;
                                end;
                            end);
                            v42();
                            v41();
                        end;
                        local l_v11_FullTitle_0 = v11:GetFullTitle(v54, v56, true);
                        local v81 = v10[v54];
                        local v86 = v29.new("Are you sure?"):Text((("This will auto-reroll enchants until %* or higher!"):format((v25.autoColor(l_v11_FullTitle_0, v81.Color))))):Button(function(v82, v83) --[[ Line: 239 ]]
                            -- upvalues: v5 (ref), v6 (ref), v7 (ref), v79 (copy)
                            v82.Label.Text = "Reroll";
                            v5(v82, v6.Button.Pink);
                            v7(v82, function() --[[ Line: 242 ]]
                                -- upvalues: v79 (ref), v83 (copy)
                                v79();
                                v83();
                            end);
                        end):Button(function(v84, v85) --[[ Line: 247 ]]
                            -- upvalues: v5 (ref), v6 (ref), v7 (ref)
                            v84.Label.Text = "Close";
                            v5(v84, v6.Button.Red);
                            v7(v84, v85);
                        end);
                        v28(v86:Build());
                        return;
                    end;
                end;
            end;
        end);
        v58.Parent = l_ScrollingFrame_0;
        v53[l_v11_Identifier_0] = v58;
    end;
end;
v8(l_ScrollingFrame_0, l_ScrollingFrame_0.UIListLayout);
local v87 = {};
for v88, v89 in v10 do
    for v90 = 1, v89.Levels do
        table.insert(v87, {
            Id = v88, 
            Level = v90
        });
    end;
end;
v21.Event("DiscoveredEnchants"):Connect(function(v91) --[[ Line: 279 ]]
    -- upvalues: v9 (copy), v10 (copy), v11 (copy), v24 (copy), v25 (copy)
    if not v9:IsOpen("Enchants") then
        return;
    else
        for _, v93 in v91 do
            local v94 = v10[v93.Id];
            local l_v11_FullTitle_1 = v11:GetFullTitle(v93.Id, v93.Level, true);
            v24((("%* enchant discovered!"):format((v25.autoColor(l_v11_FullTitle_1, v94.Color)))));
        end;
        return;
    end;
end);
v21.Event("RerollOrbSaved"):Connect(function() --[[ Line: 293 ]]
    -- upvalues: v24 (copy), v25 (copy), v6 (copy)
    v24((("Saved a %* using mastery!"):format((v25.autoColor("Reroll Orb", v6.Text.Yellow)))));
end);
v5(l_Details_0.Main.CancelAuto.Button, v6.Button.Red);
v7(l_Details_0.Main.CancelAuto.Button, function() --[[ Line: 303 ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
end);
v5(l_Main_0.Auto.Cancel.Button, v6.Button.Red);
v7(l_Main_0.Auto.Cancel.Button, function() --[[ Line: 310 ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
end);
v41 = function() --[[ Line: 318 ]] --[[ Name: updateIndex ]]
    -- upvalues: v2 (copy), v40 (ref), l_ScrollingFrame_0 (copy), l_Main_0 (copy), v43 (ref), v11 (copy), v10 (copy), v25 (copy), v87 (copy), v53 (copy), v22 (copy), v12 (copy)
    local v96 = v2:Get();
    local v97 = if v96 then v96.DiscoveredEnchants else {};
    local v98 = nil;
    if v40 and v96 then
        for _, v100 in v96.Pets do
            if v100.Id == v40 then
                v98 = v100;
                break;
            end;
        end;
    end;
    if not v98 or not v96 then
        l_ScrollingFrame_0.Visible = false;
        l_Main_0.Auto.Visible = false;
        l_Main_0.Title.Visible = false;
        l_Main_0.NoSelection.Visible = true;
        return;
    elseif v43 ~= nil then
        l_ScrollingFrame_0.Visible = false;
        l_Main_0.Title.Visible = false;
        l_Main_0.NoSelection.Visible = false;
        if v43.Type == "Max" then
            l_Main_0.Auto.AutoRoll.Visible = true;
            l_Main_0.Auto.AutoEnchant.Visible = false;
        else
            l_Main_0.Auto.AutoRoll.Visible = false;
            l_Main_0.Auto.AutoEnchant.Visible = true;
            local l_v11_FullTitle_2 = v11:GetFullTitle(v43.Id, v43.MinLevel, true);
            local v102 = v10[v43.Id];
            l_Main_0.Auto.AutoEnchant.Text = ("Rerolling until %* or higher!"):format((v25.autoColor(l_v11_FullTitle_2, v102.Color)));
        end;
        l_Main_0.Auto.Visible = true;
        return;
    else
        l_ScrollingFrame_0.Visible = true;
        l_Main_0.Auto.Visible = false;
        l_Main_0.Title.Visible = true;
        l_Main_0.NoSelection.Visible = false;
        local l_v11_PossibleEnchants_0 = v11:GetPossibleEnchants(v96, v98.Name);
        local v104 = 0;
        for _, v106 in l_v11_PossibleEnchants_0 do
            v104 = v104 + v10[v106].Levels;
        end;
        local v107 = 0;
        for _, v109 in l_v11_PossibleEnchants_0 do
            v107 = v107 + #(v97[v109] or {});
        end;
        v107 = math.min(v107, v104);
        l_Main_0.Title.Text = ("Discovered Enchants (%*/%*)"):format(v107, v104);
        local v110 = false;
        for _, v112 in v96.MasteryUpgrades do
            if v112.Type == "AutoEnchant" then
                v110 = true;
                break;
            end;
        end;
        for v113, v114 in v87 do
            local l_Id_0 = v114.Id;
            local l_Level_0 = v114.Level;
            local v117 = v10[l_Id_0];
            local v118 = v53[v11:GetIdentifier(l_Id_0, l_Level_0)];
            local v119 = false;
            if v97[l_Id_0] ~= nil then
                v119 = table.find(v97[l_Id_0], l_Level_0) ~= nil;
            end;
            local v120 = table.find(l_v11_PossibleEnchants_0, l_Id_0) ~= nil;
            local l_v11_FullTitle_3 = v11:GetFullTitle(l_Id_0, l_Level_0);
            v118.Main.Title.TextColor3 = v119 and v117.Color or Color3.new(1, 1, 1);
            v118.Main.Title.Text = if v119 then l_v11_FullTitle_3 else "?????";
            local v122 = "??????????";
            if v119 then
                v122 = v11:GetDescription(l_Id_0, l_Level_0);
                if l_Id_0 == "high-roller" or l_Id_0 == "infinity" then
                    v122 = string.gsub(v122, "DURATION", v22(v117.Metadata));
                end;
            end;
            v118.Main.Description.Text = v122;
            local l_v11_Chance_0 = v11:GetChance(v96, l_Id_0, l_Level_0, v98.Name);
            v118.Main.Chance.Amount.Text = if v119 then v12(100 * l_v11_Chance_0) else "???";
            v118.BackgroundTransparency = v119 and 0.5 or 0.75;
            v118.UIStroke.Transparency = v119 and 0 or 0.75;
            v118.Main.Title.UIStroke.Transparency = v119 and 0 or 0.75;
            v118.Main.Description.UIStroke.Transparency = v119 and 0 or 0.75;
            v118.Main.Chance.Amount.UIStroke.Transparency = v119 and 0 or 0.75;
            v118.Main.Chance.Label.UIStroke.Transparency = v119 and 0 or 0.75;
            v118.Main.Title.TextTransparency = v119 and 0 or 0.25;
            v118.Main.Description.TextTransparency = v119 and 0 or 0.25;
            v118.Main.Chance.Amount.TextTransparency = v119 and 0 or 0.25;
            v118.Main.Chance.Label.TextTransparency = v119 and 0 or 0.25;
            local v124 = 0;
            if v97[l_Id_0] then
                for _, v126 in v97[l_Id_0] do
                    v124 = math.max(v124, v126);
                end;
            end;
            if l_Level_0 ~= v124 or not v110 then
                v118.Buttons.Visible = false;
                v118.Size = UDim2.new(1, 0, 0, 85);
            else
                v118.Buttons.Visible = true;
                v118.Size = UDim2.new(1, 0, 0, 130);
            end;
            v118.LayoutOrder = v113 + (v119 and 0 or 999);
            v118.Visible = v120;
        end;
        return;
    end;
end;
v2:ConnectDataChanged("DiscoveredEnchants", v41);
v41();
local function v130() --[[ Line: 453 ]] --[[ Name: updateTop ]]
    -- upvalues: v2 (copy), l_Frame_0 (copy), v14 (copy)
    local v127 = v2:Get();
    local v128 = if v127 then v127.Gems else 0;
    local v129 = v127 and v127.Powerups["Reroll Orb"] or 0;
    l_Frame_0.Tray.Gems.Amount.Label.Text = v14(v128, 10000);
    l_Frame_0.Tray.Orbs.Amount.Label.Text = v14(v129, 10000);
    l_Frame_0.Tray.Orbs.Visible = v129 > 0;
end;
local function v132() --[[ Line: 462 ]] --[[ Name: updateGemsSize ]]
    -- upvalues: l_Frame_0 (copy), l_UIScale_0 (copy)
    local v131 = math.ceil(l_Frame_0.Tray.Gems.Amount.Label.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_Frame_0.Tray.Gems.Amount.Label.Size = UDim2.new(0, v131, 1, 0);
    l_Frame_0.Tray.Gems.Size = UDim2.new(0, v131 + 130, 1, 0);
end;
l_Frame_0.Tray.Gems.Amount.Label:GetPropertyChangedSignal("TextBounds"):Connect(v132);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v132);
v132();
local function v134() --[[ Line: 472 ]] --[[ Name: updateOrbsSize ]]
    -- upvalues: l_Frame_0 (copy)
    local v133 = math.ceil(l_Frame_0.Tray.Orbs.Amount.Label.TextBounds.X) + 1;
    l_Frame_0.Tray.Orbs.Amount.Label.Size = UDim2.new(0, v133, 1, 0);
    l_Frame_0.Tray.Orbs.Size = UDim2.new(0, v133 + 130, 1, 0);
end;
l_Frame_0.Tray.Orbs.Amount.Label:GetPropertyChangedSignal("TextBounds"):Connect(v134);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v134);
v134();
v2:ConnectDataChanged({
    "Gems", 
    "Powerups"
}, v130);
v130();
local function v152(v135, v136) --[[ Line: 488 ]] --[[ Name: safeReroll ]]
    -- upvalues: v2 (copy), v40 (ref), v10 (copy), v11 (copy), v29 (copy), v25 (copy), v5 (copy), v6 (copy), v7 (copy), v28 (copy)
    local v137 = v2:Get();
    if not v137 or not v40 then
        return v135();
    else
        local v138 = nil;
        for _, v140 in v137.Pets do
            if v140.Id == v40 then
                v138 = v140;
                break;
            end;
        end;
        if not v138 or not v138.Enchants then
            return v135();
        else
            local v141 = nil;
            local v142 = nil;
            for v143, v144 in v138.Enchants do
                if (not v136 or v143 == v136) and (v144.Level == 5 or v10[v144.Id].Special == true) then
                    v142 = v144.Level;
                    v141 = v144.Id;
                    break;
                end;
            end;
            if not v141 then
                return v135();
            else
                local v145 = v10[v141];
                local l_v11_FullTitle_4 = v11:GetFullTitle(v141, v142, true);
                local v151 = v29.new("Reroll?"):Text((("Are you sure you want to reroll your %* Enchant?"):format((v25.autoColor(l_v11_FullTitle_4, v145.Color))))):Button(function(v147, v148) --[[ Line: 528 ]]
                    -- upvalues: v5 (ref), v6 (ref), v7 (ref), v135 (copy)
                    v147.Label.Text = "Reroll";
                    v5(v147, v6.Button.Pink);
                    v7(v147, function() --[[ Line: 531 ]]
                        -- upvalues: v135 (ref), v148 (copy)
                        v135();
                        v148();
                    end);
                end):Button(function(v149, v150) --[[ Line: 536 ]]
                    -- upvalues: v5 (ref), v6 (ref), v7 (ref)
                    v149.Label.Text = "Close";
                    v5(v149, v6.Button.Red);
                    v7(v149, v150);
                end);
                v28(v151:Build());
                return;
            end;
        end;
    end;
end;
local l_Template_1 = l_Details_0.Main.Enchants.Template;
l_Template_1.Parent = nil;
local l_TemplateEmpty_0 = l_Details_0.Main.Enchants.TemplateEmpty;
l_TemplateEmpty_0.Parent = nil;
local v155 = {};
for v156 = 1, 2 do
    local v157 = l_TemplateEmpty_0:Clone();
    v157.Name = ("EmptySlot%*"):format(v156);
    v157.LayoutOrder = v156;
    v157.Visible = false;
    v157.Parent = l_Details_0.Main.Enchants;
    v155[v156] = v157;
end;
local v158 = {};
for v159 = 1, 2 do
    local v160 = l_Template_1:Clone();
    v160.Name = ("Enchant%*"):format(v159);
    v160.LayoutOrder = v159;
    v5(v160.Reroll.Button, v6.Button.Default);
    v7(v160.Reroll.Button, function() --[[ Line: 578 ]]
        -- upvalues: v47 (ref), v4 (copy), v2 (copy), v40 (ref), v27 (copy), v29 (copy), v28 (copy), v26 (copy), v152 (copy), v30 (copy), v21 (copy), v159 (copy)
        if os.clock() - v47 < v4.EnchantRerollCooldown then
            return;
        else
            local v161 = v2:Get();
            if not v161 or not v40 then
                return;
            else
                local l_EnchantsRerollOneCost_0 = v4.EnchantsRerollOneCost;
                if not v27:CanAfford(v161, l_EnchantsRerollOneCost_0) then
                    local v164 = v29.fromNotEnough(v161, l_EnchantsRerollOneCost_0, function(v163) --[[ Line: 590 ]]
                        return (("You need %* to reroll an individual enchant!"):format(v163));
                    end);
                    return v28(v164:Build());
                elseif not v26(v161) then
                    return;
                else
                    v152(function() --[[ Line: 600 ]]
                        -- upvalues: v30 (ref), v47 (ref), v21 (ref), v40 (ref), v159 (ref)
                        task.spawn(function() --[[ Line: 68 ]]
                            -- upvalues: v30 (ref)
                            for _ = 1, 2 do
                                v30("Upgrade");
                                task.wait(0.15 + math.random() / 10);
                            end;
                        end);
                        v30("EnchantDiscover");
                        v47 = os.clock();
                        v21:FireServer("RerollEnchant", v40, v159);
                    end, v159);
                    return;
                end;
            end;
        end;
    end);
    v160.Parent = l_Details_0.Main.Enchants;
    v158[v159] = v160;
end;
local l_Button_0 = l_Details_0.Main.Buttons.RerollAll.Button;
local function _(v167) --[[ Line: 618 ]] --[[ Name: fmtMult ]]
    -- upvalues: v14 (copy)
    if v167 >= 10 then
        return v14(v167);
    else
        return string.format("%0.1f", v167):gsub("0+$", ""):gsub("%.$", "");
    end;
end;
v42 = function() --[[ Line: 626 ]] --[[ Name: updateDetails ]]
    -- upvalues: v2 (copy), v40 (ref), l_Details_0 (copy), v18 (copy), v17 (copy), v16 (copy), v14 (copy), v158 (copy), v10 (copy), v11 (copy), v22 (copy), v27 (copy), v4 (copy), v43 (ref), v155 (copy), l_Button_0 (copy), v23 (copy)
    local v169 = v2:Get();
    if not v169 then
        return;
    else
        local v170 = nil;
        for _, v172 in v169.Pets do
            if v172.Id == v40 then
                v170 = v172;
                break;
            end;
        end;
        if not v170 then
            l_Details_0.NoSelection.Visible = true;
            l_Details_0.Main.Visible = false;
        else
            l_Details_0.NoSelection.Visible = false;
            l_Details_0.Main.Visible = true;
            v18.set(l_Details_0.Main.Icon, v170, false, false);
            l_Details_0.Main.PetName.Text = v170.Name;
            local l_v17_Stats_0 = v17:GetStats(v170, v169);
            local v174 = l_v17_Stats_0.Bubbles or 0;
            local v175 = l_v17_Stats_0.Gems or 0;
            local v176 = "Coins";
            local v177 = nil;
            for v178 in v16 do
                if l_v17_Stats_0[v178] and v178 ~= "Gems" and v178 ~= "Bubbles" then
                    v176 = v178;
                    break;
                end;
            end;
            v177 = l_v17_Stats_0[v176] or 0;
            l_Details_0.Main.Stats.Bubbles.Amount.Text = ("+%*"):format((v14(v174)));
            l_Details_0.Main.Stats.Gems.Amount.Text = ("x%*"):format(if v175 >= 10 then v14(v175) else string.format("%0.1f", v175):gsub("0+$", ""):gsub("%.$", ""));
            local l_Amount_0 = l_Details_0.Main.Stats.Currency.Amount;
            local v180 = "x%*";
            local l_v177_0 = v177;
            l_Amount_0.Text = v180:format(if l_v177_0 >= 10 then v14(l_v177_0) else string.format("%0.1f", l_v177_0):gsub("0+$", ""):gsub("%.$", ""));
            l_Details_0.Main.Stats.Currency.Icon.Image = v16[v176].Image;
            l_Details_0.Main.Stats.Currency.Amount.TextColor3 = v16[v176].Color;
            l_Amount_0 = v175 > 0 and 3 or 2;
            local v182 = if v170.Enchants then #v170.Enchants else 0;
            v180 = UDim2.new(0, 0, 0, 0);
            local v183 = 0;
            if l_Amount_0 == 2 or v182 == 0 then
                v180 = UDim2.new(1, 0, 0, 45);
                v183 = 35;
            elseif v182 == 1 then
                v180 = UDim2.new(1, 0, 0, 42);
                v183 = 33;
            else
                v180 = UDim2.new(1, 0, 0, 32);
                v183 = 32;
            end;
            l_Details_0.Main.Stats.Bubbles.Size = v180;
            l_Details_0.Main.Stats.Bubbles.Amount.TextSize = v183;
            l_Details_0.Main.Stats.Gems.Size = v180;
            l_Details_0.Main.Stats.Gems.Amount.TextSize = v183;
            l_Details_0.Main.Stats.Currency.Size = v180;
            l_Details_0.Main.Stats.Currency.Amount.TextSize = v183;
            l_Details_0.Main.Stats.Gems.Visible = v175 > 0;
            local v184 = v170.Enchants or {};
            for v185 = 1, 2 do
                local v186 = v158[v185];
                local v187 = v184[v185];
                if not v187 then
                    v186.Visible = false;
                else
                    local v188 = v10[v187.Id];
                    local l_v11_FullTitle_5 = v11:GetFullTitle(v187.Id, v187.Level);
                    v186.Title.TextColor3 = v188.Color or Color3.new(1, 1, 1);
                    v186.Title.Text = l_v11_FullTitle_5;
                    local l_v11_Description_0 = v11:GetDescription(v187.Id, v187.Level);
                    if v187.Id == "high-roller" or v187.Id == "infinity" then
                        l_v11_Description_0 = string.gsub(l_v11_Description_0, "DURATION", v22(v188.Metadata));
                    end;
                    v186.Description.Text = l_v11_Description_0;
                    v186.Reroll.Visible = v27:CanAfford(v169, v4.EnchantsRerollOneCost) and not (v43 ~= nil);
                    v186.Visible = true;
                end;
            end;
            for v191, v192 in v155 do
                local v193 = false;
                if v184[v191] == nil then
                    v193 = v191 <= v11:GetMaxEnchantSlots(v170);
                end;
                v192.Visible = v193;
            end;
            if #v184 == 0 then
                l_Button_0.Title.Text = "Roll Enchants";
            else
                l_Button_0.Title.Text = "Reroll All";
            end;
        end;
        if v170 then
            local v194 = v23[v170.Name];
            local l_Rarity_1 = v194.Rarity;
            if l_Rarity_1 == "Legendary" and (v194.Tier or 1) == 1 then
                l_Rarity_1 = "EasyLegendary";
            end;
            local v196 = v4.EnchantsRerollAllGemCosts[l_Rarity_1];
            l_Button_0.Cost.Label.Text = v22(v196);
        end;
        local v197 = false;
        for _, v199 in v169.MasteryUpgrades do
            if v199.Type == "AutoRoll" then
                v197 = true;
                break;
            end;
        end;
        l_Details_0.Main.CancelAuto.Visible = v43 ~= nil;
        l_Details_0.Main.Buttons.Auto.Visible = v197 and v170 and not (v43 ~= nil);
        l_Button_0.Visible = not (v43 ~= nil);
        return;
    end;
end;
v9:BindOnClosed("Enchants", function() --[[ Line: 780 ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
end);
v5(l_Details_0.Main.Buttons.Auto.Button, v6.Button.Default);
v7(l_Details_0.Main.Buttons.Auto.Button, function() --[[ Line: 790 ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref), v2 (copy), v40 (ref), v23 (copy), v4 (copy), v27 (copy), v29 (copy), v28 (copy), v21 (copy), v46 (copy), v10 (copy), v5 (copy), v6 (copy), v7 (copy)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
    local v200 = v2:Get();
    if not v40 or not v200 then
        return;
    else
        local v201 = nil;
        for _, v203 in v200.Pets do
            if v203.Id == v40 then
                v201 = v203;
                break;
            end;
        end;
        if not v201 then
            return;
        else
            local v204 = v23[v201.Name];
            local l_Rarity_2 = v204.Rarity;
            if l_Rarity_2 == "Legendary" and (v204.Tier or 1) == 1 then
                l_Rarity_2 = "EasyLegendary";
            end;
            local v206 = {
                Type = "Currency", 
                Currency = "Gems", 
                Amount = v4.EnchantsRerollAllGemCosts[l_Rarity_2]
            };
            if not v27:CanAfford(v200, v206) then
                local v208 = v29.fromNotEnough(v200, v206, function(v207) --[[ Line: 822 ]]
                    return (("You need %* to reroll enchants!"):format(v207));
                end);
                return v28(v208:Build());
            else
                local function v219() --[[ Line: 828 ]] --[[ Name: start ]]
                    -- upvalues: v43 (ref), v44 (ref), v4 (ref), v21 (ref), v40 (ref), v46 (ref), v42 (ref), v10 (ref), v2 (ref), v27 (ref), v206 (copy), v29 (ref), v200 (copy), v28 (ref), v41 (ref)
                    v43 = {
                        Type = "Max"
                    };
                    v44 = task.spawn(function() --[[ Line: 832 ]]
                        -- upvalues: v4 (ref), v21 (ref), v40 (ref), v46 (ref), v42 (ref), v10 (ref), v2 (ref), v27 (ref), v206 (ref), v29 (ref), v200 (ref), v28 (ref)
                        local _ = nil;
                        while true do
                            local v210 = os.clock() + v4.EnchantRerollCooldown;
                            local v211, v212 = v21:InvokeServer("RerollEnchants", v40);
                            if not v211 or not v212 then
                                return v46();
                            else
                                if v211 ~= v40 then
                                    v40 = v211;
                                    v42();
                                end;
                                for _, v214 in v212 do
                                    if v214.Level == 5 or v10[v214.Id].Special == true then
                                        return v46();
                                    end;
                                end;
                                local v215 = os.clock();
                                if v215 < v210 then
                                    task.wait(v210 - v215);
                                end;
                                local v216 = v2:Get();
                                if not v27:CanAfford(v216, v206) then
                                    local v218 = v29.fromNotEnough(v200, v206, function(v217) --[[ Line: 861 ]]
                                        return (("You need %* to reroll enchants!"):format(v217));
                                    end);
                                    v28(v218:Build());
                                    return v46();
                                end;
                            end;
                        end;
                    end);
                    v42();
                    v41();
                end;
                local v224 = v29.new("Are you sure?"):Text("This will auto-reroll enchants until a <font color=\"rgb(255, 233, 66)\">Level 5</font> or <font color=\"rgb(192, 114, 255)\">Special</font> enchant!"):Button(function(v220, v221) --[[ Line: 878 ]]
                    -- upvalues: v5 (ref), v6 (ref), v7 (ref), v219 (copy)
                    v220.Label.Text = "Reroll";
                    v5(v220, v6.Button.Pink);
                    v7(v220, function() --[[ Line: 881 ]]
                        -- upvalues: v219 (ref), v221 (copy)
                        v219();
                        v221();
                    end);
                end):Button(function(v222, v223) --[[ Line: 886 ]]
                    -- upvalues: v5 (ref), v6 (ref), v7 (ref)
                    v222.Label.Text = "Close";
                    v5(v222, v6.Button.Red);
                    v7(v222, v223);
                end);
                v28(v224:Build());
                return;
            end;
        end;
    end;
end);
v5(l_Button_0, v6.Button.Purple);
v7(l_Button_0, function() --[[ Line: 900 ]]
    -- upvalues: v47 (ref), v4 (copy), v2 (copy), v40 (ref), v23 (copy), v27 (copy), v29 (copy), v28 (copy), v26 (copy), v30 (copy), v152 (copy), v21 (copy), v42 (ref)
    if os.clock() - v47 < v4.EnchantRerollCooldown then
        return;
    else
        local v225 = v2:Get();
        if not v225 or not v40 then
            return;
        else
            local v226 = nil;
            for _, v228 in v225.Pets do
                if v228.Id == v40 then
                    v226 = v228;
                    break;
                end;
            end;
            if not v226 then
                return;
            else
                local v229 = v23[v226.Name];
                local l_Rarity_3 = v229.Rarity;
                if l_Rarity_3 == "Legendary" and (v229.Tier or 1) == 1 then
                    l_Rarity_3 = "EasyLegendary";
                end;
                local v231 = {
                    Type = "Currency", 
                    Currency = "Gems", 
                    Amount = v4.EnchantsRerollAllGemCosts[l_Rarity_3]
                };
                if not v27:CanAfford(v225, v231) then
                    local v233 = v29.fromNotEnough(v225, v231, function(v232) --[[ Line: 933 ]]
                        return (("You need %* to reroll enchants!"):format(v232));
                    end);
                    return v28(v233:Build());
                elseif not v26(v225) then
                    return;
                else
                    task.spawn(function() --[[ Line: 68 ]]
                        -- upvalues: v30 (ref)
                        for _ = 1, 2 do
                            v30("Upgrade");
                            task.wait(0.15 + math.random() / 10);
                        end;
                    end);
                    v30("EnchantDiscover");
                    v152(function() --[[ Line: 945 ]]
                        -- upvalues: v47 (ref), v21 (ref), v40 (ref), v42 (ref)
                        v47 = os.clock();
                        local v235 = v21:InvokeServer("RerollEnchants", v40);
                        if v235 then
                            v40 = v235;
                            v42();
                        end;
                    end);
                    return;
                end;
            end;
        end;
    end;
end);
local function v237() --[[ Line: 959 ]] --[[ Name: updateRerollAllButtonSize ]]
    -- upvalues: l_Button_0 (copy), l_UIScale_0 (copy)
    local v236 = math.ceil(l_Button_0.Cost.Label.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_Button_0.Cost.Label.Size = UDim2.new(0, v236, 1, 0);
end;
l_Button_0.Cost.Label:GetPropertyChangedSignal("TextBounds"):Connect(v237);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v237);
local v238 = math.ceil(l_Button_0.Cost.Label.TextBounds.X / l_UIScale_0.Scale) + 1;
l_Button_0.Cost.Label.Size = UDim2.new(0, v238, 1, 0);
v238 = function(v239) --[[ Line: 971 ]] --[[ Name: selectPet ]]
    -- upvalues: v43 (ref), v44 (ref), v41 (ref), v42 (ref), v19 (copy), v11 (copy), v40 (ref)
    if v43 ~= nil then
        v43 = nil;
        if v44 and v44 ~= coroutine.running() then
            task.cancel(v44);
        end;
        v44 = nil;
        v41();
        v42();
    end;
    v19:Open(function(v240) --[[ Line: 974 ]]
        -- upvalues: v11 (ref)
        return v11:IsEnchantable(v240);
    end, function(v241) --[[ Line: 976 ]]
        -- upvalues: v40 (ref), v42 (ref), v41 (ref)
        v40 = v241.Id;
        v42();
        v41();
    end, "Enchants", nil, v239);
end;
v5(l_Details_0.Main.Change.Button, v6.Button.Default);
v7(l_Details_0.Main.Change.Button, v238);
v5(l_Details_0.NoSelection.Choose.Button, v6.Button.Default);
v7(l_Details_0.NoSelection.Choose.Button, v238);
v5(l_Main_0.NoSelection.Choose.Button, v6.Button.Default);
v7(l_Main_0.NoSelection.Choose.Button, v238);
v42();
v41();
v20("Enchants", {
    "Pets", 
    "Powerups", 
    "DiscoveredEnchants", 
    "MasteryLevels", 
    "MasteryUpgrades"
}, function() --[[ Line: 997 ]]
    -- upvalues: v42 (ref), v41 (ref)
    v42();
    v41();
end);
v5(l_Frame_0.Top.Close.Button, v6.Button.Red);
v7(l_Frame_0.Top.Close.Button, function() --[[ Line: 1006 ]]
    -- upvalues: v9 (copy)
    v9:Close();
end);
return {
    SetSelectedPetId = function(_, v243) --[[ Line: 1013 ]] --[[ Name: SetSelectedPetId ]]
        -- upvalues: v40 (ref), v42 (ref), v41 (ref)
        v40 = v243;
        v42();
        v41();
    end, 
    PromptSelectPet = function(_) --[[ Line: 1019 ]] --[[ Name: PromptSelectPet ]]
        -- upvalues: v238 (copy)
        v238(true);
    end
};
ModuleScript: GemGenie
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_HttpService_0 = game:GetService("HttpService");
local l_TweenService_0 = game:GetService("TweenService");
local l_MarketplaceService_0 = game:GetService("MarketplaceService");
local _ = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v7 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v8 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.QuestUtil);
local v9 = require(l_ReplicatedStorage_0.Shared.Data.Quests.GenieQuest);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v12 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v14 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v15 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v16 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Emitter);
local v17 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v18 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v19 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v20 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local v21 = require(l_ReplicatedStorage_0.Client.Effects.OutlinePulse);
local v22 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v24 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v25 = require(l_ReplicatedStorage_0.Client.Activation);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v27 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v28 = require(l_ReplicatedStorage_0.Shared.Palette);
local v29 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v30 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v31 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v32 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v33 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Achievement);
local v34 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Shiny);
local v35 = require(l_ReplicatedStorage_0.Client.Gui.Animations.ProcessingPurchase);
local v36 = require(l_ReplicatedStorage_0.Shared.Constants);
local v37 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil.OrbIcon);
local v38 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Animations.SetFade);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_GemGenie_0 = l_ScreenGui_0.GemGenie;
local l_Skip_0 = l_GemGenie_0.Skip;
local l_Template_0 = l_GemGenie_0.Cards.Template;
l_Template_0.Beam.BackgroundTransparency = 1;
l_Template_0.Inner.Choose.Cover.BackgroundTransparency = 1;
l_Template_0.Inner.Cover.BackgroundTransparency = 1;
l_Template_0.Parent = nil;
local l_Template_1 = l_Template_0.Inner.Content.Tasks.Template;
l_Template_1.Parent = nil;
local l_Template_2 = l_Template_0.Inner.Content.Rewards.Template;
l_Template_2.Parent = nil;
local l_GemGenie_1 = workspace.Worlds["The Overworld"].Islands.Zen.Island.GemGenie;
local v47 = v16.fromEmitter(l_ReplicatedStorage_0.Assets.Particles.Stars);
v47.Parent = nil;
v47.Rate = 0;
local v48 = v23.new():size(20);
local v49 = TweenInfo.new(0.4);
local _ = TweenInfo.new(0.25, Enum.EasingStyle.Sine);
local _ = TweenInfo.new(0.75, Enum.EasingStyle.Back);
local l_Zen_0 = l_ScreenGui_0.WorldMap.Worlds["The Overworld"].Islands.Zen;
local v53 = {};
local v54 = nil;
local v55 = nil;
local l_GemGenieTask_0 = l_ScreenGui_0.GemGenieTask;
local l_Inner_0 = l_GemGenieTask_0.Content.Info.Bar.Inner;
local v61 = v10.new(function() --[[ Line: 82 ]]
    -- upvalues: l_Template_2 (copy), v11 (copy), l_HttpService_0 (copy), v12 (copy)
    local v58 = l_Template_2:Clone();
    v11:OnEnter(v58.Hover, function() --[[ Line: 84 ]]
        -- upvalues: v58 (copy), l_HttpService_0 (ref), v12 (ref)
        local l_v58_Attribute_0 = v58:GetAttribute("Item");
        if not l_v58_Attribute_0 or typeof(l_v58_Attribute_0) ~= "string" then
            return;
        else
            local v60 = l_HttpService_0:JSONDecode(l_v58_Attribute_0);
            if not v60 then
                return;
            else
                return v12.fromItem(v60);
            end;
        end;
    end);
    return v58;
end);
local v62 = v10.new(function() --[[ Line: 99 ]]
    -- upvalues: l_Template_1 (copy)
    return l_Template_1:Clone();
end);
local v63 = 1;
local l_Next_0 = l_GemGenieTask_0.Content.Next;
local v65 = nil;
local function v74() --[[ Line: 108 ]] --[[ Name: updateCurrentTask ]]
    -- upvalues: v7 (copy), v8 (copy), v63 (ref), v65 (ref)
    local v66 = v7:Get();
    if not v66 then
        return;
    else
        local l_v8_ById_0 = v8:FindById(v66, "gem-genie");
        if not l_v8_ById_0 then
            return;
        else
            local v68 = {};
            local v69 = #l_v8_ById_0.Tasks;
            if v69 < v63 then
                v63 = 1;
            end;
            for v70 = 0, v69 - 1 do
                local v71 = (v63 - 1 + v70) % v69 + 1;
                table.insert(v68, {
                    Index = v71, 
                    Task = l_v8_ById_0.Tasks[v71]
                });
            end;
            for _, v73 in v68 do
                if v8:GetRequirement(v73.Task) > (l_v8_ById_0.Progress[v73.Index] or 0) then
                    v63 = v73.Index;
                    v65 = v73.Task;
                    return;
                end;
            end;
            return;
        end;
    end;
end;
local function v87() --[[ Line: 147 ]] --[[ Name: updateTask ]]
    -- upvalues: v7 (copy), v8 (copy), v74 (copy), v63 (ref), l_GemGenieTask_0 (copy), l_Inner_0 (copy), v15 (copy), l_Next_0 (copy), v65 (ref), l_ScreenGui_0 (copy), v33 (copy)
    local v75 = v7:Get();
    if not v75 then
        return;
    else
        local l_v8_ById_1 = v8:FindById(v75, "gem-genie");
        if l_v8_ById_1 then
            v74();
            local v77 = l_v8_ById_1.Tasks[v63];
            if v77 then
                local v78 = l_v8_ById_1.Progress[v63] or 0;
                local v79 = true;
                if v77.Type == "Hatch" and v77.Rarity then
                    v79 = false;
                end;
                l_GemGenieTask_0.Content.Icon.Label.Visible = v79;
                local l_v8_Requirement_0 = v8:GetRequirement(v77);
                l_GemGenieTask_0.Content.Info.Task.Text = v8:FormatTask(v77);
                l_Inner_0.Fill.Size = UDim2.new(v78 / l_v8_Requirement_0, 0, 1, 6);
                l_Inner_0.Fill.Visible = v78 > 0;
                l_Inner_0.Label.Text = ("%* / %*"):format(v15(v78, 10000), (v15(l_v8_Requirement_0, 10000)));
                v8:UpdateTaskIcon(l_GemGenieTask_0.Content.Icon, v77);
                l_GemGenieTask_0.Content.Icon.Label.Size = UDim2.fromOffset(50, 50);
            end;
            local v81 = 0;
            for v82, v83 in l_v8_ById_1.Tasks do
                if (l_v8_ById_1.Progress[v82] or 0) < v8:GetRequirement(v83) then
                    v81 = v81 + 1;
                end;
            end;
            l_Next_0.Visible = v81 > 1;
        else
            v63 = 1;
            v65 = nil;
        end;
        local v84 = l_v8_ById_1 ~= nil;
        if l_ScreenGui_0.HUD.Tutorial.Visible or v33.Active then
            v84 = false;
        end;
        local l_l_GemGenieTask_0_0 = l_GemGenieTask_0;
        local v86 = false;
        if l_v8_ById_1 ~= nil then
            v86 = l_ScreenGui_0.IslandRace.Visible == false;
        end;
        l_l_GemGenieTask_0_0.Visible = v86;
        return;
    end;
end;
l_ScreenGui_0.IslandRace:GetPropertyChangedSignal("Visible"):Connect(v87);
v27(l_Next_0.Button, v28.Button.Default);
v18(l_Next_0.Button, function() --[[ Line: 203 ]]
    -- upvalues: v63 (ref), v87 (copy)
    v63 = v63 + 1;
    v87();
end);
local v88 = nil;
local function v94(v89) --[[ Line: 210 ]] --[[ Name: updateSelected ]]
    -- upvalues: v53 (copy), v47 (copy), l_TweenService_0 (copy), v49 (copy), v88 (ref)
    for v90, v91 in v53 do
        local v92 = v90 == v89;
        if v92 then
            v47.Rate = 10;
            v47.Parent = v91.Beam.Emitter;
        end;
        local v93 = (not v89 or v92) and 1 or 0.25;
        l_TweenService_0:Create(v91.Beam, v49, {
            BackgroundTransparency = v92 and 0.65 or 1
        }):Play();
        l_TweenService_0:Create(v91.Inner.Cover, v49, {
            BackgroundTransparency = v93
        }):Play();
        l_TweenService_0:Create(v91.Inner.Choose.Cover, v49, {
            BackgroundTransparency = v93
        }):Play();
        v91.ZIndex = v92 and 3 or 1;
    end;
    if not v89 then
        v47.Parent = nil;
        v47.Rate = 0;
    end;
    v88 = v89;
end;
local function _(v95) --[[ Line: 230 ]] --[[ Name: pulse ]]
    -- upvalues: v21 (copy)
    v21(function(v96) --[[ Line: 231 ]]
        -- upvalues: v95 (copy)
        v96.UICorner.CornerRadius = v95.Inner.UICorner.CornerRadius;
        v96.UIStroke.Thickness = 5;
    end).Parent = v95.Inner;
end;
local function _() --[[ Line: 239 ]] --[[ Name: createConnection ]]
    -- upvalues: v55 (ref), v20 (copy), v54 (ref), v53 (copy), v21 (copy)
    if v55 then
        v55:Disconnect();
    end;
    v55 = v20(1, function() --[[ Line: 243 ]]
        -- upvalues: v54 (ref), v53 (ref), v21 (ref)
        if not v54 then
            return;
        else
            local v98 = v53[v54];
            if v98 then
                v21(function(v99) --[[ Line: 231 ]]
                    -- upvalues: v98 (copy)
                    v99.UICorner.CornerRadius = v98.Inner.UICorner.CornerRadius;
                    v99.UIStroke.Thickness = 5;
                end).Parent = v98.Inner;
            end;
            return;
        end;
    end);
end;
local v101 = nil;
local function v127() --[[ Line: 256 ]] --[[ Name: update ]]
    -- upvalues: v7 (copy), v22 (copy), v23 (copy), v48 (copy), v8 (copy), v101 (ref), v6 (copy), v26 (copy), l_GemGenie_1 (copy), l_Zen_0 (copy), l_GemGenie_0 (copy), v53 (copy), v9 (copy), v54 (ref), v24 (copy), v61 (copy), v32 (copy), v14 (copy), l_HttpService_0 (copy), v62 (copy), l_Skip_0 (copy), l_Template_0 (copy)
    local v102 = v7:Get();
    if not v102 then
        return;
    else
        local v103 = v22.now();
        local v104 = v102.GemGenie.Next - v103;
        local v105 = v104 > 0 and v23.autoStroke((("%*\n%*"):format(v48("Come Back In"), (v22.formatTime(v104))))) or v23.autoStroke((("%*\nLOCKED"):format((v48("Finish Current Quest")))));
        local l_v8_ById_2 = v8:FindById(v102, "gem-genie");
        local v107 = true;
        if v104 <= 0 then
            v107 = l_v8_ById_2 ~= nil;
        end;
        if v101 ~= v107 then
            if v101 ~= nil and not v107 and not v6:IsAnyOpen() then
                v26(("The %* awaits your return..."):format((v23.autoColor("Gem Genie", Color3.fromRGB(188, 71, 255)))), {
                    Sound = "NotificationRift", 
                    TeleportId = l_GemGenie_1.Root:GetFullName()
                });
            end;
            v101 = v107;
        end;
        local l_Timer_0 = l_Zen_0.Timer;
        local v109 = false;
        if v104 > 0 then
            v109 = l_Zen_0.Locked.Visible == false;
        end;
        l_Timer_0.Visible = v109;
        l_Zen_0.Timer.Text = v22.formatRealTime(v104);
        l_Zen_0.Button.Icon.Label.ImageTransparency = v104 > 0 and 0.5 or 0;
        l_Timer_0 = "Choose your destiny!";
        if v107 then
            l_Timer_0 = if v104 > 0 then ("Come back in %*"):format((v22.formatTime(v104))) else "Complete your current quest!";
        end;
        l_GemGenie_1.Root.BillboardGui.Description.Text = l_Timer_0;
        if not v6:IsOpen("GemGenie") then
            return;
        else
            v109 = v102.GemGenie.Seed;
            l_GemGenie_0.Title.Text = v107 and "Active Quest" or "CHOOSE YOUR DESTINY!";
            l_GemGenie_0.Reroll.Visible = not v107 and v104 <= 0;
            local v110 = false;
            for v111 = 1, 3 do
                local v112 = v53[v111];
                local v113 = v9(v102, v109 + (v111 - 1));
                local v114 = l_v8_ById_2 and v8:Compare(l_v8_ById_2, v113) or false;
                v112.Inner.Choose.Visible = not v107;
                if v114 then
                    v110 = true;
                end;
                if v111 == 3 and not v110 and l_v8_ById_2 then
                    v113 = l_v8_ById_2;
                    v114 = true;
                end;
                if v107 then
                    v112.Inner.Content.Visible = v114;
                    v112.Inner.Choose.Visible = false;
                    v112.Inner.Change.Visible = v114 and v104 <= 0;
                    v112.Inner.Info.Visible = not v114;
                else
                    v112.Visible = true;
                    v112.Inner.Info.Visible = false;
                    v112.Inner.Content.Visible = true;
                    v112.Inner.Choose.Visible = true;
                    v112.Inner.Change.Visible = false;
                end;
                if v114 then
                    v54 = v111;
                    v24.Shift(v112.Inner.Border, "Rainbow", {
                        Speed = 0.25
                    });
                else
                    v24.None(v112.Inner.Border);
                    v112.Inner.Border.ImageColor3 = Color3.fromRGB(42, 60, 70);
                end;
                for v115, v116 in v113.Rewards do
                    local v117 = v61:Get();
                    if v116.Type == "Currency" then
                        local v118 = table.clone(v116);
                        v118.Amount = math.floor(v116.Amount * v32:GetCurrencyMultiplier(v102, v116.Currency, true));
                        v116 = v118;
                    end;
                    v14:FormatAmount(v117.Amount, v116);
                    v117.LayoutOrder = v115;
                    v117.Parent = v112.Inner.Content.Rewards;
                    v117:SetAttribute("Item", l_HttpService_0:JSONEncode(v116));
                    v14:UpdateIcon(v117, v116);
                end;
                for v119, v120 in v113.Tasks do
                    local v121 = v62:Get();
                    v121.LayoutOrder = v119;
                    v121.Label.Text = v8:FormatTask(v120);
                    v121.Parent = v112.Inner.Content.Tasks;
                    v121.Size = UDim2.new(1, 0, 0, v114 and 62 or 50);
                    if l_v8_ById_2 and v114 then
                        local v122 = l_v8_ById_2.Tasks[v119];
                        if v122 then
                            local v123 = math.min(1, l_v8_ById_2.Progress[v119] / v8:GetRequirement(v122));
                            v121.Bar.Label.Text = ("%*%%"):format((math.ceil(v123 * 100)));
                            v121.Bar.Fill.Size = UDim2.new(v123, 0, 0, 8);
                        end;
                    end;
                    v121.Bar.Visible = v114;
                    v8:UpdateTaskIcon(v121.Icon, v120);
                end;
            end;
            local v124 = 0;
            for _, v126 in v53 do
                if v126.Inner.Info.Visible then
                    v124 = v124 + 1;
                    v126.Inner.Info.Text = v105;
                end;
            end;
            l_Skip_0.Visible = v124 >= 3;
            if not l_v8_ById_2 then
                v54 = nil;
            end;
            l_GemGenie_0.Title.Position = UDim2.new(0.5, v54 and (l_Template_0.Size.X.Offset + 30) * (v54 - 2) or 0, 0.5, -305);
            v61:Done();
            v62:Done();
            return;
        end;
    end;
end;
for v128 = 1, 3 do
    local v129 = l_Template_0:Clone();
    local v130 = (l_Template_0.Size.X.Offset / 2 + 30) * (v128 - 2);
    local v131 = UDim2.new(0.5, v130, 0.5, 0);
    v129.AnchorPoint = Vector2.new(1 - (v128 - 1) / 2, 0.5);
    v129.Position = v131;
    v129.Parent = l_GemGenie_0;
    local function v136() --[[ Line: 419 ]] --[[ Name: activate ]]
        -- upvalues: v54 (ref), v31 (copy), v19 (copy), v128 (copy), v129 (copy), v21 (copy), v55 (ref), v20 (copy), v53 (copy), v94 (copy)
        if not v54 then
            v31("QuestStart");
            v19:FireServer("StartGenieQuest", v128);
            local l_v129_0 = v129;
            v21(function(v133) --[[ Line: 231 ]]
                -- upvalues: l_v129_0 (copy)
                v133.UICorner.CornerRadius = l_v129_0.Inner.UICorner.CornerRadius;
                v133.UIStroke.Thickness = 5;
            end).Parent = l_v129_0.Inner;
            if v55 then
                v55:Disconnect();
            end;
            v55 = v20(1, function() --[[ Line: 243 ]]
                -- upvalues: v54 (ref), v53 (ref), v21 (ref)
                if not v54 then
                    return;
                else
                    local v134 = v53[v54];
                    if v134 then
                        v21(function(v135) --[[ Line: 231 ]]
                            -- upvalues: v134 (copy)
                            v135.UICorner.CornerRadius = v134.Inner.UICorner.CornerRadius;
                            v135.UIStroke.Thickness = 5;
                        end).Parent = v134.Inner;
                    end;
                    return;
                end;
            end);
            v94(nil);
        end;
    end;
    v129.Hover.MouseEnter:Connect(function() --[[ Line: 429 ]]
        -- upvalues: v17 (copy), v54 (ref), v94 (copy), v128 (copy)
        if v17.Mode ~= "Touch" and not v54 then
            v94(v128);
        end;
    end);
    v129.Hover.MouseLeave:Connect(function() --[[ Line: 435 ]]
        -- upvalues: v88 (ref), v128 (copy), v94 (copy)
        if v88 == v128 then
            v94(nil);
        end;
    end);
    v129.Hover.Activated:Connect(v136);
    v53[v128] = v129;
    v27(v129.Inner.Choose.Button, v28.Button.Default);
    v18(v129.Inner.Choose.Button, function() --[[ Line: 445 ]]
        -- upvalues: v54 (ref), v31 (copy), v19 (copy), v128 (copy), v129 (copy), v21 (copy), v55 (ref), v20 (copy), v53 (copy), v94 (copy)
        if not v54 then
            v31("QuestStart");
            v19:FireServer("StartGenieQuest", v128);
            local l_v129_1 = v129;
            v21(function(v138) --[[ Line: 231 ]]
                -- upvalues: l_v129_1 (copy)
                v138.UICorner.CornerRadius = l_v129_1.Inner.UICorner.CornerRadius;
                v138.UIStroke.Thickness = 5;
            end).Parent = l_v129_1.Inner;
            if v55 then
                v55:Disconnect();
            end;
            v55 = v20(1, function() --[[ Line: 243 ]]
                -- upvalues: v54 (ref), v53 (ref), v21 (ref)
                if not v54 then
                    return;
                else
                    local v139 = v53[v54];
                    if v139 then
                        v21(function(v140) --[[ Line: 231 ]]
                            -- upvalues: v139 (copy)
                            v140.UICorner.CornerRadius = v139.Inner.UICorner.CornerRadius;
                            v140.UIStroke.Thickness = 5;
                        end).Parent = v139.Inner;
                    end;
                    return;
                end;
            end);
            v94(nil);
        end;
    end, function() --[[ Line: 447 ]]
        -- upvalues: v129 (copy)
        return v129.Inner.Choose.Cover.BackgroundTransparency == 1;
    end);
    v27(v129.Inner.Change.Button, v28.Button.Red);
    v18(v129.Inner.Change.Button, function() --[[ Line: 452 ]]
        -- upvalues: v29 (copy), v23 (copy), v28 (copy), v27 (copy), v18 (copy), v19 (copy), v30 (copy)
        local v145 = v29.new("Change?"):Text((("%*\nThis cannot be undone."):format((v23.autoColor("You're about to remove your current quest!", v28.Text.Pink))))):Button(function(v141, v142) --[[ Line: 455 ]]
            -- upvalues: v27 (ref), v28 (ref), v18 (ref), v19 (ref)
            v141.Label.Text = "Change";
            v27(v141, v28.Button.Red);
            v18(v141, function() --[[ Line: 458 ]]
                -- upvalues: v19 (ref), v142 (copy)
                v19:FireServer("ChangeGenieQuest");
                v142();
            end);
        end):Button(function(v143, v144) --[[ Line: 463 ]]
            -- upvalues: v27 (ref), v28 (ref), v18 (ref)
            v143.Label.Text = "Cancel";
            v27(v143, v28.Button.Inactive);
            v18(v143, v144);
        end);
        v30(v145:Build());
    end);
end;
local l_GemGenieReroll_0 = v36.GemGenieReroll;
local l_Reroll_0 = l_GemGenie_0.Reroll;
l_Reroll_0.Button.Container.Label.Text = v14:GetAmount(l_GemGenieReroll_0);
v37.new(l_Reroll_0.Button.Container.Frame, l_GemGenieReroll_0);
local v148 = v23.new():size(24);
local function v149() --[[ Line: 481 ]] --[[ Name: update ]]
    -- upvalues: l_Reroll_0 (copy), l_ScreenGui_0 (copy)
    l_Reroll_0.Button.Container.Label.Size = UDim2.new(0, l_Reroll_0.Button.Container.Label.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 1, 0);
end;
v27(l_Reroll_0.Button, v28.Button.Pink);
v18(l_Reroll_0.Button, function() --[[ Line: 486 ]]
    -- upvalues: v7 (copy), v14 (copy), l_GemGenieReroll_0 (copy), v29 (copy), v30 (copy), v31 (copy), v19 (copy)
    local v150 = v7:Get();
    if not v150 then
        return;
    elseif v14:GetOwnedAmount(v150, l_GemGenieReroll_0) < v14:GetAmount(l_GemGenieReroll_0) then
        local v152 = v29.fromNotEnough(v150, l_GemGenieReroll_0, function(v151) --[[ Line: 492 ]]
            return (("You need %* to reroll these quests!"):format(v151));
        end);
        return v30(v152:Build());
    else
        v31("Reroll");
        v19:FireServer("RerollGenie");
        return;
    end;
end);
v7:ConnectDataChanged("Powerups", function(v153) --[[ Line: 501 ]]
    -- upvalues: v14 (copy), l_GemGenieReroll_0 (copy), l_Reroll_0 (copy), v15 (copy), v148 (copy), v38 (copy)
    local l_v14_OwnedAmount_0 = v14:GetOwnedAmount(v153, l_GemGenieReroll_0);
    l_Reroll_0.Button.Container.Label.Text = v15(l_v14_OwnedAmount_0, 1000) .. v148((("/%*"):format((tostring(v14:GetAmount(l_GemGenieReroll_0))))));
    v38(l_Reroll_0, v14:GetAmount(l_GemGenieReroll_0) <= l_v14_OwnedAmount_0 and 0 or 0.5, nil, {
        "Frame"
    });
end);
v17.Changed:Connect(function(v155) --[[ Line: 507 ]]
    -- upvalues: l_Reroll_0 (copy)
    if v155 == "Touch" then
        l_Reroll_0.AnchorPoint = Vector2.new(1, 1);
        l_Reroll_0.Size = UDim2.fromOffset(150, 100);
        l_Reroll_0.Position = UDim2.new(1, -40, 1, -40);
        return;
    else
        l_Reroll_0.AnchorPoint = Vector2.new(0.5, 0);
        l_Reroll_0.Size = UDim2.fromOffset(250, 70);
        l_Reroll_0.Position = UDim2.new(0.5, 0, 0.5, 400);
        return;
    end;
end);
l_Reroll_0.Button.Container.Label.Size = UDim2.new(0, l_Reroll_0.Button.Container.Label.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 1, 0);
l_Reroll_0.Button.Container.Label:GetPropertyChangedSignal("TextBounds"):Connect(v149);
v27(l_GemGenie_0.Close, v28.Button.Red);
v18(l_GemGenie_0.Close, function() --[[ Line: 527 ]]
    -- upvalues: v6 (copy)
    v6:Close();
end);
v27(l_Skip_0.Button, v28.Button.Orange);
v18(l_Skip_0.Button, function() --[[ Line: 533 ]]
    -- upvalues: v35 (copy), l_MarketplaceService_0 (copy), l_LocalPlayer_0 (copy), v36 (copy)
    v35:Show();
    l_MarketplaceService_0:PromptProductPurchase(l_LocalPlayer_0, v36.GemGenieSkipProduct);
end);
v33.Created:Connect(v87);
v33.Destroyed:Connect(v87);
v7:ConnectDataChanged({
    "Quests", 
    "QuestsCompleted"
}, v87);
l_ScreenGui_0.HUD.Tutorial:GetPropertyChangedSignal("Visible"):Connect(v87);
v6:BindOnOpened("GemGenie", function() --[[ Line: 544 ]]
    -- upvalues: v127 (copy), v55 (ref), v20 (copy), v54 (ref), v53 (copy), v21 (copy), v34 (copy), l_Skip_0 (copy)
    v127();
    if v55 then
        v55:Disconnect();
    end;
    v55 = v20(1, function() --[[ Line: 243 ]]
        -- upvalues: v54 (ref), v53 (ref), v21 (ref)
        if not v54 then
            return;
        else
            local v156 = v53[v54];
            if v156 then
                v21(function(v157) --[[ Line: 231 ]]
                    -- upvalues: v156 (copy)
                    v157.UICorner.CornerRadius = v156.Inner.UICorner.CornerRadius;
                    v157.UIStroke.Thickness = 5;
                end).Parent = v156.Inner;
            end;
            return;
        end;
    end);
    v34:Add(l_Skip_0.Effect);
    game.StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false);
end);
v6:BindOnClosed("GemGenie", function() --[[ Line: 550 ]]
    -- upvalues: v55 (ref), v34 (copy), l_Skip_0 (copy)
    if v55 then
        v55:Disconnect();
        v55 = nil;
    end;
    v34:Remove(l_Skip_0.Effect);
    game.StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true);
end);
v20(0.5, v127);
v7:ConnectDataChanged({
    "Quests", 
    "GemGenie"
}, v127);
v25:Bind(l_GemGenie_1, function() --[[ Line: 562 ]]
    -- upvalues: v6 (copy)
    v6:Open("GemGenie");
end);
return {};
ModuleScript: GumShop
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_HttpService_0 = game:GetService("HttpService");
local l_MarketplaceService_0 = game:GetService("MarketplaceService");
local l_TweenService_0 = game:GetService("TweenService");
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v6 = require(l_ReplicatedStorage_0.Shared.Data.Flavors);
local v7 = require(l_ReplicatedStorage_0.Shared.Data.Gum);
local v8 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v10 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v11 = require(l_ReplicatedStorage_0.Shared.Palette);
local v12 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local v13 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v14 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v15 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v16 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v18 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Maid);
local v20 = require(l_ReplicatedStorage_0.Client.Gui.Utils.GuiArrow);
local _ = require(l_ReplicatedStorage_0.Shared.Utils.Stats.QuestUtil);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local v24 = require(l_ReplicatedStorage_0.Shared.Data.Worlds);
local v25 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v27 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v28 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.ProductInfo);
local v29 = require(l_ReplicatedStorage_0.Shared.Constants);
local v30 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Shiny);
local v31 = require(l_ReplicatedStorage_0.Client.Gui.Animations.ProcessingPurchase);
local v32 = require(l_ReplicatedStorage_0.Shared.Data.Gamepasses);
local v33 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Frame_0 = l_ScreenGui_0.GumShop.Frame;
local l_List_0 = l_Frame_0.Items.Inner.List;
local l_Selected_0 = l_Frame_0.Selected;
local l_Template_0 = l_List_0.Template;
l_Template_0.Parent = nil;
local v40 = {
    Kind = "Flavors"
};
local v41 = nil;
local v42 = nil;
local v43 = nil;
local v44 = false;
local v45 = {};
local function _(v46) --[[ Line: 79 ]] --[[ Name: passNameFromId ]]
    -- upvalues: v32 (copy)
    for v47, v48 in v32 do
        if v48.Id == v46 then
            return v47;
        end;
    end;
    return nil;
end;
local function _(v50, v51) --[[ Line: 88 ]] --[[ Name: isUnlocked ]]
    -- upvalues: v24 (copy)
    if not v50 then
        return false;
    elseif not v51.Area then
        return true;
    elseif v24[v51.Area] then
        return v50.WorldsUnlocked[v51.Area] ~= nil;
    else
        return v50.AreasUnlocked[v51.Area] ~= nil;
    end;
end;
local v58 = v8.new(function() --[[ Line: 99 ]]
    -- upvalues: l_Template_0 (copy), v15 (copy), v7 (copy), v6 (copy), v43 (ref), v9 (copy), v24 (copy)
    local v53 = l_Template_0:Clone();
    v15(v53.Button, function() --[[ Line: 102 ]]
        -- upvalues: v7 (ref), v53 (copy), v6 (ref), v43 (ref), v9 (ref), v24 (ref)
        local v54 = v7[v53.Name] or v6[v53.Name];
        if not v54 then
            return;
        else
            local l_v43_0 = v43;
            local v56 = {
                Name = v53.Name, 
                Image = v54.Image, 
                Cost = v54.Cost
            };
            local v57 = v9:Get();
            v56.Unlocked = not not v57 and (not v54.Area or if v24[v54.Area] then v57.WorldsUnlocked[v54.Area] ~= nil else v57.AreasUnlocked[v54.Area] ~= nil);
            l_v43_0(v56);
            return;
        end;
    end);
    return v53;
end);
local function v72(_, v60) --[[ Line: 119 ]] --[[ Name: getStore ]]
    -- upvalues: v9 (copy), v7 (copy), v6 (copy), v24 (copy), v18 (copy)
    local v61 = v9:Get();
    local v62 = {};
    local v63 = v60 == "Gum" and v7 or v6;
    for v64, v65 in v63 do
        if typeof(v65.Cost) ~= "number" then
            table.insert(v62, {
                Name = v64, 
                Cost = v65.Cost, 
                Image = v65.Image, 
                Unlocked = not not v61 and (not v65.Area or if v24[v65.Area] then v61.WorldsUnlocked[v65.Area] ~= nil else v61.AreasUnlocked[v65.Area] ~= nil)
            });
        end;
    end;
    table.sort(v62, function(v66, v67) --[[ Line: 136 ]]
        -- upvalues: v18 (ref)
        local v68 = typeof(v66.Cost) == "number";
        if v68 ~= (typeof(v67.Cost) == "number") then
            return v68;
        elseif typeof(v66.Cost) ~= "number" and typeof(v67.Cost) ~= "number" then
            return v18:GetAmount(v66.Cost) < v18:GetAmount(v67.Cost);
        else
            return v66.Cost < v67.Cost;
        end;
    end);
    if v60 == "Gum" then
        local v69 = v7["Infinity Gum"];
        table.insert(v62, 7, {
            Name = "Infinity Gum", 
            Cost = v69.Cost, 
            Image = v69.Image, 
            Unlocked = true
        });
        local v70 = v7["VIP Gum"];
        table.insert(v62, 3, {
            Name = "VIP Gum", 
            Cost = v70.Cost, 
            Image = v70.Image, 
            Unlocked = true
        });
        return v62;
    else
        local v71 = v6["VIP Flavor"];
        table.insert(v62, 3, {
            Name = "VIP Flavor", 
            Cost = v71.Cost, 
            Image = v71.Image, 
            Unlocked = true
        });
        return v62;
    end;
end;
local function v76() --[[ Line: 178 ]] --[[ Name: updateTutorialArrow ]]
    -- upvalues: v44 (ref), v9 (copy), v20 (copy), v40 (copy), l_Frame_0 (copy), l_Selected_0 (copy), l_List_0 (copy)
    if not v44 then
        return;
    else
        local v73 = v9:Get();
        if not v73 then
            return;
        else
            v20:ClearAll("GumShop");
            if not v73.Flavors.Blueberry then
                if v40.Kind ~= "Flavors" then
                    v20:Add(l_Frame_0.Tray.Flavors, nil, "GumShop");
                    return;
                elseif l_Selected_0.Label.Text == "Blueberry" then
                    v20:Add(l_Selected_0.Action, nil, "GumShop");
                    return;
                else
                    local l_Blueberry_0 = l_List_0:FindFirstChild("Blueberry");
                    if l_Blueberry_0 then
                        v20:Add(l_Blueberry_0, 155, "GumShop");
                        return;
                    end;
                end;
            elseif not v73.Gum["Stretchy Gum"] then
                if v40.Kind ~= "Gum" then
                    v20:Add(l_Frame_0.Tray.Gum, nil, "GumShop");
                    return;
                elseif l_Selected_0.Label.Text == "Stretchy Gum" then
                    v20:Add(l_Selected_0.Action, nil, "GumShop");
                    return;
                else
                    local l_l_List_0_FirstChild_0 = l_List_0:FindFirstChild("Stretchy Gum");
                    if l_l_List_0_FirstChild_0 then
                        v20:Add(l_l_List_0_FirstChild_0, 155, "GumShop");
                    end;
                end;
            end;
            return;
        end;
    end;
end;
v43 = function(v77) --[[ Line: 214 ]] --[[ Name: setSelection ]]
    -- upvalues: v9 (copy), l_Selected_0 (copy), v11 (copy), v12 (copy), v13 (copy), v18 (copy), v32 (copy), v40 (copy), v7 (copy), v6 (copy), l_Frame_0 (copy), v25 (copy), v30 (copy), v10 (copy), v29 (copy), v45 (copy), l_List_0 (copy), l_TweenService_0 (copy), l_ScreenGui_0 (copy), v42 (ref), v76 (copy)
    local v78 = false;
    local v79 = false;
    local v80 = v9:Get();
    if not v80 then
        return;
    else
        if typeof(v77.Cost) == "number" then
            l_Selected_0.Cost.Label.TextColor3 = v11.Text.Green;
        elseif v77.Cost.Type == "Currency" then
            local v81 = v12[v77.Cost.Currency];
            l_Selected_0.Cost.Label.TextColor3 = v81.Color;
        else
            l_Selected_0.Cost.Label.TextColor3 = Color3.new(1, 1, 1);
        end;
        if typeof(v77.Cost) == "number" then
            l_Selected_0.Cost.Visible = false;
        else
            l_Selected_0.Cost.Visible = true;
            l_Selected_0.Cost.Label.Text = v13(v18:GetAmount(v77.Cost), 1000000);
            v18:UpdateIcon(l_Selected_0.Cost.Icon, v77.Cost);
        end;
        l_Selected_0.Icon.Image = v77.Image;
        l_Selected_0.Label.Text = v77.Name;
        local v82 = (v80.Gum[v77.Name] or v80.Flavors[v77.Name]) ~= nil;
        if typeof(v77.Cost) == "number" then
            local l_Cost_0 = v77.Cost;
            local v84;
            for v85, v86 in v32 do
                if v86.Id == l_Cost_0 then
                    v84 = v85;
                    v78 = true;
                end;
                if v78 then
                    break;
                end;
            end;
            if not v78 then
                v84 = nil;
            end;
            v78 = false;
            if v84 and v80.Passes[v84] then
                v82 = true;
            end;
        end;
        local v87 = true;
        if v80.Bubble.Gum ~= v77.Name then
            v87 = v80.Bubble.Flavor == v77.Name;
        end;
        l_Selected_0.Cost.Visible = not v82;
        l_Selected_0.Owned.Visible = v82 and not v87;
        l_Selected_0.Action.Button.Visible = not v87 or not v82;
        local v88 = (v40.Kind == "Gum" and v7 or v6)[v77.Name];
        l_Frame_0.Locked.Label.Text = ("Unlock this in %*"):format((v25.autoColor(v88.Area or "None", v11.Text.Yellow)));
        l_Frame_0.Locked.Visible = not v77.Unlocked;
        if typeof(v77.Cost) == "number" then
            local l_Cost_1 = v77.Cost;
            local v90;
            for v91, v92 in v32 do
                if v92.Id == l_Cost_1 then
                    v90 = v91;
                    v79 = true;
                end;
                if v79 then
                    break;
                end;
            end;
            if not v79 then
                v90 = nil;
            end;
            v79 = false;
            if v90 and v80.Passes[v90] == true or false then
                v30:Remove(l_Selected_0.Action.Button);
                l_Selected_0.Action.Button.Label.Text = "Equip";
                v10(l_Selected_0.Action.Button, v11.Button.Pink);
            else
                v30:Add(l_Selected_0.Action.Button);
                l_Selected_0.Action.Button.Label.Text = ("%*%*"):format(v29.RobuxUnicode, v45[v77.Cost] or "__");
                v10(l_Selected_0.Action.Button, v11.Button.Orange);
            end;
            l_Selected_0.Cost.Visible = false;
        elseif not v82 then
            v30:Remove(l_Selected_0.Action.Button);
            l_Selected_0.Action.Button.Label.Text = "Buy";
            v10(l_Selected_0.Action.Button, v18:GetOwnedAmount(v80, v77.Cost) < v18:GetAmount(v77.Cost) and v11.Button.Red or v11.Button.Green);
        elseif not v87 then
            l_Selected_0.Action.Button.Label.Text = "Equip";
            v30:Remove(l_Selected_0.Action.Button);
            v10(l_Selected_0.Action.Button, v11.Button.Pink);
        end;
        local v93 = 1;
        for _, v95 in l_List_0:GetChildren() do
            if v95:IsA("Frame") then
                local v96 = v7[v95.Name] or v6[v95.Name];
                local l_Default_0 = v11.Button.Default;
                local v98 = false;
                if v95.Name == v77.Name then
                    v93 = v95.LayoutOrder;
                    l_Default_0 = v11.Button.Green;
                elseif typeof(v96.Cost) == "number" then
                    l_Default_0 = v11.Button.Orange;
                    v98 = true;
                end;
                if v98 then
                    v30:Add(v95.Button);
                else
                    v30:Remove(v95.Button);
                end;
                v10(v95.Button, l_Default_0);
            end;
        end;
        if v77.Name == "Infinity Gum" then
            l_Selected_0.Stat.Text = "Infinite Storage!";
        elseif v40.Kind == "Gum" then
            l_Selected_0.Stat.Text = ("%* Storage"):format((v13(v7[v77.Name].Storage, 500000)));
        else
            l_Selected_0.Stat.Text = ("+%* Bubbles"):format((v13(v6[v77.Name].Bubbles, 500000)));
        end;
        local l_Offset_0 = l_List_0.UIGridLayout.CellSize.X.Offset;
        local v100 = l_Offset_0 * math.floor((v93 - 1) / 3) - l_Offset_0 / 2;
        l_TweenService_0:Create(l_List_0, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
            CanvasPosition = Vector2.new(0, v100 * l_ScreenGui_0.UIScale.Scale)
        }):Play();
        task.defer(function() --[[ Line: 322 ]]
            -- upvalues: l_Selected_0 (ref), l_ScreenGui_0 (ref)
            l_Selected_0.Cost.Label.Size = UDim2.fromOffset(l_Selected_0.Cost.Label.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 50);
        end);
        l_Selected_0.CostTitle.Visible = l_Selected_0.Cost.Visible;
        v42 = v77;
        v76();
        return;
    end;
end;
local function v115() --[[ Line: 333 ]] --[[ Name: update ]]
    -- upvalues: v9 (copy), v40 (copy), v7 (copy), v6 (copy), l_List_0 (copy), v24 (copy), v32 (copy), v11 (copy), v18 (copy), v12 (copy), v42 (ref), v43 (ref), v76 (copy)
    local v101 = false;
    local v102 = v9:Get();
    if not v102 then
        return;
    else
        local v103 = v40.Kind == "Gum" and v7 or v6;
        for _, v105 in l_List_0:GetChildren() do
            if v105:IsA("GuiObject") then
                local v106 = v103[v105.Name];
                local v107 = not not v102 and (not v106.Area or if v24[v106.Area] then v102.WorldsUnlocked[v106.Area] ~= nil else v102.AreasUnlocked[v106.Area] ~= nil);
                local v108 = (v102.Gum[v105.Name] or v102.Flavors[v105.Name]) ~= nil;
                if typeof(v106.Cost) == "number" then
                    local l_Cost_2 = v106.Cost;
                    local v110;
                    for v111, v112 in v32 do
                        if v112.Id == l_Cost_2 then
                            v110 = v111;
                            v101 = true;
                        end;
                        if v101 then
                            break;
                        end;
                    end;
                    if not v101 then
                        v110 = nil;
                    end;
                    v101 = false;
                    if v110 and v102.Passes[v110] then
                        v108 = true;
                    end;
                end;
                local v113 = true;
                if v102.Bubble.Flavor ~= v105.Name then
                    v113 = v102.Bubble.Gum == v105.Name;
                end;
                v105.Button.Label.Text = v107 and v105.Name or "???";
                v105.Button.Cost.Visible = not v108 and v107;
                v105.Button.Equipped.Visible = v113 and v107;
                v105.Button.Owned.Visible = v108 and not v113 and v107;
                v105.Button.Locked.Visible = not v107;
                v105.Button.Icon.ImageColor3 = v107 and Color3.new(1, 1, 1) or Color3.new();
                local l_Label_0 = v105.Button.Cost.Label;
                if typeof(v106.Cost) == "number" then
                    l_Label_0.TextColor3 = v11.Text.Green;
                elseif v18:GetOwnedAmount(v102, v106.Cost) < v18:GetAmount(v106.Cost) then
                    l_Label_0.TextColor3 = v11.Color.Red;
                elseif v106.Cost.Type == "Currency" then
                    l_Label_0.TextColor3 = v12[v106.Cost.Currency].Color;
                else
                    l_Label_0.TextColor3 = Color3.new(1, 1, 1);
                end;
            end;
        end;
        if v42 then
            v43(v42);
        end;
        v76();
        return;
    end;
end;
local function v128(v116, v117) --[[ Line: 388 ]] --[[ Name: open ]]
    -- upvalues: v9 (copy), v72 (copy), v58 (copy), l_List_0 (copy), v29 (copy), v45 (copy), v10 (copy), v11 (copy), v18 (copy), v13 (copy), l_HttpService_0 (copy), l_ScreenGui_0 (copy), v7 (copy), v6 (copy), v43 (ref), v24 (copy), l_Frame_0 (copy), v40 (copy), v41 (ref), v115 (copy)
    local v118 = v9:Get();
    if not v118 then
        return;
    else
        local v119 = v72(v116, v117);
        for v120, v121 in v119 do
            local v122 = v58:Get();
            v122.Name = v121.Name;
            v122.Button.Icon.Image = v121.Image;
            v122.LayoutOrder = v120;
            v122.ZIndex = 100 - v120;
            v122.Parent = l_List_0;
            if typeof(v121.Cost) == "number" then
                v122.Button.Cost.UIPadding.PaddingRight = UDim.new();
                v122.Button.Cost.Icon.Visible = false;
                v122.Button.Cost.Label.Text = ("%*%*"):format(v29.RobuxUnicode, v45[v121.Cost] or "__");
                v10(v122.Button, v11.Button.Orange);
            else
                local l_v18_Amount_0 = v18:GetAmount(v121.Cost);
                v122.Button.Cost.Icon.Visible = true;
                v122.Button.Cost.Label.Text = v13(l_v18_Amount_0, 1000000);
                v122.Button.Cost.UIPadding.PaddingRight = UDim.new(0, 18);
                v122:SetAttribute("Cost", l_HttpService_0:JSONEncode(v121.Cost));
                v18:UpdateIcon(v122.Button.Cost.Icon, v121.Cost);
                v10(v122.Button, v11.Button.Default);
            end;
            task.defer(function() --[[ Line: 418 ]]
                -- upvalues: v122 (copy), l_ScreenGui_0 (ref)
                v122.Button.Cost.Label.Size = UDim2.fromOffset(v122.Button.Cost.Label.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 30);
            end);
        end;
        local v124 = v117 == "Gum" and v118.Bubble.Gum or v118.Bubble.Flavor;
        local v125 = v7[v124] or v6[v124];
        if v125 then
            task.defer(v43, {
                Name = v124, 
                Cost = v125.Cost, 
                Image = v125.Image, 
                Unlocked = not not v118 and (not v125.Area or if v24[v125.Area] then v118.WorldsUnlocked[v125.Area] ~= nil else v118.AreasUnlocked[v125.Area] ~= nil)
            });
        elseif v119[1] then
            task.defer(v43, v119[1]);
        end;
        for _, v127 in l_Frame_0.Tray:GetChildren() do
            if v127:IsA("Frame") then
                v10(v127.Button, v127.Name == v117 and v11.Button.Blue or v11.Button.Inactive);
            end;
        end;
        l_Frame_0.Title.Label.Text = v117;
        l_Frame_0.Title.Label.Highlight.Text = v117;
        l_Frame_0.Title.Icon.Image = v117 == "Flavors" and v6["Bubble Gum"].Image or v7["Basic Gum"].Image;
        v40.Kind = v117;
        v41 = v116;
        v58:Done();
        task.defer(v115);
        return;
    end;
end;
local function v130(v129) --[[ Line: 458 ]] --[[ Name: setTutorial ]]
    -- upvalues: v44 (ref), v20 (copy), v115 (copy)
    if v44 ~= v129 then
        v44 = v129;
        v20:ClearAll();
        v115();
    end;
end;
local v131 = {
    "Bubble", 
    "Flavors", 
    "Gum", 
    "Passes"
};
for _, v133 in v23:GetDataKeys() do
    table.insert(v131, v133);
end;
v22("GumShop", v131, v115);
for _, v135 in l_Frame_0.Tray:GetChildren() do
    if v135:IsA("Frame") then
        v15(v135.Button, function() --[[ Line: 476 ]]
            -- upvalues: v128 (copy), v41 (ref), v135 (copy)
            v128(v41, v135.Name);
        end);
    end;
end;
for _, v137 in {
    v7, 
    v6
} do
    for _, v139 in v137 do
        if typeof(v139.Cost) == "number" then
            v28:ConnectGamepassChanged(v139.Cost, function(v140) --[[ Line: 485 ]]
                -- upvalues: v45 (copy), v139 (copy)
                if v140 and v140.PriceInRobux then
                    v45[v139.Cost] = v140.PriceInRobux;
                end;
            end);
        end;
    end;
end;
v14(l_List_0, l_List_0.UIGridLayout);
v15(l_Selected_0.Action.Button, function() --[[ Line: 496 ]]
    -- upvalues: v9 (copy), l_Selected_0 (copy), v7 (copy), v6 (copy), v32 (copy), v31 (copy), l_MarketplaceService_0 (copy), l_LocalPlayer_0 (copy), v18 (copy), v27 (copy), v40 (copy), v26 (copy), v33 (copy), v16 (copy)
    local v141 = false;
    local v142 = v9:Get();
    if not v142 then
        return;
    else
        local l_Text_0 = l_Selected_0.Label.Text;
        local v144 = v7[l_Text_0] or v6[l_Text_0];
        if not v144 then
            return;
        else
            if typeof(v144.Cost) == "number" then
                local l_Cost_3 = v144.Cost;
                local v146;
                for v147, v148 in v32 do
                    if v148.Id == l_Cost_3 then
                        v146 = v147;
                        v141 = true;
                    end;
                    if v141 then
                        break;
                    end;
                end;
                if not v141 then
                    v146 = nil;
                end;
                v141 = false;
                if v146 and not v142.Passes[v146] then
                    v31:Show();
                    return l_MarketplaceService_0:PromptGamePassPurchase(l_LocalPlayer_0, v144.Cost);
                end;
            elseif l_Selected_0.Action.Button.Label.Text == "Buy" and v18:GetOwnedAmount(v142, v144.Cost) < v18:GetAmount(v144.Cost) then
                local v150 = v27.fromNotEnough(v142, v144.Cost, function(v149) --[[ Line: 516 ]]
                    -- upvalues: v40 (ref)
                    return (("You need %* to purchase this %*!"):format(v149, v40.Kind == "Flavors" and "Flavor" or v40.Kind));
                end);
                if v40.Kind == "Gum" then
                    v150:Gamepass("Infinity Gum");
                end;
                return v26(v150:Build());
            end;
            if l_Selected_0.Action.Button.Label.Text == "Buy" then
                task.delay(0, v33, "CurrencyPickup");
                task.delay(0.14285714285714285, v33, "CurrencyPickup");
                v33("GumBuy");
                v16:FireServer("GumShopPurchase", l_Text_0);
                return;
            elseif v7[l_Text_0] then
                v16:FireServer("UpdateStorage", l_Text_0);
                return;
            else
                if v6[l_Text_0] then
                    v16:FireServer("UpdateFlavor", l_Text_0);
                end;
                return;
            end;
        end;
    end;
end);
v10(l_Frame_0.Close, v11.Button.Red);
v15(l_Frame_0.Close, function() --[[ Line: 541 ]]
    -- upvalues: v17 (copy)
    v17:Close();
end);
v17:BindOnOpened("GumShop", function() --[[ Line: 546 ]]
    -- upvalues: v33 (copy)
    v33("ShopOpen");
end);
v40.open = v128;
v40.setTutorial = v130;
return v40;
ModuleScript: Index
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local l_RunService_0 = game:GetService("RunService");
local l_TweenService_0 = game:GetService("TweenService");
local l_HttpService_0 = game:GetService("HttpService");
local v5 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v7 = require(l_ReplicatedStorage_0.Shared.Palette);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v9 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v10 = require(l_ReplicatedStorage_0.Shared.Data.Eggs);
local v11 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v12 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v13 = require(l_ReplicatedStorage_0.Shared.Data.Pets);
local v14 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatPercent);
local v15 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v16 = require(l_ReplicatedStorage_0.Shared.Constants);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Shiny);
local v18 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v19 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v20 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v21 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Table.Array);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.Animations.Book);
local v23 = require(l_ReplicatedStorage_0.Client.Effects.HatchEgg);
local v24 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v25 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v27 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.BuffUtil);
local v28 = require(l_ReplicatedStorage_0.Shared.Data.Worlds);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v30 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v31 = require(l_ReplicatedStorage_0.Shared.Utils.IndexUtil);
local v32 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v33 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.PetUtil);
local _ = require(l_ReplicatedStorage_0.Shared.Utils.GetPetChanceColor);
local v35 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.QuestUtil);
local v36 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local v37 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.BountyUtil);
local v38 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v39 = require(l_ReplicatedStorage_0.Client.Gui.Frames.TradeHistory);
local v40 = require(l_ReplicatedStorage_0.Shared.Utils.WorldUtil);
local v41 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Table.CountKeys);
local v42 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v43 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v44 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Animations.SetFade);
local v45 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v46 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v47 = require(l_ReplicatedStorage_0.Shared.Data.Events);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Index_0 = l_ScreenGui_0.Index;
local v51 = "Normal";
local v52 = "The Overworld";
local v53 = "Index";
local l_Index_1 = l_Index_0.Container.Left.Index;
local l_Rewards_0 = l_Index_1.ScrollingFrame.Rewards;
local l_Mythics_0 = l_Index_0.Container.Left.Mythics;
local l_Mythics_1 = l_Index_0.Container.Right.Mythics;
local l_Events_0 = l_Index_0.Container.Left.Events;
local l_Events_1 = l_Index_0.Container.Right.Events;
local l_Index_2 = l_Index_0.Container.Right.Index;
local l_Index_3 = workspace.Worlds["The Overworld"].Index;
local l_Template_0 = l_Index_1.ScrollingFrame.Template;
local l_Template_1 = l_Template_0.Pets.Template;
l_Template_0.Parent = nil;
l_Template_1.Parent = nil;
local l_Template_2 = l_Index_2.Template;
l_Template_2.Parent = nil;
local l_Template_3 = l_Events_1.List.Template;
local l_Template_4 = l_Events_0.ScrollingFrame.Template;
l_Template_3.Parent = nil;
l_Template_4.Parent = nil;
local v67 = nil;
local v91 = v9.new(function() --[[ Line: 91 ]]
    -- upvalues: l_Template_1 (copy), v11 (copy), v51 (ref), v19 (copy), v20 (copy), v33 (copy), v21 (copy), v24 (copy), v25 (copy), v7 (copy), v8 (copy), v23 (copy), v5 (copy)
    local v68 = l_Template_1:Clone();
    local function _() --[[ Line: 94 ]] --[[ Name: getName ]]
        -- upvalues: v11 (ref), v51 (ref), v68 (copy)
        local v69 = v11:Get();
        if not v69 then
            return;
        else
            local v70 = ("%*%*"):format(v51 == "Shiny" and "Shiny " or "", v68.Name);
            if not v69.Discovered[v70] then
                return;
            else
                return v70;
            end;
        end;
    end;
    v19:OnEnter(v68.Button, function() --[[ Line: 106 ]]
        -- upvalues: v11 (ref), v51 (ref), v68 (copy), v20 (ref), v33 (ref), v21 (ref), v24 (ref), v25 (ref), v7 (ref)
        local v72 = v11:Get();
        if not v72 then
            return;
        else
            local v73 = v11:Get();
            local v74;
            if not v73 then
                v74 = nil;
            else
                local v75 = ("%*%*"):format(v51 == "Shiny" and "Shiny " or "", v68.Name);
                v74 = if not v73.Discovered[v75] then nil else v75;
            end;
            if not v74 then
                return;
            else
                v73 = false;
                local v76 = false;
                local l_v74_0 = v74;
                if string.find(v74, "Shiny ") then
                    v73 = true;
                    v74 = string.gsub(v74, "Shiny ", "");
                end;
                if string.find(v74, "Mythic ") then
                    v76 = true;
                    v74 = string.gsub(v74, "Mythic ", "");
                end;
                local v78 = {
                    Type = "Pet", 
                    Name = v74, 
                    Shiny = v73, 
                    Mythic = v76
                };
                local v79 = v20.fromPet(v78);
                local _ = v33:GetChance(v78);
                local v81 = v21.from(v79.Elements):slice(0, 4):table();
                table.insert(v81, {
                    Type = "Padding", 
                    Size = 6
                });
                table.insert(v81, v79.Elements[#v79.Elements]);
                table.insert(v81, {
                    Type = "Padding", 
                    Size = 16, 
                    Line = true
                });
                table.insert(v81, {
                    Type = "Text", 
                    Size = 24, 
                    Text = v24.autoStroke((("You've hatched %*"):format((v24.autoColor(v25(v72.Discovered[l_v74_0] or 0), v7.Text.Cyan)))))
                });
                table.insert(v81, {
                    Type = "Padding", 
                    Size = 8
                });
                table.insert(v81, {
                    Type = "Text", 
                    Size = 24, 
                    Text = v24.autoStroke("Click to replay hatch!"), 
                    Callback = function(v82) --[[ Line: 153 ]] --[[ Name: Callback ]]
                        v82.TextColor3 = Color3.fromRGB(96, 218, 255);
                    end
                });
                v79.Elements = v81;
                return v79;
            end;
        end;
    end);
    v8(v68.Button, function() --[[ Line: 161 ]]
        -- upvalues: v11 (ref), v51 (ref), v68 (copy), v23 (ref), v5 (ref)
        local v83 = v11:Get();
        local v84;
        if not v83 then
            v84 = nil;
        else
            local v85 = ("%*%*"):format(v51 == "Shiny" and "Shiny " or "", v68.Name);
            v84 = if not v83.Discovered[v85] then nil else v85;
        end;
        if not v84 then
            return;
        else
            v83 = false;
            local v86 = false;
            if string.find(v84, "Shiny ") then
                v83 = true;
                v84 = string.gsub(v84, "Shiny ", "");
            end;
            if string.find(v84, "Mythic ") then
                v86 = true;
                v84 = string.gsub(v84, "Mythic ", "");
            end;
            v23:Play({
                Pets = {
                    {
                        New = false, 
                        Deleted = false, 
                        Pet = {
                            Type = "Pet", 
                            Name = v84, 
                            Shiny = v83, 
                            Mythic = v86
                        }
                    }
                }, 
                Name = v68:GetAttribute("Egg") or "Common Egg", 
                Speed = 1
            });
            v5:Open("Index");
            return;
        end;
    end, function() --[[ Line: 191 ]]
        -- upvalues: v11 (ref), v51 (ref), v68 (copy)
        local v87 = v11:Get();
        local v88;
        if not v87 then
            v88 = nil;
        else
            local v89 = ("%*%*"):format(v51 == "Shiny" and "Shiny " or "", v68.Name);
            v88 = if not v87.Discovered[v89] then nil else v89;
        end;
        return v88 ~= nil;
    end);
    return v68;
end, function(v90) --[[ Line: 196 ]]
    -- upvalues: v15 (copy), v17 (copy)
    v15.None(v90.Background);
    v15.None(v90.Button.Icon);
    v17:Remove(v90.Effect);
end);
local v96 = v9.new(function() --[[ Line: 202 ]]
    -- upvalues: l_Template_0 (copy), v19 (copy), l_HttpService_0 (copy), v20 (copy), v6 (copy), v7 (copy), v8 (copy), v30 (copy), v51 (ref)
    local v92 = l_Template_0:Clone();
    v19:OnEnter(v92.Reward.Hover, function() --[[ Line: 205 ]]
        -- upvalues: v92 (copy), l_HttpService_0 (ref), v20 (ref)
        local l_v92_Attribute_0 = v92:GetAttribute("Item");
        if not l_v92_Attribute_0 then
            return;
        else
            local v94 = l_HttpService_0:JSONDecode(l_v92_Attribute_0);
            if not v94 then
                return;
            else
                return v20.fromItem(v94);
            end;
        end;
    end);
    v6(v92.Claim.Button, v7.Button.Green);
    v8(v92.Claim.Button, function() --[[ Line: 218 ]]
        -- upvalues: v30 (ref), v92 (copy), v51 (ref)
        v30:FireServer("EggPrizeClaim", v92.Name, v51 == "Shiny");
    end);
    return v92;
end, function(v95) --[[ Line: 223 ]]
    -- upvalues: v15 (copy)
    v15.None(v95.Egg.Background);
    v15.None(v95.Egg.Label);
end);
local v101 = v9.new(function() --[[ Line: 229 ]]
    -- upvalues: l_Template_2 (copy), v16 (copy), v27 (copy), v8 (copy), v52 (ref), v67 (ref)
    local v97 = l_Template_2:Clone();
    for v98, v99 in v16.IndexBuffs do
        local l_FirstChild_0 = v97.Button.Buffs:FindFirstChild(v98);
        if l_FirstChild_0 then
            l_FirstChild_0.Label.Text = v27:Format("BUFF", v99);
        end;
    end;
    v8(v97.Button, function() --[[ Line: 239 ]]
        -- upvalues: v52 (ref), v97 (copy), v67 (ref)
        v52 = v97.Name;
        v67();
    end, function() --[[ Line: 242 ]]
        -- upvalues: v97 (copy)
        return not v97.Cover.Visible;
    end);
    return v97;
end);
local v102 = v9.new(function() --[[ Line: 250 ]]
    -- upvalues: l_Template_3 (copy)
    return l_Template_3:Clone();
end);
local v108 = v9.new(function() --[[ Line: 254 ]]
    -- upvalues: l_Template_4 (copy), v6 (copy), v7 (copy), v8 (copy), v30 (copy), v51 (ref), v19 (copy), l_HttpService_0 (copy), v20 (copy)
    local v103 = l_Template_4:Clone();
    v6(v103.Claim.Button, v7.Button.Green);
    v8(v103.Claim.Button, function() --[[ Line: 258 ]]
        -- upvalues: v30 (ref), v103 (copy), v51 (ref)
        v30:FireServer("ClaimEventPrize", v103.Name, v51);
    end);
    for _, v105 in v103.Reward:GetChildren() do
        if v105:IsA("Frame") then
            v19:OnEnter(v105.Hover, function() --[[ Line: 264 ]]
                -- upvalues: v105 (copy), l_HttpService_0 (ref), v20 (ref)
                local l_v105_Attribute_0 = v105:GetAttribute("Reward");
                if not l_v105_Attribute_0 then
                    return;
                else
                    local v107 = l_HttpService_0:JSONDecode(l_v105_Attribute_0);
                    if not v107 then
                        return;
                    else
                        return v20.fromItem(v107);
                    end;
                end;
            end);
        end;
    end;
    return v103;
end);
local function _(v109) --[[ Line: 282 ]] --[[ Name: formatPercent ]]
    -- upvalues: v14 (copy), v25 (copy)
    if v109 > 2.5E-4 then
        return v14(v109, true);
    else
        local v110 = math.ceil(100 / v109);
        return (("1/%*"):format((v25(v110, 1000, true))));
    end;
end;
local l_Notification_0 = l_ScreenGui_0.HUD.Right.Index.Button.Notification;
v11:ConnectDataChanged({
    "EggPrizesClaimed", 
    "EggsOpened"
}, function() --[[ Line: 292 ]] --[[ Name: updateClaimCount ]]
    -- upvalues: v11 (copy), v10 (copy), v31 (copy), v51 (ref), l_Notification_0 (copy)
    local v113 = v11:Get();
    if not v113 then
        return;
    else
        local v114 = 0;
        for v115, v116 in v10 do
            if v116.World then
                local v117 = v113.EggsOpened[v115] ~= nil;
                if v117 then
                    local l_v31_EggCompleted_0 = v31:GetEggCompleted(v113, v116.World, v51, v115);
                    local v119 = math.max(0, l_v31_EggCompleted_0.Total - l_v31_EggCompleted_0.Found);
                    if v117 and v119 == 0 and not v113.EggPrizesClaimed[v115] then
                        v114 = v114 + 1;
                    end;
                end;
            end;
        end;
        l_Notification_0.Visible = v114 > 0;
        l_Notification_0.Label.Text = v114 > 9 and "!" or tostring(v114);
        return;
    end;
end);
local function v150() --[[ Line: 318 ]] --[[ Name: updateEggPage ]]
    -- upvalues: v11 (copy), v10 (copy), v52 (ref), v96 (copy), l_Index_1 (copy), v17 (copy), v31 (copy), v51 (ref), v45 (copy), l_HttpService_0 (copy), v12 (copy), v44 (copy), v13 (copy), v91 (copy), v33 (copy), v14 (copy), v25 (copy), v15 (copy), v16 (copy), v28 (copy), l_Rewards_0 (copy), v32 (copy)
    local v120 = v11:Get();
    if not v120 then
        return;
    else
        local v121 = 0;
        local v122 = 0;
        for v123, v124 in v10 do
            if v124.World == v52 then
                local v125 = v120.EggsOpened[v123] ~= nil;
                local v126 = v96:Get();
                v126.Name = v123;
                v126.LayoutOrder = v124.LayoutOrder + (v125 and 0 or 1000);
                v126.Egg.Icon.Image = v124.Image;
                v126.Parent = l_Index_1.ScrollingFrame;
                v17:Add(v126.Egg.Effect);
                if v124.Reward and v124.World then
                    local l_v31_EggCompleted_1 = v31:GetEggCompleted(v120, v124.World, v51, v123);
                    local v128 = math.max(0, l_v31_EggCompleted_1.Total - l_v31_EggCompleted_1.Found);
                    local v129 = ("%*%*"):format(v51 == "Shiny" and "S" or "", v123);
                    local v130 = v125 and v128 == 0 and not v120.EggPrizesClaimed[v129];
                    local v131 = v51 == "Shiny" and v124.Reward.Shiny or v124.Reward.Normal;
                    if v131.Type == "Currency" then
                        local l_v45_CurrencyMultiplier_0 = v45:GetCurrencyMultiplier(v120, v131.Currency, true);
                        v131 = {
                            Type = v131.Type, 
                            Currency = v131.Currency, 
                            Amount = math.floor(v131.Amount * l_v45_CurrencyMultiplier_0)
                        };
                    end;
                    v126.Claim.Visible = v130;
                    v126.Reward.Visible = v125;
                    v126.Size = UDim2.new(1, -5, 0, 155 + (v130 and 60 or 0));
                    v126.Reward.Title.Visible = not v120.EggPrizesClaimed[v129];
                    v126:SetAttribute("Item", l_HttpService_0:JSONEncode(v131));
                    v12:UpdateIcon(v126.Reward, v131);
                    v12:FormatAmount(v126.Reward.Amount, v131);
                    v44(v126.Reward, v120.EggPrizesClaimed[v129] and 0.5 or 0, nil, {
                        "ImageButton", 
                        "Frame"
                    });
                else
                    v126.Claim.Visible = false;
                    v126.Reward.Visible = false;
                end;
                local v133 = 0;
                for v134, v135 in v124.Pool do
                    if v135.Item.Type == "Pet" then
                        local v136 = v13[v135.Item.Name];
                        local v137 = v120.Discovered[("%*%*"):format(v51 == "Normal" and "" or "Shiny ", v135.Item.Name)] ~= nil;
                        if v136.Rarity ~= "Secret" or v137 then
                            local v138 = {
                                Type = "Pet", 
                                Name = v135.Item.Name, 
                                Shiny = v51 == "Shiny"
                            };
                            local v139 = v91:Get();
                            v139.Name = v135.Item.Name;
                            v139.LayoutOrder = v134 + (v137 and 0 or 100);
                            v139.Button.Label.Visible = v137;
                            local l_Label_0 = v139.Button.Label;
                            local l_v33_Chance_1 = v33:GetChance(v138);
                            local v142;
                            if l_v33_Chance_1 > 2.5E-4 then
                                v142 = v14(l_v33_Chance_1, true);
                            else
                                local v143 = math.ceil(100 / l_v33_Chance_1);
                                v142 = ("1/%*"):format((v25(v143, 1000, true)));
                            end;
                            l_Label_0.Text = v142;
                            v139.Parent = v126.Pets;
                            v139:SetAttribute("Egg", v123);
                            v12:UpdateIcon(v139.Button.Icon, v138);
                            if v137 then
                                v133 = v133 + 1;
                            end;
                            l_Label_0 = v136.Rarity or "Common";
                            if l_Label_0 == "Legendary" then
                                v15.Cycle(v139.Button.Label, "Rainbow", {
                                    Speed = 0.5
                                });
                            else
                                v15.None(v139.Button.Label);
                                v139.Button.Label.TextColor3 = v16.RarityColors[l_Label_0];
                            end;
                            if v51 == "Shiny" then
                                if v137 then
                                    v15.Cycle(v139.Button.Icon.Label, "ShinyLight", {
                                        Speed = 0.5
                                    });
                                end;
                                v17:Add(v139.Effect);
                                v15.Shift(v139.Background, "Shiny", {
                                    Speed = 0.5
                                });
                            else
                                v15.None(v139.Button.Icon.Label);
                                v17:Remove(v139.Effect);
                                v15.None(v139.Background);
                            end;
                            if v136.Rarity ~= "Secret" then
                                v122 = v122 + 1;
                            end;
                            v139.Size = UDim2.fromOffset(75, 75);
                            v139.Background.ImageColor3 = v51 == "Shiny" and Color3.new(1, 1, 1) or Color3.fromRGB(235, 178, 155);
                            v139.Button.Icon.Label.ImageColor3 = v137 and Color3.new(1, 1, 1) or Color3.new();
                        end;
                    end;
                end;
                if v51 == "Shiny" and v125 then
                    v17:Add(v126.Egg.Effect);
                    v15.Shift(v126.Egg.Background, "Shiny", {
                        Speed = 0.5
                    });
                    v15.Cycle(v126.Egg.Icon, "ShinyLight", {
                        Speed = 0.5
                    });
                else
                    v17:Remove(v126.Egg.Effect);
                    v15.None(v126.Egg.Background);
                    v15.None(v126.Egg.Icon);
                end;
                if not v125 then
                    v126.Egg.Label.Text = "???";
                    v126.Egg.Icon.ImageColor3 = Color3.new();
                else
                    v126.Egg.Icon.ImageColor3 = Color3.new(1, 1, 1);
                    v126.Egg.Label.Text = string.gsub(v123, " Egg", "");
                end;
                local v144 = 0;
                for _, v146 in v124.Pool do
                    if v12:GetRarity(v146.Item) ~= "Secret" then
                        v144 = v144 + 1;
                    end;
                end;
                local v147 = v144 <= v133;
                v126.Egg.Amount.Visible = not v147 and v125;
                v126.Egg.Completed.Visible = v147 and v125;
                v126.Egg.Amount.Label.Text = ("%*/%*"):format(v133, v144);
                v121 = v121 + v133;
            end;
        end;
        local v148 = table.clone(v28[v52].Reward);
        if v51 == "Shiny" then
            v148.Mythic = true;
        end;
        v12:UpdateIcon(l_Rewards_0.Content.Pet.Button.Icon, v148);
        local v149 = v120.ClaimedIndex[("%*%*"):format(v51 == "Normal" and "" or "Shiny", v52)];
        if v122 <= v121 then
            if not v149 then
                l_Rewards_0.Bar.Visible = false;
                l_Rewards_0.Claim.Visible = true;
                l_Rewards_0.Size = UDim2.new(1, -5, 0, 270);
            else
                l_Rewards_0.Bar.Visible = true;
                l_Rewards_0.Bar.Fill.BackgroundColor3 = Color3.new(0, 1, 0);
                l_Rewards_0.Bar.Fill.UIGradient.Enabled = false;
                l_Rewards_0.Claim.Visible = false;
                l_Rewards_0.Size = UDim2.new(1, -5, 0, 240);
            end;
        else
            l_Rewards_0.Bar.Visible = true;
            l_Rewards_0.Claim.Visible = false;
            l_Rewards_0.Bar.Fill.BackgroundColor3 = Color3.new(1, 1, 1);
            l_Rewards_0.Bar.Fill.UIGradient.Enabled = true;
            l_Rewards_0.Size = UDim2.new(1, -5, 0, 240);
        end;
        l_Rewards_0.Content.Pet.Completed.Visible = v149;
        l_Rewards_0.Content.Pet.Button.Icon.Label.ImageTransparency = v149 and 0.25 or 0;
        l_Rewards_0.Bar.Fill.Visible = v121 > 0;
        l_Rewards_0.Bar.Fill.Size = UDim2.new(math.min(1, v121 / v122), 0, 1, 6);
        l_Rewards_0.Bar.Label.Text = ("%* / %* Discovered"):format(v32(v121), (v32(v122)));
        l_Index_1.Label.Text = ("~ %* ~"):format(v52);
        v91:Done();
        v96:Done();
        return;
    end;
end;
local function v174() --[[ Line: 501 ]] --[[ Name: updateMythicPage ]]
    -- upvalues: v11 (copy), v10 (copy), v13 (copy), v31 (copy), v91 (copy), v33 (copy), v14 (copy), v25 (copy), v12 (copy), v15 (copy), v16 (copy), v17 (copy), l_Mythics_0 (copy), v32 (copy)
    local v151 = false;
    local v152 = v11:Get();
    if not v152 then
        return;
    else
        local v153 = 0;
        local v154 = 0;
        local v155 = 0;
        local v156 = {};
        for v157, v158 in v10 do
            if v158.World then
                for _, v160 in v158.Pool do
                    if v160.Item.Type == "Pet" then
                        local v161 = v13[v160.Item.Name];
                        if (v161.Rarity == "Legendary" or v161.Rarity == "Secret") and v161.Images.Mythic then
                            for v162 = 1, 2 do
                                local v163 = v162 == 1 and v31:HasMythic(v152, v160.Item.Name) or v31:HasShinyMythic(v152, v160.Item.Name);
                                if v161.Rarity ~= "Secret" or v163 then
                                    local v164 = v91:Get();
                                    local v165 = {
                                        Type = "Pet", 
                                        Name = v160.Item.Name, 
                                        Shiny = v162 == 2, 
                                        Mythic = true
                                    };
                                    local l_v33_Chance_2 = v33:GetChance(v165);
                                    local l_Label_1 = v164.Button.Label;
                                    local v168;
                                    if v163 then
                                        if l_v33_Chance_2 > 2.5E-4 then
                                            v168 = v14(l_v33_Chance_2, true);
                                        else
                                            local v169 = math.ceil(100 / l_v33_Chance_2);
                                            v168 = ("1/%*"):format((v25(v169, 1000, true)));
                                        end;
                                        v151 = v168;
                                    end;
                                    if not v151 then
                                        v168 = "???";
                                    end;
                                    v151 = false;
                                    l_Label_1.Text = v168;
                                    v164.Name = v33:GetName(v165);
                                    v164:SetAttribute("Egg", v157);
                                    v12:UpdateIcon(v164.Button.Icon, v165);
                                    table.insert(v156, {
                                        Element = v164, 
                                        Discovered = v163, 
                                        Chance = l_v33_Chance_2
                                    });
                                    if v161.Rarity == "Legendary" then
                                        v15.Cycle(v164.Button.Label, v165.Shiny and "Shiny" or "Mythic", {
                                            Speed = 0.5
                                        });
                                    else
                                        v15.None(v164.Button.Label);
                                        v164.Button.Label.TextColor3 = v16.RarityColors[v161.Rarity];
                                    end;
                                    if v165.Shiny then
                                        if v163 then
                                            v15.Cycle(v164.Button.Icon.Label, "ShinyLight", {
                                                Speed = 0.5
                                            });
                                        end;
                                        v17:Add(v164.Effect);
                                        v15.Cycle(v164.Background, "Shiny", {
                                            Speed = 0.5
                                        });
                                    else
                                        v17:Remove(v164.Effect);
                                        v15.Cycle(v164.Background, "PotionMythic", {
                                            Speed = 0.5
                                        });
                                        v15.Cycle(v164.Button.Icon.Label, "MythicLight", {
                                            Speed = 0.75
                                        });
                                    end;
                                    if v163 then
                                        v155 = v155 + 1;
                                    end;
                                    if v161.Rarity ~= "Secret" then
                                        v154 = v154 + 1;
                                    end;
                                    if not v163 then
                                        v15.None(v164.Button.Icon.Label);
                                        v164.Button.Icon.Label.ImageColor3 = Color3.new();
                                    else
                                        v164.Button.Icon.Label.ImageColor3 = Color3.new(1, 1, 1);
                                    end;
                                    v164.Size = UDim2.fromOffset(100, 100);
                                    v164.Background.ImageColor3 = Color3.new(1, 1, 1);
                                    v164.Parent = l_Mythics_0.ScrollingFrame;
                                    v153 = v153 + 1;
                                end;
                            end;
                        end;
                    end;
                end;
            end;
        end;
        table.sort(v156, function(v170, v171) --[[ Line: 601 ]]
            if v170.Discovered ~= v171.Discovered then
                return v170.Discovered;
            else
                return v170.Chance > v171.Chance;
            end;
        end);
        for v172, v173 in v156 do
            v173.Element.LayoutOrder = v172;
        end;
        l_Mythics_0.Footer.Bar.Fill.Visible = v155 > 0;
        l_Mythics_0.Footer.Bar.Label.Text = ("%* / %* Discovered"):format(v32(v155), (v32(v154)));
        l_Mythics_0.Footer.Bar.Fill.Size = UDim2.new(math.min(1, v155 / v154), 0, 1, 6);
        v91:Done();
        table.clear(v156);
        return;
    end;
end;
local function v207() --[[ Line: 621 ]] --[[ Name: updateEventsPage ]]
    -- upvalues: v11 (copy), v47 (copy), v108 (copy), v51 (ref), l_HttpService_0 (copy), v12 (copy), v10 (copy), v13 (copy), v91 (copy), v33 (copy), v14 (copy), v25 (copy), v15 (copy), v16 (copy), v17 (copy), v102 (copy), l_Events_1 (copy), l_Events_0 (copy), l_ScreenGui_0 (copy)
    local v175 = v11:Get();
    if not v175 then
        return;
    else
        local v176 = 0;
        for v177, v178 in v47 do
            local _ = {};
            local v180 = 0;
            local v181 = 0;
            local v182 = 0;
            local v183 = v108:Get();
            v183.Name = v177;
            v183.Label.Text = v178.DisplayName;
            v183.Label.TextColor3 = v178.Color;
            v183.LayoutOrder = v178.LayoutOrder;
            local v184 = v178.Rewards[v51];
            for _, v186 in v183.Reward:GetChildren() do
                if v186:IsA("Frame") then
                    local v187 = tonumber((string.sub(v186.Name, 5)));
                    if v187 then
                        local v188 = v184[v187];
                        if v188 then
                            v186:SetAttribute("Reward", l_HttpService_0:JSONEncode(v188));
                            v12:UpdateIcon(v186, v188);
                            v12:FormatAmount(v186.Amount, v188);
                            v186.Visible = true;
                        else
                            v186.Visible = false;
                        end;
                    end;
                end;
            end;
            local v189 = {};
            for _, v191 in v178.Eggs do
                for _, v193 in v10[v191].Pool do
                    if v193.Item.Type == "Pet" then
                        table.insert(v189, {
                            Type = "Pet", 
                            Name = v193.Item.Name, 
                            Shiny = v51 == "Shiny"
                        });
                    end;
                end;
                v182 = v182 + (v175.EggsOpened[v191] or 0);
            end;
            table.sort(v189, function(v194, v195) --[[ Line: 681 ]]
                -- upvalues: v13 (ref)
                return v13[v194.Name].Chance > v13[v195.Name].Chance;
            end);
            for v196, v197 in v189 do
                local v198 = v13[v197.Name];
                local v199 = v175.Discovered[("%*%*"):format(v51 == "Normal" and "" or "Shiny ", v197.Name)] ~= nil;
                if v198.Rarity ~= "Secret" or v199 then
                    local v200 = v91:Get();
                    v200.Name = v197.Name;
                    v200.LayoutOrder = v196 + (v199 and 0 or 100);
                    v200.Button.Label.Visible = v199;
                    local l_Label_2 = v200.Button.Label;
                    local l_v33_Chance_3 = v33:GetChance(v197);
                    local v203;
                    if l_v33_Chance_3 > 2.5E-4 then
                        v203 = v14(l_v33_Chance_3, true);
                    else
                        local v204 = math.ceil(100 / l_v33_Chance_3);
                        v203 = ("1/%*"):format((v25(v204, 1000, true)));
                    end;
                    l_Label_2.Text = v203;
                    v200.Parent = v183.Pets;
                    v200:SetAttribute("Egg", v198.Egg or "Common Egg");
                    v12:UpdateIcon(v200.Button.Icon, v197);
                    if v199 then
                        v180 = v180 + 1;
                    end;
                    l_Label_2 = v198.Rarity or "Common";
                    if l_Label_2 == "Legendary" then
                        v15.Cycle(v200.Button.Label, "Rainbow", {
                            Speed = 0.5
                        });
                    else
                        v15.None(v200.Button.Label);
                        v200.Button.Label.TextColor3 = v16.RarityColors[l_Label_2];
                    end;
                    if v51 == "Shiny" then
                        if v199 then
                            v15.Cycle(v200.Button.Icon.Label, "ShinyLight", {
                                Speed = 0.5
                            });
                        end;
                        v17:Add(v200.Effect);
                        v15.Shift(v200.Background, "Shiny", {
                            Speed = 0.5
                        });
                    else
                        v15.None(v200.Button.Icon.Label);
                        v17:Remove(v200.Effect);
                        v15.None(v200.Background);
                    end;
                    if v198.Rarity ~= "Secret" then
                        v181 = v181 + 1;
                    end;
                    v200.Size = UDim2.fromOffset(75, 75);
                    v200.Background.ImageColor3 = v51 == "Shiny" and Color3.new(1, 1, 1) or Color3.fromRGB(235, 178, 155);
                    v200.Button.Icon.Label.ImageColor3 = v199 and Color3.new(1, 1, 1) or Color3.new();
                end;
            end;
            if v182 > 0 then
                local v205 = v102:Get();
                v205.Label.Text = v178.DisplayName;
                v205.Label.TextColor3 = v178.Color;
                v205.Hatch.Text = ("You hatched %* Egg%*"):format(v25(v182), v182 == 1 and "" or "s");
                v205.LayoutOrder = v178.LayoutOrder;
                v205.Parent = l_Events_1.List;
                v183.Parent = l_Events_0.ScrollingFrame;
                v176 = v176 + 1;
            end;
            local v206 = v175.EggPrizesClaimed[("%*%*"):format(v51, v177)] ~= nil;
            v183.Claim.Claimed.Visible = v206 and v178.Active;
            v183.Claim.Button.Visible = not v206 and v181 <= v180 and v178.Active;
            v183.Bar.Fill.Size = UDim2.new(math.clamp(v180 / v181, 0, 1), 0, 1, 6);
            v183.Bar.Label.Text = ("%* / %* Discovered"):format(v180, v181);
            v183.Bar.Fill.Visible = v180 > 0;
            v183.Bar.Visible = not v183.Claim.Button.Visible and not v183.Claim.Claimed.Visible;
            v183.Reward.Visible = v178.Active;
            task.defer(function() --[[ Line: 754 ]]
                -- upvalues: v183 (copy), l_ScreenGui_0 (ref)
                v183.Size = UDim2.new(1, 0, 0, 132 + v183.Pets.UIListLayout.AbsoluteContentSize.Y / l_ScreenGui_0.UIScale.Scale);
            end);
        end;
        v91:Done();
        v108:Done();
        v102:Done();
        l_Events_1.SubTitle.Text = ("You've participated in %* Event%*"):format(v176, v176 == 1 and "" or "s");
        return;
    end;
end;
v67 = function() --[[ Line: 767 ]] --[[ Name: update ]]
    -- upvalues: v11 (copy), l_Index_0 (copy), v10 (copy), v13 (copy), v47 (copy), v28 (copy), v101 (copy), l_Index_2 (copy), v53 (ref), v150 (copy), v174 (copy), v207 (copy)
    local v208 = v11:Get();
    if not v208 then
        return;
    elseif l_Index_0.Visible == false then
        return;
    else
        local v209 = {};
        for _, v211 in v10 do
            local l_World_0 = v211.World;
            if l_World_0 then
                local v213 = v209[l_World_0];
                if not v213 then
                    v213 = {
                        Found = 0, 
                        Total = 0, 
                        Normal = 0, 
                        Shiny = 0
                    };
                    v209[l_World_0] = v213;
                end;
                local v214 = 0;
                for _, v216 in v211.Pool do
                    if v216.Item.Type == "Pet" then
                        for v217 = 1, 2 do
                            if v208.Discovered[("%*%*"):format(v217 == 1 and "" or "Shiny ", v216.Item.Name)] ~= nil then
                                if v217 == 1 then
                                    v213.Normal = v213.Normal + 1;
                                else
                                    v213.Shiny = v213.Shiny + 1;
                                end;
                                v213.Found = v213.Found + 1;
                            end;
                        end;
                        if v13[v216.Item.Name].Rarity ~= "Secret" then
                            v214 = v214 + 2;
                        end;
                    end;
                end;
                v213.Total = v213.Total + v214;
            end;
        end;
        local v218 = false;
        for _, v220 in v47 do
            for _, v222 in v220.Eggs do
                if v208.EggsOpened[v222] then
                    v218 = true;
                    break;
                end;
            end;
            if v218 then
                break;
            end;
        end;
        for v223, v224 in v28 do
            local v225 = v209[v223];
            local v226 = v208.WorldsUnlocked[v223] ~= nil;
            local v227 = v101:Get();
            v227.Name = v223;
            v227.LayoutOrder = v224.Order;
            v227.Button.Completion.Visible = v226;
            v227.Button.Buffs.Visible = v226;
            v227.Button.World.Visible = v226;
            v227.Cover.Visible = not v226;
            v227.Cover.Label.Text = v223;
            v227.Button.Banner.Image = v224.Banner;
            v227.Button.Completion.Text = ("%* / %* Pets"):format(v225.Found, v225.Total);
            v227.Parent = l_Index_2;
            local v228 = math.floor(v225.Total / 2);
            v227.Button.Buffs.Luck.Visible = v228 <= v225.Normal;
            v227.Button.Buffs.Shiny.Visible = v228 <= v225.Normal;
            v227.Button.Buffs.Mythic.Visible = v228 <= v225.Shiny;
        end;
        v101:Done();
        l_Index_0.Container.Right.Buttons.Events.Visible = v218;
        if v53 == "Index" then
            v150();
            return;
        elseif v53 == "Mythics" then
            v174();
            return;
        else
            if v53 == "Events" then
                v207();
            end;
            return;
        end;
    end;
end;
local function v237(v229) --[[ Line: 868 ]] --[[ Name: updatePage ]]
    -- upvalues: l_Index_0 (copy), v7 (copy), v6 (copy), v51 (ref), v53 (ref), v67 (ref)
    for _, v231 in l_Index_0.Container.Right.Buttons:GetChildren() do
        if v231:IsA("Frame") then
            local v232 = v231.Name == v229 and v7.Button.Active or v7.Button.Light;
            if v231.Name == "Mythics" and v231.Name ~= v229 then
                v232 = v7.Button.Gem;
            end;
            v6(v231.Button, v232);
        end;
    end;
    for _, v234 in l_Index_0.Container.Left:GetChildren() do
        if v234:IsA("Frame") then
            v234.Visible = v234.Name == v229;
        end;
    end;
    for _, v236 in l_Index_0.Container.Right:GetChildren() do
        if (v236:IsA("Frame") or v236:IsA("ScrollingFrame")) and v236.Name ~= "Buttons" then
            v236.Visible = v236.Name == v229;
        end;
    end;
    v51 = "Normal";
    v53 = v229;
    v67();
end;
local function v238() --[[ Line: 894 ]] --[[ Name: updateReward ]]
    -- upvalues: l_Rewards_0 (copy), v24 (copy), v51 (ref), v7 (copy), v52 (ref)
    l_Rewards_0.Description.Text = v24.autoStroke((("Discover every %* and earn rewards!\n<font size=\"18\">Buffs only apply to %* Eggs</font>"):format(v24.autoColor(("%* Pet"):format(v51), v51 == "Shiny" and v7.Text.Yellow or v7.Text.Cyan), v52)));
    l_Rewards_0.Content.Luck.Visible = v51 == "Normal";
    l_Rewards_0.Content.Shiny.Visible = v51 == "Normal";
    l_Rewards_0.Content.Mythic.Visible = v51 == "Shiny";
end;
local function v251() --[[ Line: 901 ]] --[[ Name: updateBounty ]]
    -- upvalues: v11 (copy), l_Mythics_1 (copy), v37 (copy), v35 (copy), v12 (copy), l_HttpService_0 (copy), v13 (copy), v33 (copy), v24 (copy), v32 (copy), v7 (copy)
    local v239 = v11:Get();
    if not v239 then
        return;
    else
        local l_Pet_0 = l_Mythics_1.Daily.Content.Pet;
        local l_v37_Quest_0 = v37:GetQuest(v37:GetSeed());
        local v242 = v35:FindById(v239, "bounty-mythic") == nil;
        for _, v244 in l_Mythics_1.Daily.Content.Items:GetChildren() do
            if v244:IsA("Frame") then
                local l_LayoutOrder_0 = v244.LayoutOrder;
                local v246 = l_v37_Quest_0.Rewards[l_LayoutOrder_0];
                if not v246 then
                    v244.Visible = false;
                else
                    v244.Visible = true;
                    v12:FormatAmount(v244.Amount, v246);
                    v244:SetAttribute("Item", l_HttpService_0:JSONEncode(v246));
                    v12:UpdateIcon(v244, v246);
                end;
            end;
        end;
        local v247 = l_v37_Quest_0.Tasks[1];
        if v247.Type == "Hatch" then
            local v248 = {
                Type = "Pet", 
                Name = v247.Name, 
                Mythic = v247.Mythic
            };
            local v249 = v13[v248.Name];
            local v250 = math.ceil(100 / v33:GetChance(v248));
            l_Mythics_1.Daily.Content.Label.Text = v12:GetName(v248);
            l_Mythics_1.Daily.Content.Chance.Text = ("%* from the %*!"):format(v24.autoColor(("1 in %*"):format((v32(v250))), v7.Text.Pink), (v24.autoColor(v249.Egg or "Unknown", v7.Text.Cyan)));
            v12:UpdateIcon(l_Pet_0.Icon, v248);
        end;
        l_Pet_0.Completed.Visible = v242;
        l_Pet_0.Icon.Label.ImageTransparency = not v242 and 0 or 0.25;
        return;
    end;
end;
local v252 = nil;
local v253 = 0;
local v254 = 0;
local l_BillboardGui_0 = l_Index_3.Part.BillboardGui;
local l_Button_0 = l_ScreenGui_0.HUD.Right.Index.Button;
do
    local l_v253_0, l_v254_0 = v253, v254;
    v252 = function() --[[ Line: 954 ]] --[[ Name: isIndexUnlocked ]]
        -- upvalues: l_v253_0 (ref)
        return l_v253_0 >= 5;
    end;
    for _, v260 in v13 do
        if v260.Egg then
            local v261 = 2;
            if v260.Rarity == "Legendary" or v260.Rarity == "Secret" then
                v261 = v261 * 2;
            end;
            l_v254_0 = l_v254_0 + v261;
        end;
    end;
    local v262 = nil;
    local l_l_Button_0_0 = l_Button_0 --[[ copy: 86 -> 97 ]];
    v11:ConnectDataChanged("Discovered", function(v264) --[[ Line: 970 ]]
        -- upvalues: l_v253_0 (ref), v41 (copy), v252 (ref), v262 (ref), v23 (copy), v46 (copy), v24 (copy), v7 (copy), v6 (copy), v8 (copy), v5 (copy), l_BillboardGui_0 (copy), v32 (copy), l_v254_0 (ref), l_l_Button_0_0 (copy)
        l_v253_0 = v41(v264.Discovered);
        local v265 = v252();
        if v265 ~= v262 then
            if v262 ~= nil and v265 then
                task.spawn(function() --[[ Line: 976 ]]
                    -- upvalues: v23 (ref), v46 (ref), v24 (ref), v7 (ref), v6 (ref), v8 (ref), v5 (ref)
                    repeat
                        task.wait();
                    until not v23:IsHatching();
                    v46(("You unlocked the %*!"):format((v24.autoColor("Index", v7.Text.Cyan))), {
                        Sound = "NotificationHelp", 
                        Button = function(v266) --[[ Line: 980 ]] --[[ Name: Button ]]
                            -- upvalues: v6 (ref), v7 (ref), v8 (ref), v5 (ref)
                            v266.Label.Text = "Open";
                            v6(v266, v7.Button.Default);
                            v8(v266, function() --[[ Line: 983 ]]
                                -- upvalues: v5 (ref)
                                v5:Open("Index");
                            end);
                        end
                    });
                end);
            end;
            v262 = v265;
        end;
        if v265 then
            l_BillboardGui_0.Title.Text = "Index";
            l_BillboardGui_0.Description.Text = ("%* / %* Discovered"):format(v32(l_v253_0), (v32(l_v254_0)));
        else
            local v267 = math.max(0, 5 - l_v253_0);
            l_BillboardGui_0.Title.Text = "Locked";
            l_BillboardGui_0.Description.Text = ("Discover %* more pet%*"):format(v267, v267 ~= 1 and "s" or "");
        end;
        l_BillboardGui_0.Title.UIGradient.Enabled = v265;
        l_l_Button_0_0.Icon.ImageColor3 = v265 and Color3.new(1, 1, 1) or Color3.new();
        l_l_Button_0_0.Label.Text = v265 and "Index" or "???";
        l_l_Button_0_0.Keybind.Visible = v265;
        l_l_Button_0_0.Parent.Visible = v265;
    end);
    v5:BindOnOpened("Index", function() --[[ Line: 1008 ]]
        -- upvalues: v252 (ref), l_v253_0 (ref), v42 (copy), v24 (copy), v7 (copy), v6 (copy), v8 (copy), v43 (copy), v5 (copy)
        if not v252() then
            local v268 = math.max(0, 5 - l_v253_0);
            local v271 = v42.new("Locked"):Text((("Unlock the index by discovering %*!"):format((v24.autoColor(("%* more pet%*"):format(v268, v268 ~= 1 and "s" or ""), v7.Text.Yellow))))):Button(function(v269, v270) --[[ Line: 1013 ]]
                -- upvalues: v6 (ref), v7 (ref), v8 (ref)
                v269.Label.Text = "Close";
                v6(v269, v7.Button.Red);
                v8(v269, v270);
            end);
            v43(v271:Build());
            v5:Close();
        end;
    end);
end;
v253 = function(v272) --[[ Line: 1025 ]] --[[ Name: updateMode ]]
    -- upvalues: v51 (ref), v67 (ref), v238 (copy), v6 (copy), l_Index_1 (copy), v7 (copy), l_Events_0 (copy)
    v51 = v272;
    v67();
    v238();
    v6(l_Index_1.Buttons.Normal.Button, v51 == "Normal" and v7.Button.Default or v7.Button.Inactive);
    v6(l_Index_1.Buttons.Shiny.Button, v51 == "Shiny" and v7.Button.Active or v7.Button.Inactive);
    v6(l_Events_0.Buttons.Normal.Button, v51 == "Normal" and v7.Button.Default or v7.Button.Inactive);
    v6(l_Events_0.Buttons.Shiny.Button, v51 == "Shiny" and v7.Button.Active or v7.Button.Inactive);
end;
for _, v274 in l_Index_1.Buttons:GetChildren() do
    if v274:IsA("Frame") then
        v8(v274.Button, function() --[[ Line: 1038 ]]
            -- upvalues: v253 (copy), v274 (copy)
            v253(v274.Name);
        end);
    end;
end;
for _, v276 in l_Events_0.Buttons:GetChildren() do
    if v276:IsA("Frame") then
        v8(v276.Button, function() --[[ Line: 1046 ]]
            -- upvalues: v253 (copy), v276 (copy)
            v253(v276.Name);
        end);
    end;
end;
for v277, v278 in v16.IndexBuffs do
    local l_FirstChild_1 = l_Rewards_0.Content:FindFirstChild(v277);
    if l_FirstChild_1 then
        l_FirstChild_1.Button.Label.Text = v27:Format(("BUFF %*"):format(v277), v278);
    end;
end;
for _, v281 in l_Index_0.Container.Right.Buttons:GetChildren() do
    if v281:IsA("Frame") then
        if v281.Name ~= "Trades" then
            v8(v281.Button, function() --[[ Line: 1065 ]]
                -- upvalues: v237 (copy), v281 (copy)
                v237(v281.Name);
            end);
        else
            v8(v281.Button, function() --[[ Line: 1069 ]]
                -- upvalues: v39 (copy)
                v39:Open("Index");
            end);
        end;
    end;
end;
v254 = l_Mythics_1.Bounties.Tier1.Content.Item;
v254.Parent = nil;
for v282, v283 in v16.LegendaryTiers do
    local l_FirstChild_2 = l_Mythics_1.Bounties:FindFirstChild("Tier" .. v282);
    if l_FirstChild_2 then
        for v285, v286 in v283.Items do
            local v287 = v254:Clone();
            v287.LayoutOrder = v285 + 3;
            v287.Parent = l_FirstChild_2.Content;
            v19:OnEnter(v287.Hover, function() --[[ Line: 1091 ]]
                -- upvalues: v20 (copy), v286 (copy)
                return v20.fromItem(v286);
            end);
            v12:UpdateIcon(v287, v286);
            v12:FormatAmount(v287.Amount, v286);
        end;
        local v288 = Color3.fromRGB(252, 211, 255);
        if v282 == 2 then
            v288 = Color3.fromRGB(243, 156, 255);
        elseif v282 == 3 then
            v288 = Color3.fromRGB(207, 112, 255);
        end;
        l_FirstChild_2.Content.Label.TextColor3 = v288;
    end;
end;
for _, v290 in l_Mythics_1.Daily.Content.Items:GetChildren() do
    if v290:IsA("Frame") then
        v19:OnEnter(v290.Hover, function() --[[ Line: 1114 ]]
            -- upvalues: v290 (copy), l_HttpService_0 (copy), v20 (copy)
            local l_v290_Attribute_0 = v290:GetAttribute("Item");
            local v292 = l_v290_Attribute_0 and l_HttpService_0:JSONDecode(l_v290_Attribute_0);
            if not v292 then
                return;
            else
                return v20.fromItem(v292);
            end;
        end);
    end;
end;
v19:OnEnter(l_Rewards_0.Content.Pet.Button, function() --[[ Line: 1124 ]]
    -- upvalues: v28 (copy), v52 (ref), v51 (ref), v20 (copy)
    local v293 = table.clone(v28[v52].Reward);
    if v51 == "Shiny" then
        v293.Mythic = true;
    end;
    return v20.fromPet(v293);
end);
v11:ConnectDataChanged("MasteryUpgrades", function(v294) --[[ Line: 1133 ]]
    -- upvalues: l_Index_0 (copy), l_Mythics_0 (copy)
    local v295 = false;
    for _, v297 in v294.MasteryUpgrades do
        if v297.Type == "DarkArts" then
            v295 = true;
            break;
        end;
    end;
    for _, v299 in l_Index_0.Container.Right.Mythics:GetChildren() do
        if v299:IsA("GuiObject") then
            v299.Visible = v295;
        end;
    end;
    l_Mythics_0.Cover.Visible = not v295;
    local l_Mythics_2 = l_Index_0.Container.Right.Buttons.Mythics;
    l_Mythics_2.Button.Lock.Visible = not v295;
    l_Mythics_2.Button.Icon.ImageColor3 = not v295 and Color3.new() or Color3.new(1, 1, 1);
end);
v15.Cycle(l_Mythics_1.Daily.Content.Label, "Mythic", {
    Speed = 0.4
});
v6(l_Rewards_0.Claim.Button, v7.Button.Green);
v8(l_Rewards_0.Claim.Button, function() --[[ Line: 1156 ]]
    -- upvalues: v30 (copy), v52 (ref), v51 (ref)
    v30:FireServer("ClaimIndex", v52, v51);
end);
v253(v51);
v237(v53);
v36(0.5, function() --[[ Line: 1163 ]]
    -- upvalues: v37 (copy), v38 (copy), l_Mythics_1 (copy)
    local v301 = v37.Interval - v38.now() % v37.Interval;
    l_Mythics_1.Daily.Timer.Text = v38.formatTime(v301);
end);
v6(l_Index_0.Close, v7.Button.Red);
v8(l_Index_0.Close, function() --[[ Line: 1169 ]]
    -- upvalues: v5 (copy)
    v5:Close();
end);
v22(l_Index_0);
v18(l_Index_2, l_Index_2.UIGridLayout);
v18(l_Index_1.ScrollingFrame, l_Index_1.ScrollingFrame.UIListLayout);
v18(l_Mythics_0.ScrollingFrame, l_Mythics_0.ScrollingFrame.UIListLayout);
v18(l_Events_0.ScrollingFrame, l_Events_0.ScrollingFrame.UIListLayout);
v18(l_Events_1.List, l_Events_1.List.UIListLayout);
v26("Index", {
    "Quests", 
    "QuestsCompleted"
}, v251);
v26("Index", {
    "Discovered", 
    "WorldsUnlocked", 
    "EggPrizesClaimed"
}, v67);
v254 = nil;
l_Button_0 = workspace.Worlds["The Overworld"].Index.Pedestal.Book;
local l_Top_0 = l_Button_0.Top;
local l_l_Button_0_Pivot_0 = l_Button_0:GetPivot();
local _ = Instance.new("NumberValue");
local l_NumberValue_1 = Instance.new("NumberValue");
local v306 = l_l_Button_0_Pivot_0:ToObjectSpace(l_Top_0:GetPivot());
l_Button_0.Parent = workspace.Rendered.Generic;
l_Top_0.Parent = workspace.Rendered.Generic;
local v307 = TweenInfo.new(0.75, Enum.EasingStyle.Cubic);
do
    local l_v254_1 = v254;
    l_RunService_0.Heartbeat:Connect(function() --[[ Line: 1200 ]]
        -- upvalues: v40 (copy), l_LocalPlayer_0 (copy), l_l_Button_0_Pivot_0 (copy), l_v254_1 (ref), l_Top_0 (copy), l_TweenService_0 (copy), l_NumberValue_1 (copy), v307 (copy), l_Button_0 (copy), v306 (copy)
        if v40:GetPlayerWorld(l_LocalPlayer_0) ~= "The Overworld" then
            return;
        else
            local v309 = l_LocalPlayer_0.Character and l_LocalPlayer_0.Character.PrimaryPart;
            if not v309 then
                return;
            else
                local v310 = (v309.Position - l_l_Button_0_Pivot_0.Position).Magnitude <= 16;
                if v310 ~= l_v254_1 then
                    for _, v312 in l_Top_0.Root.Attachment:GetChildren() do
                        if v312:IsA("ParticleEmitter") then
                            v312.Enabled = v310;
                        end;
                    end;
                    l_Top_0.Page.Size = if v310 then Vector3.new(2.2660000324249268, 2.690000057220459, 0.28299999237060547, 0) else Vector3.new(2.065999984741211, 2.690000057220459, 0.28299999237060547, 0);
                    l_v254_1 = v310;
                    l_TweenService_0:Create(l_NumberValue_1, v307, {
                        Value = v310 and 1 or 0
                    }):Play();
                end;
                local v313 = l_l_Button_0_Pivot_0 * CFrame.Angles(0, 0, -0.2181661564992912 * l_NumberValue_1.Value) * CFrame.new(-1.25 * l_NumberValue_1.Value, 0, 0);
                l_Button_0:PivotTo(v313);
                l_Top_0:PivotTo(v313 * v306 * CFrame.Angles(0, 0, -2.6179938779914944 * l_NumberValue_1.Value));
                return;
            end;
        end;
    end);
end;
return {};
ModuleScript: Inventory
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local _ = game:GetService("Workspace");
local _ = game:GetService("StarterGui");
local _ = game:GetService("RunService");
local _ = game:GetService("HttpService");
local l_MarketplaceService_0 = game:GetService("MarketplaceService");
local v7 = require(l_ReplicatedStorage_0.Client.Framework.Classes.VirtualGrid);
local v8 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.Utils.GetPetRenderList);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v11 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local v13 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v14 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Shiny);
local v15 = require(l_ReplicatedStorage_0.Shared.Data.Pets);
local v16 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v18 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v19 = require(l_ReplicatedStorage_0.Shared.Constants);
local v20 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v21 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v24 = require(l_ReplicatedStorage_0.Shared.Palette);
local v25 = require(l_ReplicatedStorage_0.Shared.Data.Potions);
local v26 = require(l_ReplicatedStorage_0.Shared.Data.Powerups);
local v27 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v28 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatRomanNumeral);
local v30 = require(l_ReplicatedStorage_0.Shared.Data.Titles);
local v31 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v32 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v33 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v34 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v35 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v36 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatPlural);
local v37 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Achievement);
local v38 = require(l_ReplicatedStorage_0.Shared.Data.Builders.AchievementBuilder);
local v39 = require(l_ReplicatedStorage_0.Shared.Utils.PetLevelUtil);
local v40 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.PetUtil);
local v41 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v42 = require(l_ReplicatedStorage_0.Client.Gui.PetEntryAppearance);
local v43 = require(l_ReplicatedStorage_0.Shared.Utils.SortPetsList);
local v44 = require(l_ReplicatedStorage_0.Client.Gui.Utils.LootPoolPage);
local v45 = require(l_ReplicatedStorage_0.Client.Gui.HookKeybind);
local v46 = require(l_ReplicatedStorage_0.Shared.Data.Flavors);
local v47 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local v48 = require(l_ReplicatedStorage_0.Client.Gui.Frames.PetChoosePrompt);
local v49 = require(l_ReplicatedStorage_0.Client.Gui.Frames.Enchants);
local v50 = require(l_ReplicatedStorage_0.Shared.Utils.EnchantUtil);
local v51 = require(l_ReplicatedStorage_0.Client.Gui.Frames.Potions);
local v52 = require(l_ReplicatedStorage_0.Client.Gui.Frames.Shiny);
local v53 = require(l_ReplicatedStorage_0.Shared.Utils.ShinyUtil);
local v54 = require(l_ReplicatedStorage_0.Shared.Utils.PetStackUtil);
local v55 = require(l_ReplicatedStorage_0.Shared.Data.Enchants);
local v56 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v57 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v59 = require(l_ReplicatedStorage_0.Client.Gui.Animations.ProcessingPurchase);
local v60 = require(l_ReplicatedStorage_0.Shared.Data.Gamepasses);
local _ = require(l_ReplicatedStorage_0.Shared.Data.Eggs);
local v62 = require(l_ReplicatedStorage_0.Client.Gui.Utils.CheckInventorySpace);
local v63 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v64 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v65 = require(l_ReplicatedStorage_0.Client.Effects.HatchEgg);
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_Inner_0 = l_ScreenGui_0.Inventory.Frame.Inner;
local l_Tray_0 = l_ScreenGui_0.Inventory.Frame.Tray;
local l_Search_0 = l_Tray_0.Search;
local l_PropertyChangedSignal_0 = l_Search_0.Search.Bar.TextBox:GetPropertyChangedSignal("Text");
local function v72(v71) --[[ Line: 87 ]] --[[ Name: makeSearchable ]]
    return string.lower((string.gsub(v71, "%s", "")));
end;
local function _(v73) --[[ Line: 91 ]] --[[ Name: getPetSearchName ]]
    -- upvalues: v15 (copy), v72 (copy)
    local l_Name_0 = v73.Name;
    l_Name_0 = ("%* %*"):format(v15[v73.Name].Rarity, l_Name_0);
    if v73.Mythic then
        l_Name_0 = ("Mythic %*"):format(l_Name_0);
    end;
    if v73.Shiny then
        l_Name_0 = ("Shiny %*"):format(l_Name_0);
    end;
    return v72(l_Name_0);
end;
local function _() --[[ Line: 106 ]] --[[ Name: getSearch ]]
    -- upvalues: l_Search_0 (copy), v72 (copy)
    local l_Text_0 = l_Search_0.Search.Bar.TextBox.Text;
    return v72(l_Text_0);
end;
local function _() --[[ Line: 111 ]] --[[ Name: clearSearch ]]
    -- upvalues: l_Search_0 (copy)
    l_Search_0.Search.Bar.TextBox.Text = "";
end;
l_Search_0.Search.Bar.TextBox.Focused:Connect(function() --[[ Line: 115 ]]
    -- upvalues: v17 (copy)
    v17:Hide();
end);
local v79 = nil;
local v80 = nil;
local l_CancelAutoExclusiveEggHatch_0 = l_ScreenGui_0.CancelAutoExclusiveEggHatch;
local v82 = 0;
local l_l_CancelAutoExclusiveEggHatch_0_0 = l_CancelAutoExclusiveEggHatch_0 --[[ copy: 78 -> 129 ]];
do
    local l_v82_0 = v82;
    v79 = function(v85) --[[ Line: 129 ]] --[[ Name: autoExclusiveEgg ]]
        -- upvalues: l_v82_0 (ref), v11 (copy), v22 (copy), l_l_CancelAutoExclusiveEggHatch_0_0 (copy), v20 (copy), v65 (copy)
        local v86 = l_v82_0 + 1;
        l_v82_0 = v86;
        local v87 = v11:Get();
        if not v87 then
            return;
        else
            v22:Close();
            l_l_CancelAutoExclusiveEggHatch_0_0.Visible = true;
            while v87.Powerups[v85] > 0 and l_v82_0 == v86 do
                v20:FireServer("HatchPowerupEgg", v85, (math.min(6, v87.Powerups[v85])));
                task.wait(0.2);
                repeat
                    task.wait();
                until not v65:IsHatching();
            end;
            l_l_CancelAutoExclusiveEggHatch_0_0.Visible = false;
            return;
        end;
    end;
    v80 = function() --[[ Line: 150 ]] --[[ Name: stopAutoExclusiveEgg ]]
        -- upvalues: l_v82_0 (ref), l_l_CancelAutoExclusiveEggHatch_0_0 (copy)
        l_v82_0 = l_v82_0 + 1;
        l_l_CancelAutoExclusiveEggHatch_0_0.Visible = false;
    end;
    v34(l_CancelAutoExclusiveEggHatch_0.Button, v24.Button.Red);
    v16(l_CancelAutoExclusiveEggHatch_0.Button, function() --[[ Line: 157 ]]
        -- upvalues: v80 (ref)
        v80();
    end);
end;
l_CancelAutoExclusiveEggHatch_0 = nil;
v82 = l_Inner_0.Pets.Main.ScrollingFrame.Pets.Parent.Team.Title;
local l_v82_1 = v82 --[[ copy: 79 -> 130 ]];
l_CancelAutoExclusiveEggHatch_0 = function() --[[ Line: 179 ]] --[[ Name: stopRenamingTeam ]]
    -- upvalues: l_v82_1 (copy)
    l_v82_1.Edit.TextBox:ReleaseFocus();
    l_v82_1.Edit.Visible = false;
    l_v82_1.Main.Visible = true;
end;
local function _() --[[ Line: 185 ]] --[[ Name: startRenamingTeam ]]
    -- upvalues: l_v82_1 (copy)
    l_v82_1.Edit.TextBox.Text = "";
    l_v82_1.Edit.Visible = true;
    l_v82_1.Main.Visible = false;
    l_v82_1.Edit.TextBox:CaptureFocus();
end;
v82.Edit.TextBox:GetPropertyChangedSignal("Text"):Connect(function() --[[ Line: 192 ]]
    -- upvalues: l_v82_1 (copy), v19 (copy)
    l_v82_1.Edit.TextBox.Text = string.sub(l_v82_1.Edit.TextBox.Text, 1, v19.MaxTeamNameLength);
end);
local function v92() --[[ Line: 196 ]] --[[ Name: updateRenameAvailability ]]
    -- upvalues: v11 (copy), v21 (copy), l_v82_1 (copy)
    local v90 = v11:Get();
    local v91 = v90 and v21:GetMaxPetTeams(v90) > 1;
    l_v82_1.Main.Rename.Visible = v91;
end;
local v93 = v11:Get();
local v94 = v93 and v21:GetMaxPetTeams(v93) > 1;
v82.Main.Rename.Visible = v94;
v11:ConnectDataChanged({
    "MasteryLevels", 
    "MasteryUpgrades"
}, v92);
v82.Edit.TextBox:GetPropertyChangedSignal("Text"):Connect(function() --[[ Line: 204 ]]
    -- upvalues: l_v82_1 (copy)
    if #l_v82_1.Edit.TextBox.Text == 0 then
        l_v82_1.Edit.TextBox.UIStrokeText.Transparency = 0.6;
        return;
    else
        l_v82_1.Edit.TextBox.UIStrokeText.Transparency = 0;
        return;
    end;
end);
v34(v82.Main.Rename.Button, v24.Button.Purple);
v16(v82.Main.Rename.Button, function() --[[ Line: 214 ]]
    -- upvalues: l_v82_1 (copy)
    l_v82_1.Edit.TextBox.Text = "";
    l_v82_1.Edit.Visible = true;
    l_v82_1.Main.Visible = false;
    l_v82_1.Edit.TextBox:CaptureFocus();
end);
v34(v82.Edit.Confirm.Button, v24.Button.Purple);
v16(v82.Edit.Confirm.Button, function() --[[ Line: 219 ]]
    -- upvalues: l_v82_1 (copy), v20 (copy), l_CancelAutoExclusiveEggHatch_0 (ref)
    local v95 = string.match(l_v82_1.Edit.TextBox.Text, "^%s*(.-)%s*$");
    if v95 and #v95 > 0 then
        v20:FireServer("RenameTeam", v95);
        l_CancelAutoExclusiveEggHatch_0();
    end;
end);
v34(v82.Edit.Cancel.Button, v24.Button.Red);
v16(v82.Edit.Cancel.Button, function() --[[ Line: 228 ]]
    -- upvalues: l_CancelAutoExclusiveEggHatch_0 (ref)
    l_CancelAutoExclusiveEggHatch_0();
end);
v22:BindOnClosed("Inventory", l_CancelAutoExclusiveEggHatch_0);
v11:ConnectDataChanged("Teams", l_CancelAutoExclusiveEggHatch_0);
v82 = function(v96) --[[ Line: 244 ]] --[[ Name: formatBytesAsMB ]]
    local v97 = string.format("%.02f", v96 / 1000000);
    v97 = string.gsub(v97, "0+$", "");
    return (string.gsub(v97, "%.$", ""));
end;
v41("Inventory", {
    "Pets", 
    "PermanentBuffs", 
    "Passes", 
    "MasteryLevels", 
    "MasteryUpgrades"
}, function() --[[ Line: 252 ]] --[[ Name: updateStorage ]]
    -- upvalues: v11 (copy), l_ScreenGui_0 (copy), v21 (copy), v35 (copy)
    local v98 = v11:Get();
    if not v98 then
        return;
    else
        local l_StorageHolder_0 = l_ScreenGui_0.Inventory.Frame.Top.StorageHolder;
        local l_v21_MaxPetStorage_0 = v21:GetMaxPetStorage(v98);
        local l_v21_UsedPetStorage_0 = v21:GetUsedPetStorage(v98);
        local v102 = math.min(l_v21_MaxPetStorage_0, l_v21_UsedPetStorage_0);
        local v103 = l_v21_MaxPetStorage_0 <= l_v21_UsedPetStorage_0;
        local v104 = if v103 then Color3.fromHex("#ff2f2f") else Color3.fromRGB(255, 255, 255);
        local v105 = v21:HasDigitalStorage(v98);
        if v105 then
            local l_Digital_0 = l_StorageHolder_0.Digital;
            local v107 = "\240\159\146\190 %* / %* MB";
            local v108 = string.format("%.02f", v102 / 1000000);
            v108 = string.gsub(v108, "0+$", "");
            l_Digital_0.Text = v107:format(string.gsub(v108, "%.$", ""), l_v21_MaxPetStorage_0 // 1000000);
            l_StorageHolder_0.Digital.TextColor3 = v104;
            l_StorageHolder_0.Digital.Visible = true;
            l_StorageHolder_0.Storage.Visible = false;
            l_StorageHolder_0.Digital.Bar.Fill.Size = UDim2.fromScale(v102 / l_v21_MaxPetStorage_0, 1);
            l_StorageHolder_0.Digital.Bar.Fill.UIGradient.Color = if not v103 then ColorSequence.new(Color3.fromHex("#00ffff"), Color3.fromHex("#00bbff")) else ColorSequence.new(Color3.fromHex("#ff2f2f"), Color3.fromHex("#d50000"));
        else
            l_StorageHolder_0.Storage.Text = ("\240\159\147\166 %* / %*"):format(v35(l_v21_UsedPetStorage_0), (v35(l_v21_MaxPetStorage_0)));
            l_StorageHolder_0.Storage.TextColor3 = v104;
            l_StorageHolder_0.Storage.Visible = true;
            l_StorageHolder_0.Digital.Visible = false;
        end;
        l_StorageHolder_0.Buy.Button.Visible = not v105;
        return;
    end;
end);
v92 = l_ScreenGui_0.Inventory.Frame.Top.StorageHolder.Buy.Button;
v34(v92, v24.Button.Orange);
v16(v92, function() --[[ Line: 291 ]]
    -- upvalues: v59 (copy), l_MarketplaceService_0 (copy), l_Players_0 (copy), v60 (copy), v19 (copy)
    v59:Show();
    l_MarketplaceService_0:PromptGamePassPurchase(l_Players_0.LocalPlayer, v60[v19.DigitalStoragePassName].Id);
end);
local l_v92_0 = v92 --[[ copy: 81 -> 131 ]];
v22:BindOnOpened("Inventory", function() --[[ Line: 296 ]]
    -- upvalues: v14 (copy), l_v92_0 (copy)
    v14:Add(l_v92_0);
end);
v22:BindOnClosed("Inventory", function() --[[ Line: 299 ]]
    -- upvalues: v14 (copy), l_v92_0 (copy)
    v14:Remove(l_v92_0);
end);
v92 = v42.animatedGradients;
v93 = nil;
v94 = v23.new():size(20);
local l_v94_0 = v94 --[[ copy: 83 -> 132 ]];
v93 = function(v111) --[[ Line: 314 ]] --[[ Name: formatAmountText ]]
    -- upvalues: v23 (copy), l_v94_0 (copy), v31 (copy)
    return v23.autoStroke((("%*%*"):format(l_v94_0("x"), (v31(v111, 1000)))));
end;
v94 = nil;
local l_Notification_0 = l_ScreenGui_0.Inventory.Frame.Sidebar.Buttons.Pets.Button.Notification;
local v113 = 0;
local l_l_Notification_0_0 = l_Notification_0 --[[ copy: 84 -> 133 ]];
do
    local l_v113_0 = v113;
    local function _() --[[ Line: 326 ]] --[[ Name: update ]]
        -- upvalues: l_l_Notification_0_0 (copy), l_v113_0 (ref)
        l_l_Notification_0_0.Visible = l_v113_0 > 0;
        l_l_Notification_0_0.Label.Text = if l_v113_0 < 10 then tostring(l_v113_0) else "!";
    end;
    v94 = function() --[[ Line: 331 ]] --[[ Name: clearPetsNotifications ]]
        -- upvalues: l_v113_0 (ref), l_l_Notification_0_0 (copy)
        l_v113_0 = 0;
        l_l_Notification_0_0.Visible = l_v113_0 > 0;
        l_l_Notification_0_0.Label.Text = if l_v113_0 < 10 then tostring(l_v113_0) else "!";
    end;
    v22:BindOnOpened("Inventory", function() --[[ Line: 336 ]]
        -- upvalues: l_Inner_0 (copy), v94 (ref)
        if l_Inner_0.Pets.Visible then
            v94();
        end;
    end);
    v20.Event("AddPetNotification"):Connect(function(v117) --[[ Line: 342 ]]
        -- upvalues: l_Inner_0 (copy), v22 (copy), l_v113_0 (ref), l_l_Notification_0_0 (copy)
        if not l_Inner_0.Pets.Visible or not v22:IsOpen("Inventory") then
            l_v113_0 = l_v113_0 + (v117 or 1);
            l_l_Notification_0_0.Visible = l_v113_0 > 0;
            l_l_Notification_0_0.Label.Text = if l_v113_0 < 10 then tostring(l_v113_0) else "!";
        end;
    end);
    v94();
end;
l_Notification_0 = nil;
v113 = l_ScreenGui_0.Inventory.Frame.Sidebar.Buttons.Items.Button.Notification;
local v118 = 0;
local l_v113_1 = v113 --[[ copy: 85 -> 134 ]];
do
    local l_v118_0 = v118;
    local function _() --[[ Line: 359 ]] --[[ Name: update ]]
        -- upvalues: l_v113_1 (copy), l_v118_0 (ref)
        l_v113_1.Visible = l_v118_0 > 0;
        l_v113_1.Label.Text = if l_v118_0 < 10 then tostring(l_v118_0) else "!";
    end;
    l_Notification_0 = function() --[[ Line: 364 ]] --[[ Name: clearItemsNotifications ]]
        -- upvalues: l_v118_0 (ref), l_v113_1 (copy)
        l_v118_0 = 0;
        l_v113_1.Visible = l_v118_0 > 0;
        l_v113_1.Label.Text = if l_v118_0 < 10 then tostring(l_v118_0) else "!";
    end;
    v22:BindOnOpened("Inventory", function() --[[ Line: 369 ]]
        -- upvalues: l_Inner_0 (copy), l_Notification_0 (ref)
        if l_Inner_0.Items.Visible then
            l_Notification_0();
        end;
    end);
    v20.Event("AddItemNotification"):Connect(function(v122) --[[ Line: 375 ]]
        -- upvalues: l_Inner_0 (copy), v22 (copy), l_v118_0 (ref), l_v113_1 (copy)
        if not l_Inner_0.Items.Visible or not v22:IsOpen("Inventory") then
            l_v118_0 = l_v118_0 + (v122 or 1);
            l_v113_1.Visible = l_v118_0 > 0;
            l_v113_1.Label.Text = if l_v118_0 < 10 then tostring(l_v118_0) else "!";
        end;
    end);
    l_Notification_0();
end;
v113 = nil;
v118 = nil;
local v123 = nil;
local v124 = nil;
local l_ScrollingFrame_0 = l_Inner_0.Pets.Main.ScrollingFrame;
local l_Pets_0 = l_ScrollingFrame_0.Pets;
local l_UIGridLayout_0 = l_Pets_0.UIGridLayout;
local l_Details_0 = l_Inner_0.Pets.Details;
l_Details_0.Stats.Bubbles.Icon.Image = v46["Bubble Gum"].Image;
l_Details_0.Stats.Bubbles.Amount.TextColor3 = v46["Bubble Gum"].Color;
l_Details_0.Stats.Gems.Icon.Image = v47.Gems.Image;
l_Details_0.Stats.Gems.Amount.TextColor3 = v47.Gems.Color;
local l_l_Details_0_0 = l_Details_0 --[[ copy: 92 -> 135 ]];
local function v133() --[[ Line: 413 ]] --[[ Name: updateStatSizes ]]
    -- upvalues: l_l_Details_0_0 (copy), l_UIScale_0 (copy)
    local v130 = math.ceil(l_l_Details_0_0.Stats.Bubbles.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    local v131 = math.ceil(l_l_Details_0_0.Stats.Currency.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    local v132 = math.ceil(l_l_Details_0_0.Stats.Gems.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_l_Details_0_0.Stats.Bubbles.Amount.Size = UDim2.new(0, v130, 1, 0);
    l_l_Details_0_0.Stats.Currency.Amount.Size = UDim2.new(0, v131, 1, 0);
    l_l_Details_0_0.Stats.Gems.Amount.Size = UDim2.new(0, v132, 1, 0);
end;
l_Details_0.Stats.Bubbles.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v133);
l_Details_0.Stats.Currency.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v133);
l_Details_0.Stats.Gems.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v133);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v133);
v133();
local l_Template_0 = l_Pets_0.Template;
l_Template_0.Parent = nil;
local v135 = nil;
local v136 = nil;
local v137 = "Power";
local v138 = {};
local v139 = false;
local l_MultiDelete_0 = l_Inner_0.Parent.MultiDelete;
local l_l_MultiDelete_0_0 = l_MultiDelete_0 --[[ copy: 100 -> 136 ]];
local l_v138_0 = v138 --[[ copy: 98 -> 137 ]];
do
    local l_v135_0, l_v136_0, l_v137_0, l_v139_0 = v135, v136, v137, v139;
    local function v148() --[[ Line: 442 ]] --[[ Name: updateMultiDeleteUI ]]
        -- upvalues: l_v139_0 (ref), l_l_MultiDelete_0_0 (copy), l_Tray_0 (copy), l_v138_0 (copy)
        if not l_v139_0 then
            l_l_MultiDelete_0_0.Visible = false;
            l_Tray_0.Buttons.Buttons.Delete.Button.Highlight.ImageColor3 = Color3.fromRGB(255, 255, 255);
            return;
        else
            local v147 = #l_v138_0;
            if v147 == 0 then
                l_l_MultiDelete_0_0.Label.Text = "Select pets to delete";
                l_l_MultiDelete_0_0.Label.TextSize = 28;
            else
                l_l_MultiDelete_0_0.Label.Text = ("Selected %* pet%* to delete"):format(v147, v147 == 1 and "" or "s");
                l_l_MultiDelete_0_0.Label.TextSize = 24;
            end;
            l_l_MultiDelete_0_0.Visible = true;
            l_Tray_0.Buttons.Buttons.Delete.Button.Highlight.ImageColor3 = Color3.fromRGB(235, 70, 70);
            return;
        end;
    end;
    v123 = function() --[[ Line: 461 ]] --[[ Name: getIsMultiDeleting ]]
        -- upvalues: l_v139_0 (ref)
        return l_v139_0;
    end;
    local l_v148_0 = v148 --[[ copy: 101 -> 138 ]];
    v124 = function() --[[ Line: 465 ]] --[[ Name: stopMultiDeleting ]]
        -- upvalues: l_v138_0 (copy), l_v139_0 (ref), l_v148_0 (copy), v113 (ref)
        table.clear(l_v138_0);
        l_v139_0 = false;
        l_v148_0();
        v113();
    end;
    local _ = function(v150, v151) --[[ Line: 473 ]] --[[ Name: findPet ]]
        for _, v153 in v150 do
            if v153.Id == v151 then
                return v153;
            end;
        end;
        return nil;
    end;
    local l_l_Template_0_0 = l_Template_0 --[[ copy: 94 -> 139 ]];
    local v171 = v8.new(function() --[[ Line: 483 ]]
        -- upvalues: l_l_Template_0_0 (copy), v17 (copy), v11 (copy), l_ScreenGui_0 (copy), v63 (copy), l_v139_0 (ref), v18 (copy), v16 (copy), l_CancelAutoExclusiveEggHatch_0 (ref), l_v138_0 (copy), l_v148_0 (copy), l_v135_0 (ref), l_v136_0 (ref), v113 (ref), v118 (ref)
        local v156 = l_l_Template_0_0:Clone();
        v17:OnEnter(v156.Inner.Button, function() --[[ Line: 486 ]]
            -- upvalues: v11 (ref), l_ScreenGui_0 (ref), v156 (copy), v63 (ref), l_v139_0 (ref), v18 (ref)
            local v157 = false;
            local v158 = v11:Get();
            if not v158 then
                return;
            elseif l_ScreenGui_0:FindFirstChild("Prompt") then
                return;
            else
                local v159 = string.sub(v156.Name, 1, 36);
                local v160;
                for _, v162 in v158.Pets do
                    if v162.Id == v159 then
                        v160 = v162;
                        v157 = true;
                    end;
                    if v157 then
                        break;
                    end;
                end;
                if not v157 then
                    v160 = nil;
                end;
                v157 = false;
                if not v160 then
                    return;
                elseif v63.Mode == "Touch" then
                    return;
                elseif l_v139_0 and v63.Mode ~= "Keyboard" then
                    return;
                else
                    return v18.fromPet(v160, v158);
                end;
            end;
        end);
        v16(v156.Inner.Button, function() --[[ Line: 510 ]]
            -- upvalues: v11 (ref), l_CancelAutoExclusiveEggHatch_0 (ref), v156 (copy), l_v139_0 (ref), l_v138_0 (ref), l_v148_0 (ref), l_v135_0 (ref), l_v136_0 (ref), v113 (ref), v118 (ref)
            local v163 = v11:Get();
            if not v163 then
                return;
            else
                l_CancelAutoExclusiveEggHatch_0();
                local l_Name_1 = v156.Name;
                local v165 = string.sub(l_Name_1, 1, 36);
                local v166 = nil;
                for _, v168 in v163.Pets do
                    if v168.Id == v165 then
                        v166 = v168;
                        break;
                    end;
                end;
                if not v166 then
                    return;
                else
                    if l_v139_0 then
                        if v166.Locked then
                            return;
                        else
                            local v169 = table.find(l_v138_0, l_Name_1);
                            if v169 ~= nil then
                                table.remove(l_v138_0, v169);
                            else
                                table.insert(l_v138_0, l_Name_1);
                            end;
                            l_v148_0();
                        end;
                    else
                        l_v135_0 = l_Name_1;
                        l_v136_0 = false;
                    end;
                    v113();
                    v118();
                    return;
                end;
            end;
        end);
        return v156;
    end, function(v170) --[[ Line: 554 ]]
        -- upvalues: v92 (copy), v13 (copy), v14 (copy)
        v92[v170.Inner.Background.UIGradient] = nil;
        v13.None(v170.Inner.Button);
        v13.None(v170.Inner.Button.Inner);
        v14:Remove(v170.Inner.Effect);
    end);
    local v173 = v8.new(function() --[[ Line: 563 ]]
        local l_Frame_0 = Instance.new("Frame");
        l_Frame_0.BackgroundTransparency = 1;
        return l_Frame_0;
    end);
    local l_Text_1 = l_Search_0.Search.Bar.TextBox.Text;
    local v175 = string.lower((string.gsub(l_Text_1, "%s", "")));
    l_Text_1 = nil;
    local v176 = nil;
    local v177 = {};
    local l_v177_0 = v177 --[[ copy: 108 -> 140 ]];
    local l_l_UIGridLayout_0_0 = l_UIGridLayout_0 --[[ copy: 91 -> 141 ]];
    local l_v173_0 = v173 --[[ copy: 104 -> 142 ]];
    local l_v171_0 = v171 --[[ copy: 103 -> 143 ]];
    local v222 = v7.new(l_ScrollingFrame_0, l_UIGridLayout_0, function(v182) --[[ Line: 575 ]]
        -- upvalues: v11 (copy), l_Text_1 (ref), v176 (ref), l_Search_0 (copy), v175 (ref), v43 (copy), l_v137_0 (ref), l_v177_0 (copy), v15 (copy), v54 (copy), l_l_UIGridLayout_0_0 (copy), v9 (copy), l_v173_0 (copy), l_v171_0 (copy), l_v135_0 (ref), v42 (copy), l_v138_0 (copy)
        local v183 = v11:Get();
        if not v183 then
            return function() --[[ Line: 578 ]]
                return nil;
            end, function() --[[ Line: 578 ]]
                return 0;
            end;
        else
            local l_l_Text_1_0 = l_Text_1;
            local l_v176_0 = v176;
            local l_Text_2 = l_Search_0.Search.Bar.TextBox.Text;
            local v187 = string.lower((string.gsub(l_Text_2, "%s", "")));
            if not v176 or not l_l_Text_1_0 or not v182 or v175 ~= v187 then
                l_Text_2 = {};
                l_l_Text_1_0 = {};
                local v188 = {};
                for _, v190 in v183.Teams[v183.TeamEquipped].Pets do
                    v188[v190] = (v188[v190] or 0) + 1;
                end;
                local v191 = {};
                local v192 = {};
                for _, v194 in v183.Pets do
                    table.insert(v191, v194.Id);
                    v192[v194.Id] = v194;
                end;
                v43(v191, v192, l_v137_0);
                table.clear(l_v177_0);
                for _, v196 in v191 do
                    local v197 = v192[v196];
                    local l_Name_2 = v197.Name;
                    local l_Name_3 = v197.Name;
                    l_Name_3 = ("%* %*"):format(v15[v197.Name].Rarity, l_Name_3);
                    if v197.Mythic then
                        l_Name_3 = ("Mythic %*"):format(l_Name_3);
                    end;
                    if v197.Shiny then
                        l_Name_3 = ("Shiny %*"):format(l_Name_3);
                    end;
                    local v200 = string.lower((string.gsub(l_Name_3, "%s", "")));
                    if #v187 <= 0 or string.find(v200, v187, 1, true) then
                        if v15[l_Name_2].Rarity == "Secret" then
                            l_Text_2[v196] = true;
                        end;
                        local v201 = v188[v196] or 0;
                        if v197.Amount == nil then
                            if v201 <= 0 then
                                local v202 = ("%*-0"):format(v196);
                                table.insert(l_l_Text_1_0, v202);
                                l_v177_0[v196] = v202;
                            end;
                            v188[v196] = v201 - 1;
                        else
                            local v203 = math.max(0, v197.Amount - v201);
                            if v203 > 0 then
                                if v54:GetMinStackSize(v183, v197) <= v203 then
                                    local v204 = ("%*-stack"):format(v196);
                                    table.insert(l_l_Text_1_0, v204);
                                    l_v177_0[v196] = v204;
                                else
                                    for v205 = 1, v203 do
                                        table.insert(l_l_Text_1_0, (("%*-%*"):format(v196, v205 - 1)));
                                    end;
                                    l_v177_0[v196] = ("%*-0"):format(v196);
                                end;
                            end;
                            v188[v196] = v201 - v203;
                        end;
                    end;
                end;
                local v206 = next(l_Text_2) == nil and 6 or 8;
                if v206 == 6 then
                    l_l_UIGridLayout_0_0.CellSize = UDim2.fromOffset(135, 135);
                else
                    l_l_UIGridLayout_0_0.CellSize = UDim2.fromOffset(100, 100);
                end;
                l_v176_0 = v9(l_l_Text_1_0, l_Text_2, v206);
                l_Text_1 = l_l_Text_1_0;
                v176 = l_v176_0;
                v175 = v187;
            end;
            l_Text_2 = {};
            for _, v208 in v183.Pets do
                l_Text_2[v208.Id] = v208;
            end;
            local v209 = {};
            for _, v211 in v183.Teams[v183.TeamEquipped].Pets do
                v209[v211] = (v209[v211] or 0) + 1;
            end;
            return function(v212) --[[ Line: 672 ]]
                -- upvalues: l_v176_0 (ref), l_v173_0 (ref), l_Text_2 (copy), v15 (ref), l_v171_0 (ref), l_v135_0 (ref), v42 (ref), v209 (copy), l_v138_0 (ref)
                local v213 = l_v176_0[v212];
                if v213 == nil then
                    return nil;
                elseif v213 == "" then
                    return l_v173_0:Get();
                else
                    local v214 = string.sub(v213, 1, 36);
                    local v215 = l_Text_2[v214];
                    local v216 = string.sub(v213, -5) == "stack";
                    local v217 = v15[v215.Name].Rarity == "Secret";
                    local v218 = l_v171_0:Get();
                    v218.Name = v213;
                    if v217 then
                        v218.Inner.Size = UDim2.new(2, 15, 2, 15);
                    else
                        v218.Inner.Size = UDim2.new(1, 0, 1, 0);
                    end;
                    local v219 = v213 == l_v135_0;
                    if not v216 then
                        v42.set(v218, v215, false, v219);
                    else
                        local v220 = (v215.Amount or 1) - (v209[v214] or 0);
                        local v221 = table.clone(v215);
                        v221.Amount = v220;
                        v42.set(v218, v221, v220 > 1, v219);
                    end;
                    v218.Inner.Button.Deleting.Visible = table.find(l_v138_0, v213) ~= nil;
                    return v218;
                end;
            end, function() --[[ Line: 709 ]]
                -- upvalues: l_v171_0 (ref), l_v173_0 (ref), l_v176_0 (ref)
                l_v171_0:Done();
                l_v173_0:Done();
                return #l_v176_0;
            end;
        end;
    end);
    local l_Equip_0 = l_Inner_0.Pets.Details.Buttons.Equip;
    local l_Unequip_0 = l_Inner_0.Pets.Details.Buttons.Unequip;
    local l_Shiny_0 = l_Inner_0.Pets.Details.Buttons.Shiny;
    local v226 = false;
    local function _(v227) --[[ Line: 723 ]] --[[ Name: fmtMult ]]
        -- upvalues: v31 (copy)
        if v227 >= 10 then
            return v31(v227);
        else
            return string.format("%0.1f", v227):gsub("0+$", ""):gsub("%.$", "");
        end;
    end;
    local l_l_Equip_0_0 = l_Equip_0 --[[ copy: 110 -> 144 ]];
    local l_l_Unequip_0_0 = l_Unequip_0 --[[ copy: 111 -> 145 ]];
    local l_l_Shiny_0_0 = l_Shiny_0 --[[ copy: 112 -> 146 ]];
    local l_v222_0 = v222 --[[ copy: 109 -> 147 ]];
    v113 = function() --[[ Line: 730 ]] --[[ Name: updatePets ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), l_v136_0 (ref), v13 (copy), l_l_Details_0_0 (copy), v40 (copy), v47 (copy), v31 (copy), v50 (copy), v55 (copy), v42 (copy), v39 (copy), l_l_Equip_0_0 (copy), l_l_Unequip_0_0 (copy), v53 (copy), l_l_Shiny_0_0 (copy), v226 (ref), l_Tray_0 (copy), l_v137_0 (ref), l_v222_0 (copy)
        local v233 = false;
        local v234 = false;
        local v235 = v11:Get();
        if not v235 then
            return;
        else
            local v236 = nil;
            local v237 = nil;
            if l_v135_0 then
                v236 = string.sub(l_v135_0, 1, 36);
                local l_Pets_1 = v235.Pets;
                local l_v236_0 = v236;
                for _, v241 in l_Pets_1 do
                    if v241.Id == l_v236_0 then
                        v237 = v241;
                        v233 = true;
                    end;
                    if v233 then
                        break;
                    end;
                end;
                if not v233 then
                    v237 = nil;
                end;
                v233 = false;
                if not v237 then
                    l_v135_0 = nil;
                end;
            end;
            if l_v135_0 and v236 and v237 then
                local v242 = string.sub(l_v135_0, 1, 36);
                local v243;
                for _, v245 in v235.Pets do
                    if v245.Id == v242 then
                        v243 = v245;
                        v234 = true;
                    end;
                    if v234 then
                        break;
                    end;
                end;
                if not v234 then
                    v243 = nil;
                end;
                v234 = false;
                if not v243 then
                    return warn("didn't find selected pet? should not happen");
                else
                    local v246 = 0;
                    for _, v248 in v235.Teams[v235.TeamEquipped].Pets do
                        if v242 == v248 then
                            v246 = v246 + 1;
                        end;
                    end;
                    local v249 = 0;
                    for _, v251 in v235.Pets do
                        if v251.Id == v242 then
                            v249 = v251.Amount or 1;
                            break;
                        end;
                    end;
                    local v252 = l_v136_0 and v246 > 0;
                    if v243.Shiny then
                        v13.Cycle(l_l_Details_0_0.Title, "Shiny", {
                            Speed = 0.5
                        });
                    else
                        v13.None(l_l_Details_0_0.Title);
                    end;
                    l_l_Details_0_0.Title.Text = v243.Name;
                    l_l_Details_0_0.Title.Visible = true;
                    l_l_Details_0_0.Icon.Visible = true;
                    l_l_Details_0_0.Buttons.Visible = true;
                    local l_v40_Stats_0 = v40:GetStats(v243, v235);
                    local v254 = l_v40_Stats_0.Bubbles or 0;
                    local v255 = l_v40_Stats_0.Gems or 0;
                    local v256 = "Coins";
                    local v257 = nil;
                    for v258 in v47 do
                        if l_v40_Stats_0[v258] and v258 ~= "Gems" and v258 ~= "Bubbles" then
                            v256 = v258;
                            break;
                        end;
                    end;
                    v257 = l_v40_Stats_0[v256] or 0;
                    l_l_Details_0_0.Stats.Bubbles.Amount.Text = ("+%*"):format((v31(v254)));
                    l_l_Details_0_0.Stats.Gems.Amount.Text = ("x%*"):format(if v255 >= 10 then v31(v255) else string.format("%0.1f", v255):gsub("0+$", ""):gsub("%.$", ""));
                    local l_Amount_0 = l_l_Details_0_0.Stats.Currency.Amount;
                    local v260 = "x%*";
                    local l_v257_0 = v257;
                    l_Amount_0.Text = v260:format(if l_v257_0 >= 10 then v31(l_v257_0) else string.format("%0.1f", l_v257_0):gsub("0+$", ""):gsub("%.$", ""));
                    l_l_Details_0_0.Stats.Currency.Icon.Image = v47[v256].Image;
                    l_l_Details_0_0.Stats.Currency.Amount.TextColor3 = v47[v256].Color;
                    l_Amount_0 = v255 > 0 and 3 or 2;
                    local v262 = if v243.Enchants then #v243.Enchants else 0;
                    v260 = UDim2.new(0, 0, 0, 0);
                    local v263 = 0;
                    local v264 = UDim2.new(0, 0, 0, 0);
                    l_v257_0 = 0;
                    if l_Amount_0 < 3 or v262 == 0 then
                        v260 = UDim2.new(1, 0, 0, 50);
                        v263 = 38;
                        v264 = UDim2.new(1, 0, 0, 35);
                        l_v257_0 = 28;
                    elseif v262 == 1 then
                        v260 = UDim2.new(1, 0, 0, 42);
                        v263 = 33;
                        v264 = UDim2.new(1, 0, 0, 35);
                        l_v257_0 = 28;
                    else
                        v260 = UDim2.new(1, 0, 0, 34);
                        v263 = 32;
                        v264 = UDim2.new(1, 0, 0, 30);
                        l_v257_0 = 25;
                    end;
                    l_l_Details_0_0.Stats.Bubbles.Size = v260;
                    l_l_Details_0_0.Stats.Bubbles.Amount.TextSize = v263;
                    l_l_Details_0_0.Stats.Gems.Size = v260;
                    l_l_Details_0_0.Stats.Gems.Amount.TextSize = v263;
                    l_l_Details_0_0.Stats.Currency.Size = v260;
                    l_l_Details_0_0.Stats.Currency.Amount.TextSize = v263;
                    l_l_Details_0_0.Enchants.Enchant1.Size = v264;
                    l_l_Details_0_0.Enchants.Enchant1.Title.TextSize = l_v257_0;
                    l_l_Details_0_0.Enchants.Enchant2.Size = v264;
                    l_l_Details_0_0.Enchants.Enchant2.Title.TextSize = l_v257_0;
                    l_l_Details_0_0.Stats.Gems.Visible = v255 > 0;
                    l_l_Details_0_0.Stats.Visible = true;
                    local v265 = v243.Enchants or {};
                    for v266 = 1, 2 do
                        local l_FirstChild_0 = l_l_Details_0_0.Enchants:FindFirstChild((("Enchant%*"):format(v266)));
                        local v268 = v265[v266];
                        if v268 == nil then
                            l_FirstChild_0.Visible = false;
                        else
                            l_FirstChild_0.Visible = true;
                            l_FirstChild_0.Title.Text = v50:GetFullTitle(v268.Id, v268.Level);
                            l_FirstChild_0.Title.TextColor3 = v55[v268.Id].Color;
                        end;
                    end;
                    l_l_Details_0_0.Enchants.Visible = #v265 > 0;
                    v42.set(l_l_Details_0_0.Icon, v243, false, false);
                    local l_v39_LevelFromPet_0 = v39:GetLevelFromPet(v243);
                    local l_XP_0 = v243.XP;
                    local l_v39_TotalXPForLevel_0 = v39:GetTotalXPForLevel(v243.Name, l_v39_LevelFromPet_0);
                    local l_v39_TotalXPForLevel_1 = v39:GetTotalXPForLevel(v243.Name, l_v39_LevelFromPet_0 + 1);
                    local v273 = v39:IsMaxLevel(v243);
                    local v274 = ("%* / %* XP"):format(v31(l_XP_0 - l_v39_TotalXPForLevel_0, 10000), (v31(l_v39_TotalXPForLevel_1 - l_v39_TotalXPForLevel_0, 10000)));
                    local v275 = (l_XP_0 - l_v39_TotalXPForLevel_0) / (l_v39_TotalXPForLevel_1 - l_v39_TotalXPForLevel_0);
                    if v273 then
                        v275 = 1;
                    end;
                    l_l_Details_0_0.XP.Progress.Fill.Size = UDim2.new(v275, 0, 1, 6);
                    l_l_Details_0_0.XP.Progress.Fill.Visible = v275 > 0.01;
                    l_l_Details_0_0.XP.Label.Text = v273 and "Max" or v274;
                    l_l_Details_0_0.XP.Visible = true;
                    l_l_Equip_0_0.Visible = not v252;
                    l_l_Unequip_0_0.Visible = v252;
                    l_v39_LevelFromPet_0 = v243.Locked ~= true;
                    l_l_Details_0_0.Buttons.Delete.Visible = true;
                    l_l_Details_0_0.Buttons.Delete.Button.Label.Text = l_v39_LevelFromPet_0 and "Delete" or "Locked";
                    l_l_Details_0_0.Buttons.Delete.Button.Label.TextTransparency = l_v39_LevelFromPet_0 and 0 or 0.35;
                    l_l_Details_0_0.Buttons.Delete.Button.Label.UIStroke.Transparency = l_v39_LevelFromPet_0 and 0 or 0.7;
                    l_l_Details_0_0.Buttons.Delete.Button.BackgroundTransparency = l_v39_LevelFromPet_0 and 0 or 0.35;
                    l_l_Details_0_0.Buttons.Delete.Button.UIStroke.Transparency = l_v39_LevelFromPet_0 and 0 or 0.5;
                    l_l_Details_0_0.Buttons.Delete.Button.Active = l_v39_LevelFromPet_0;
                    l_l_Details_0_0.Buttons.Delete.Button.Selectable = l_v39_LevelFromPet_0;
                    l_XP_0 = 0;
                    l_v39_TotalXPForLevel_0 = 0;
                    if v53:CanUse(v243) then
                        l_XP_0 = v53:GetOwnedCount(v235, v243);
                        l_v39_TotalXPForLevel_0 = v53:GetRequiredCount(v243);
                    end;
                    l_v39_TotalXPForLevel_1 = l_l_Shiny_0_0;
                    v273 = false;
                    if v243.Shiny ~= true then
                        v273 = v226;
                    end;
                    l_v39_TotalXPForLevel_1.Visible = v273;
                    l_l_Shiny_0_0.Button.Label.Text = l_v39_LevelFromPet_0 and ("Shiny (%*/%*)"):format(v31(l_XP_0, 1000), l_v39_TotalXPForLevel_0) or "Locked";
                    l_l_Shiny_0_0.Button.Label.TextTransparency = l_v39_LevelFromPet_0 and 0 or 0.35;
                    l_l_Shiny_0_0.Button.Label.UIStroke.Transparency = l_v39_LevelFromPet_0 and 0 or 0.7;
                    l_l_Shiny_0_0.Button.BackgroundTransparency = l_v39_LevelFromPet_0 and 0 or 0.35;
                    l_l_Shiny_0_0.Button.UIStroke.Transparency = l_v39_LevelFromPet_0 and 0 or 0.5;
                    l_l_Shiny_0_0.Button.Active = l_v39_LevelFromPet_0;
                    l_l_Shiny_0_0.Button.Selectable = l_v39_LevelFromPet_0;
                    l_l_Details_0_0.Icon.Inner.Button.Inner.Lock.Button.Image = l_v39_LevelFromPet_0 and "rbxassetid://126917662710411" or "rbxassetid://87432707648426";
                end;
            else
                l_l_Details_0_0.Title.Visible = false;
                l_l_Details_0_0.Icon.Visible = false;
                l_l_Details_0_0.Stats.Visible = false;
                l_l_Details_0_0.Buttons.Visible = false;
                l_l_Details_0_0.XP.Visible = false;
                l_l_Details_0_0.Enchants.Visible = false;
            end;
            l_Tray_0.Buttons.Buttons.Sort.Button.Label.Text = ("\226\135\133 %*"):format(l_v137_0);
            l_v222_0:Update();
            return;
        end;
    end;
    local function _() --[[ Line: 964 ]] --[[ Name: updateSortButton ]]
        -- upvalues: l_v137_0 (ref), v34 (copy), l_Tray_0 (copy), v24 (copy)
        if l_v137_0 == "Rarity" then
            v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Purple);
            return;
        else
            v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Orange);
            return;
        end;
    end;
    l_ScrollingFrame_0:GetPropertyChangedSignal("CanvasPosition"):Connect(function() --[[ Line: 972 ]]
        -- upvalues: v17 (copy)
        v17:Hide();
    end);
    v11:ConnectDataChanged("MasteryUpgrades", function(v277) --[[ Line: 976 ]]
        -- upvalues: v226 (ref)
        if v226 then
            return;
        else
            for _, v279 in v277.MasteryUpgrades do
                if v279.Type == "GoldenEgg" then
                    v226 = true;
                    return;
                end;
            end;
            return;
        end;
    end);
    if l_v137_0 == "Rarity" then
        v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Purple);
    else
        v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Orange);
    end;
    v16(l_Tray_0.Buttons.Buttons.Sort.Button, function() --[[ Line: 989 ]]
        -- upvalues: l_v137_0 (ref), v113 (ref), v34 (copy), l_Tray_0 (copy), v24 (copy)
        if l_v137_0 == "Rarity" then
            l_v137_0 = "Power";
        else
            l_v137_0 = "Rarity";
        end;
        v113();
        if l_v137_0 == "Rarity" then
            v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Purple);
            return;
        else
            v34(l_Tray_0.Buttons.Buttons.Sort.Button, v24.Button.Orange);
            return;
        end;
    end);
    v34(l_Equip_0.Button, v24.Button.Green);
    v16(l_Equip_0.Button, function() --[[ Line: 1001 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), v21 (copy), v32 (copy), v23 (copy), v24 (copy), v34 (copy), v16 (copy), v33 (copy), v20 (copy), l_v136_0 (ref)
        local v280 = v11:Get();
        if not v280 then
            return;
        elseif not l_v135_0 then
            return;
        else
            local v281 = v280.Teams[v280.TeamEquipped];
            if #v281.Pets >= v21:GetMaxPetsEquipped(v280) then
                local v284 = v32.new("Max Pets"):Gamepass("Extra Equips"):Text((("You currently have %*!"):format((v23.autoColor("too many pets equipped", v24.Text.Cyan))))):Button(function(v282, v283) --[[ Line: 1014 ]]
                    -- upvalues: v34 (ref), v24 (ref), v16 (ref)
                    v282.Label.Text = "Okay";
                    v34(v282, v24.Button.Green);
                    v16(v282, v283);
                end);
                return v33(v284:Build());
            else
                local v285 = string.sub(l_v135_0, 1, 36);
                v20:FireServer("EquipPet", v285);
                local v286 = 0;
                for _, v288 in v281.Pets do
                    if v288 == v285 then
                        v286 = v286 + 1;
                    end;
                end;
                l_v135_0 = ("%*-team-%*"):format(v285, v286);
                l_v136_0 = true;
                return;
            end;
        end;
    end);
    v34(l_Unequip_0.Button, v24.Button.Pink);
    local l_v177_1 = v177 --[[ copy: 108 -> 148 ]];
    v16(l_Unequip_0.Button, function() --[[ Line: 1037 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), v20 (copy), l_v177_1 (copy), l_v136_0 (ref)
        if not v11:Get() then
            return;
        elseif not l_v135_0 then
            return;
        else
            local v290 = string.sub(l_v135_0, 1, 36);
            v20:FireServer("UnequipPet", v290);
            l_v135_0 = l_v177_1[v290] or ("%*-0"):format(v290);
            l_v136_0 = false;
            return;
        end;
    end);
    v16(l_Details_0.Icon.Inner.Button.Inner.Lock.Button, function() --[[ Line: 1055 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), v20 (copy), l_v136_0 (ref)
        local v291 = v11:Get();
        if not v291 then
            return;
        elseif not l_v135_0 then
            return;
        else
            local v292 = string.sub(l_v135_0, 1, 36);
            local v293 = nil;
            for _, v295 in v291.Pets do
                if v295.Id == v292 then
                    v293 = v295;
                    break;
                end;
            end;
            if not v293 then
                return;
            elseif v293.Locked then
                v20:FireServer("UnlockPet", v292, l_v136_0);
                return;
            else
                v20:FireServer("LockPet", v292, l_v136_0);
                return;
            end;
        end;
    end);
    v34(l_Shiny_0.Button, v24.Button.Gold);
    v16(l_Shiny_0.Button, function() --[[ Line: 1084 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), v52 (copy), v22 (copy)
        local v296 = v11:Get();
        if not v296 then
            return;
        elseif not l_v135_0 then
            return;
        else
            local v297 = string.sub(l_v135_0, 1, 36);
            local v298 = nil;
            for _, v300 in v296.Pets do
                if v300.Id == v297 then
                    v298 = v300;
                    break;
                end;
            end;
            if not v298 then
                return;
            else
                v52:SetSelectedPetId(v297);
                v22:Open("Shiny");
                return;
            end;
        end;
    end);
    v34(l_Inner_0.Pets.Details.Buttons.Delete.Button, v24.Button.Red);
    v16(l_Inner_0.Pets.Details.Buttons.Delete.Button, function() --[[ Line: 1111 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), v32 (copy), v34 (copy), v24 (copy), v16 (copy), v20 (copy), l_v136_0 (ref), v31 (copy), v23 (copy), v36 (copy), v33 (copy)
        local v301 = v11:Get();
        if not v301 then
            return;
        elseif not l_v135_0 then
            return;
        else
            local v302 = string.sub(l_v135_0, 1, 36);
            local v303 = nil;
            for _, v305 in v301.Pets do
                if v305.Id == v302 then
                    v303 = v305;
                    break;
                end;
            end;
            if not v303 then
                return;
            else
                local v306 = nil;
                if v303.Amount == nil then
                    v306 = v32.new("Delete Pet"):Text("Are you sure you want to delete this pet?"):Button(function(v307, v308) --[[ Line: 1138 ]]
                        -- upvalues: v34 (ref), v24 (ref), v16 (ref), v20 (ref), v302 (copy), l_v136_0 (ref), l_v135_0 (ref)
                        v307.Label.Text = "Yes";
                        v34(v307, v24.Button.Green);
                        v16(v307, function() --[[ Line: 1141 ]]
                            -- upvalues: v20 (ref), v302 (ref), l_v136_0 (ref), l_v135_0 (ref), v308 (copy)
                            v20:FireServer("DeletePet", v302, 1, l_v136_0);
                            l_v135_0 = nil;
                            l_v136_0 = false;
                            v308();
                        end);
                    end):Button(function(v309, v310) --[[ Line: 1148 ]]
                        -- upvalues: v34 (ref), v24 (ref), v16 (ref)
                        v309.Label.Text = "No";
                        v34(v309, v24.Button.Red);
                        v16(v309, v310);
                    end);
                else
                    local v311 = 1;
                    local v312 = v31(v303.Amount);
                    local v313 = v23.new():size(34)((("\n\nYou currently have %*"):format((v23.autoColor(v312, v24.Text.Pink)))));
                    do
                        local l_v311_0 = v311;
                        v306 = v32.new("Delete Pet"):Text((("Select how many %* you want to delete!%*"):format(v23.autoColor(v36(v303.Name), v24.Text.Cyan), v313))):NumberField({
                            Default = 1, 
                            Range = NumberRange.new(1, v303.Amount), 
                            OnChanged = function(v315) --[[ Line: 1162 ]] --[[ Name: OnChanged ]]
                                -- upvalues: l_v311_0 (ref)
                                l_v311_0 = v315;
                            end
                        }):Button(function(v316, v317) --[[ Line: 1166 ]]
                            -- upvalues: v34 (ref), v24 (ref), v16 (ref), v20 (ref), v302 (copy), l_v311_0 (ref), l_v136_0 (ref), l_v135_0 (ref)
                            v316.Label.Text = "Confirm";
                            v34(v316, v24.Button.Pink);
                            v16(v316, function() --[[ Line: 1169 ]]
                                -- upvalues: v20 (ref), v302 (ref), l_v311_0 (ref), l_v136_0 (ref), l_v135_0 (ref), v317 (copy)
                                v20:FireServer("DeletePet", v302, l_v311_0, l_v136_0);
                                l_v135_0 = nil;
                                l_v136_0 = false;
                                v317();
                            end);
                        end):Button(function(v318, v319) --[[ Line: 1176 ]]
                            -- upvalues: v34 (ref), v24 (ref), v16 (ref)
                            v318.Label.Text = "Cancel";
                            v34(v318, v24.Button.Red);
                            v16(v318, v319);
                        end);
                    end;
                end;
                v33(v306:Build());
                return;
            end;
        end;
    end);
    local l_Team_0 = l_Pets_0.Parent.Team;
    local l_List_0 = l_Team_0.Main.List;
    local l_Template_1 = l_List_0.Template;
    l_Template_1.Parent = nil;
    local l_TemplateBlank_0 = l_List_0.TemplateBlank;
    l_TemplateBlank_0.Parent = nil;
    local l_l_Template_1_0 = l_Template_1 --[[ copy: 119 -> 149 ]];
    local v332 = v8.new(function() --[[ Line: 1199 ]]
        -- upvalues: l_l_Template_1_0 (copy), v17 (copy), v11 (copy), v63 (copy), l_ScreenGui_0 (copy), v18 (copy), v16 (copy), l_v139_0 (ref), l_v135_0 (ref), l_v136_0 (ref), v113 (ref), v118 (ref)
        local v325 = l_l_Template_1_0:Clone();
        v17:OnEnter(v325.Inner.Button, function() --[[ Line: 1202 ]]
            -- upvalues: v11 (ref), v63 (ref), l_ScreenGui_0 (ref), v325 (copy), v18 (ref)
            local v326 = false;
            local v327 = v11:Get();
            if not v327 then
                return;
            elseif v63.Mode == "Touch" then
                return;
            elseif l_ScreenGui_0:FindFirstChild("Prompt") then
                return;
            else
                local v328 = string.sub(v325.Name, 1, 36);
                local v329;
                for _, v331 in v327.Pets do
                    if v331.Id == v328 then
                        v329 = v331;
                        v326 = true;
                    end;
                    if v326 then
                        break;
                    end;
                end;
                if not v326 then
                    v329 = nil;
                end;
                v326 = false;
                if not v329 then
                    return;
                else
                    return v18.fromPet(v329, v327);
                end;
            end;
        end);
        v16(v325.Inner.Button, function() --[[ Line: 1223 ]]
            -- upvalues: v11 (ref), l_v139_0 (ref), l_v135_0 (ref), v325 (copy), l_v136_0 (ref), v113 (ref), v118 (ref)
            if not v11:Get() then
                return;
            elseif l_v139_0 then
                return;
            else
                l_v135_0 = v325.Name;
                l_v136_0 = true;
                v113();
                v118();
                return;
            end;
        end);
        return v325;
    end);
    local l_l_List_0_0 = l_List_0 --[[ copy: 118 -> 150 ]];
    local l_l_Team_0_0 = l_Team_0 --[[ copy: 117 -> 151 ]];
    v118 = function() --[[ Line: 1247 ]] --[[ Name: updateTeams ]]
        -- upvalues: v11 (copy), v15 (copy), v332 (copy), l_l_List_0_0 (copy), l_v135_0 (ref), v42 (copy), v21 (copy), l_TemplateBlank_0 (copy), l_l_Team_0_0 (copy)
        local v335 = false;
        local v336 = v11:Get();
        if not v336 then
            return;
        else
            local l_Pets_2 = v336.Pets;
            local l_Teams_0 = v336.Teams;
            local l_TeamEquipped_0 = v336.TeamEquipped;
            local v340 = l_Teams_0[l_TeamEquipped_0];
            local v341 = {};
            for v342 in v340.Pets do
                table.insert(v341, v342);
            end;
            table.sort(v341, function(v343, v344) --[[ Line: 1263 ]]
                -- upvalues: l_Pets_2 (copy), v340 (copy), v15 (ref)
                local v345 = false;
                local v346 = false;
                local l_l_Pets_2_0 = l_Pets_2;
                local v348 = v340.Pets[v343];
                local v349;
                for _, v351 in l_l_Pets_2_0 do
                    if v351.Id == v348 then
                        v349 = v351;
                        v345 = true;
                    end;
                    if v345 then
                        break;
                    end;
                end;
                if not v345 then
                    v349 = nil;
                end;
                v345 = false;
                v348 = l_Pets_2;
                local v352 = v340.Pets[v344];
                for _, v354 in v348 do
                    if v354.Id == v352 then
                        l_l_Pets_2_0 = v354;
                        v346 = true;
                    end;
                    if v346 then
                        break;
                    end;
                end;
                if not v346 then
                    l_l_Pets_2_0 = nil;
                end;
                v346 = false;
                v348 = false;
                if v349 ~= nil then
                    v348 = v15[v349.Name].Rarity == "Secret";
                end;
                v352 = false;
                if l_l_Pets_2_0 ~= nil then
                    v352 = v15[l_l_Pets_2_0.Name].Rarity == "Secret";
                end;
                if v348 ~= v352 then
                    return v348;
                else
                    local v355 = false;
                    if v349 ~= nil then
                        v355 = v349.Locked == true;
                    end;
                    local v356 = false;
                    if l_l_Pets_2_0 ~= nil then
                        v356 = l_l_Pets_2_0.Locked == true;
                    end;
                    if v355 ~= v356 then
                        return v355;
                    else
                        return v340.Pets[v343] < v340.Pets[v344];
                    end;
                end;
            end);
            local v357 = {};
            for v358, v359 in v341 do
                local v360 = v340.Pets[v359];
                local v361;
                for _, v363 in l_Pets_2 do
                    if v363.Id == v360 then
                        v361 = v363;
                        v335 = true;
                    end;
                    if v335 then
                        break;
                    end;
                end;
                if not v335 then
                    v361 = nil;
                end;
                v335 = false;
                if v361 then
                    local v364 = v332:Get();
                    local v365 = v357[v360] or 0;
                    local v366 = ("%*-team-%*"):format(v360, v365);
                    v364.Name = v366;
                    v357[v360] = v365 + 1;
                    v364.LayoutOrder = v358;
                    if v15[v361.Name].Rarity == "Secret" then
                        v364.Size = UDim2.fromOffset(130, 130);
                    else
                        v364.Size = UDim2.fromOffset(100, 100);
                    end;
                    v364.Parent = l_l_List_0_0;
                    local v367 = l_v135_0 == v366;
                    v42.set(v364, v361, false, v367, true);
                end;
            end;
            v332:Done();
            local l_v21_MaxPetsEquipped_0 = v21:GetMaxPetsEquipped(v336);
            local v369 = l_v21_MaxPetsEquipped_0 - #v340.Pets;
            l_TemplateBlank_0.LayoutOrder = 99;
            l_TemplateBlank_0.Inner.Button.Amount.Text = ("+%* slot%*"):format(v369, v369 == 1 and "" or "s");
            l_TemplateBlank_0.Parent = if v369 > 0 then l_l_List_0_0 else nil;
            local l_v21_MaxPetTeams_0 = v21:GetMaxPetTeams(v336);
            if l_v21_MaxPetTeams_0 == 1 then
                l_l_Team_0_0.Title.Main.Label.Text = ("<stroke color=\"#00295E\" joins=\"miter\" thickness=\"2\">%* / %* pets equipped</stroke>"):format(#v340.Pets, l_v21_MaxPetsEquipped_0);
            else
                local v371 = v340.Name or ("Team %*"):format(l_TeamEquipped_0);
                l_l_Team_0_0.Title.Main.Label.Text = ("<stroke color=\"#00295E\" joins=\"miter\" thickness=\"2\">%* <font size=\"22\"> (%* / %* pets)</font></stroke>"):format(v371, #v340.Pets, l_v21_MaxPetsEquipped_0);
            end;
            l_l_Team_0_0.Main.Left.Visible = l_TeamEquipped_0 > 1;
            l_l_Team_0_0.Main.Right.Visible = l_TeamEquipped_0 < l_v21_MaxPetTeams_0;
            return;
        end;
    end;
    local l_Label_0 = l_Team_0.Title.Main.Label;
    local function v374() --[[ Line: 1336 ]] --[[ Name: updateTeamNameSize ]]
        -- upvalues: l_Label_0 (copy), l_UIScale_0 (copy)
        local v373 = math.ceil(l_Label_0.TextBounds.X / l_UIScale_0.Scale) + 1;
        l_Label_0.Size = UDim2.new(0, v373, 1, 0);
    end;
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v374);
    l_Label_0:GetPropertyChangedSignal("TextBounds"):Connect(v374);
    local v375 = math.ceil(l_Label_0.TextBounds.X / l_UIScale_0.Scale) + 1;
    l_Label_0.Size = UDim2.new(0, v375, 1, 0);
    v375 = l_Team_0.Main.List;
    local l_l_Pets_0_0 = l_Pets_0 --[[ copy: 90 -> 152 ]];
    local function v378() --[[ Line: 1348 ]] --[[ Name: updateInnerLayout ]]
        -- upvalues: v375 (copy), l_UIScale_0 (copy), l_l_Team_0_0 (copy), l_l_Pets_0_0 (copy)
        local v377 = math.ceil(v375.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
        l_l_Team_0_0.Size = UDim2.new(1, 0, 0, v377 + 65);
        l_l_Pets_0_0.Position = UDim2.fromOffset(0, v377 + 85);
    end;
    v375.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v378);
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v378);
    local v379 = math.ceil(v375.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
    l_Team_0.Size = UDim2.new(1, 0, 0, v379 + 65);
    l_Pets_0.Position = UDim2.fromOffset(0, v379 + 85);
    v379 = function(v380, v381) --[[ Line: 1359 ]] --[[ Name: trySwitchToTeam ]]
        -- upvalues: l_v135_0 (ref), l_v136_0 (ref), v20 (copy)
        local v382 = v380.Teams[v381];
        if not v382 then
            return;
        else
            if l_v135_0 ~= nil then
                local v383 = string.sub(l_v135_0, 1, 36);
                local v384 = nil;
                for _, v386 in v382.Pets do
                    if v386 == v383 then
                        v384 = ("%*-team-0"):format(v383);
                        break;
                    end;
                end;
                local v387 = ("%*-0"):format(v383);
                if v384 then
                    l_v135_0 = v384;
                    l_v136_0 = true;
                else
                    l_v135_0 = v387;
                    l_v136_0 = false;
                end;
            end;
            v20:FireServer("EquipTeam", v381);
            return;
        end;
    end;
    v34(l_Team_0.Main.Left.Button, v24.Button.Default);
    v16(l_Team_0.Main.Left.Button, function() --[[ Line: 1391 ]]
        -- upvalues: v11 (copy), v379 (copy)
        local v388 = v11:Get();
        if not v388 then
            return;
        else
            v379(v388, v388.TeamEquipped - 1);
            return;
        end;
    end);
    v34(l_Team_0.Main.Right.Button, v24.Button.Default);
    v16(l_Team_0.Main.Right.Button, function() --[[ Line: 1400 ]]
        -- upvalues: v11 (copy), v379 (copy)
        local v389 = v11:Get();
        if not v389 then
            return;
        else
            v379(v389, v389.TeamEquipped + 1);
            return;
        end;
    end);
    local v390 = {
        "Inventory", 
        "Pets", 
        "Teams", 
        "TeamEquipped", 
        "MasteryUpgrades", 
        "MasteryLevels", 
        "Passes", 
        "Settings"
    };
    v41("Inventory", v390, v118);
    v41("Inventory", v390, v113);
    l_PropertyChangedSignal_0:Connect(v113);
    v16(l_Tray_0.Buttons.Buttons.UnequipAll.Button, function() --[[ Line: 1424 ]]
        -- upvalues: v20 (copy)
        v20:FireServer("UnequipAllPets");
    end);
    local l_v148_1 = v148 --[[ copy: 101 -> 153 ]];
    v16(l_Tray_0.Buttons.Buttons.Delete.Button, function() --[[ Line: 1429 ]]
        -- upvalues: l_v139_0 (ref), v124 (ref), l_v148_1 (copy)
        if l_v139_0 then
            v124();
        else
            l_v139_0 = true;
        end;
        l_v148_1();
    end);
    local function v393() --[[ Line: 1438 ]] --[[ Name: updateCompactButton ]]
        -- upvalues: v11 (copy), l_Tray_0 (copy)
        local v392 = v11:Get();
        if not v392 then
            return;
        elseif v392.Settings["Compact Pet Inventory"] == true then
            l_Tray_0.Buttons.Buttons.Compact.Button.Image = "rbxassetid://12255287199";
            l_Tray_0.Buttons.Buttons.Compact.Button.Highlight.Image = "rbxassetid://12255286715";
            return;
        else
            l_Tray_0.Buttons.Buttons.Compact.Button.Image = "rbxassetid://11476296306";
            l_Tray_0.Buttons.Buttons.Compact.Button.Highlight.Image = "rbxassetid://11476295069";
            return;
        end;
    end;
    v16(l_Tray_0.Buttons.Buttons.Compact.Button, function() --[[ Line: 1452 ]]
        -- upvalues: v11 (copy), v20 (copy)
        local v394 = v11:Get();
        if not v394 then
            return;
        else
            v20:FireServer("SetSetting", "Compact Pet Inventory", not v394.Settings["Compact Pet Inventory"]);
            return;
        end;
    end);
    v11:ConnectDataChanged("Settings", v393);
    v393();
    v34(l_Tray_0.Parent.MultiDelete.Buttons.Confirm.Button, v24.Button.Pink);
    local l_v138_1 = v138 --[[ copy: 98 -> 154 ]];
    v16(l_Tray_0.Parent.MultiDelete.Buttons.Confirm.Button, function() --[[ Line: 1464 ]]
        -- upvalues: l_v138_1 (copy), v124 (ref), v32 (copy), v19 (copy), v34 (copy), v24 (copy), v16 (copy), v20 (copy), v33 (copy)
        local v396 = table.clone(l_v138_1);
        v124();
        local v401 = v32.new("Multi Delete"):Gamepass(v19.DigitalStoragePassName):Text("Are you sure you want to delete these pets?"):Button(function(v397, v398) --[[ Line: 1471 ]]
            -- upvalues: v34 (ref), v24 (ref), v16 (ref), v20 (ref), v396 (copy), v124 (ref)
            v397.Label.Text = "Yes";
            v34(v397, v24.Button.Green);
            v16(v397, function() --[[ Line: 1474 ]]
                -- upvalues: v20 (ref), v396 (ref), v124 (ref), v398 (copy)
                v20:FireServer("MultiDeletePets", v396);
                v124();
                v398();
            end);
        end):Button(function(v399, v400) --[[ Line: 1480 ]]
            -- upvalues: v34 (ref), v24 (ref), v16 (ref), v124 (ref)
            v399.Label.Text = "No";
            v34(v399, v24.Button.Red);
            v16(v399, function() --[[ Line: 1483 ]]
                -- upvalues: v124 (ref), v400 (copy)
                v124();
                v400();
            end);
        end);
        v33(v401:Build());
    end);
    v34(l_Tray_0.Parent.MultiDelete.Buttons.Cancel.Button, v24.Button.Red);
    v16(l_Tray_0.Parent.MultiDelete.Buttons.Cancel.Button, function() --[[ Line: 1492 ]]
        -- upvalues: v124 (ref)
        v124();
    end);
    v34(l_Tray_0.Buttons.Buttons.Best.Button, v24.Button.Green);
    v16(l_Tray_0.Buttons.Buttons.Best.Button, function() --[[ Line: 1499 ]]
        -- upvalues: v20 (copy)
        v20:FireServer("EquipBestPets");
    end);
    v20.Event("PetIdChanged"):Connect(function(v402, v403) --[[ Line: 1505 ]]
        -- upvalues: v11 (copy), l_v135_0 (ref), l_v136_0 (ref), v113 (ref), v118 (ref)
        local v404 = false;
        local v405 = v11:Get();
        if not v405 then
            return;
        elseif l_v135_0 and string.sub(l_v135_0, 1, 36) ~= v402 then
            return;
        else
            local v406;
            for _, v408 in v405.Pets do
                if v408.Id == v403 then
                    v406 = v408;
                    v404 = true;
                end;
                if v404 then
                    break;
                end;
            end;
            if not v404 then
                v406 = nil;
            end;
            v404 = false;
            if l_v136_0 then
                l_v135_0 = ("%*-team-0"):format(v403);
            elseif v406 and v406.Amount then
                l_v135_0 = ("%*-stack"):format(v403);
            else
                l_v135_0 = ("%*-0"):format(v403);
            end;
            v113();
            v118();
            return;
        end;
    end);
end;
l_ScrollingFrame_0 = nil;
l_Pets_0 = l_Inner_0.Items.Main;
l_UIGridLayout_0 = l_Inner_0.Items.Details;
l_Details_0 = l_Pets_0.ScrollingFrame;
v133 = l_Details_0.Template;
v133.Parent = nil;
l_Template_0 = v133.Items.Template;
l_Template_0.Parent = nil;
v135 = {
    "Currency", 
    "Potions", 
    "Powerups"
};
v136 = {};
for v409, v410 in v135 do
    local v411 = v133:Clone();
    v411.Name = v410;
    v411.LayoutOrder = v409;
    v411.Title.Text = v410;
    local l_UIGridLayout_1 = v411.Items.UIGridLayout;
    local function v414() --[[ Line: 1564 ]] --[[ Name: updateHeight ]]
        -- upvalues: v411 (copy), l_UIScale_0 (copy)
        local v413 = math.ceil(v411.Items.UIGridLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
        v411.Size = UDim2.new(1, 0, 0, v413 + 85);
    end;
    l_UIGridLayout_1:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v414);
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v414);
    local v415 = math.ceil(v411.Items.UIGridLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
    v411.Size = UDim2.new(1, 0, 0, v415 + 85);
    v411.Parent = l_Details_0;
    v136[v410] = v411;
end;
v137 = nil;
v138 = nil;
v139 = nil;
l_MultiDelete_0 = nil;
local l_l_UIGridLayout_0_1 = l_UIGridLayout_0 --[[ copy: 91 -> 155 ]];
local function v418(v417) --[[ Line: 1583 ]] --[[ Name: setDetailsVisible ]]
    -- upvalues: l_l_UIGridLayout_0_1 (copy)
    if not v417 then
        l_l_UIGridLayout_0_1.Pool.Visible = false;
    end;
    l_l_UIGridLayout_0_1.Buttons.Visible = v417;
    l_l_UIGridLayout_0_1.Icon.Visible = v417;
    l_l_UIGridLayout_0_1.Stats.Visible = v417;
    l_l_UIGridLayout_0_1.Title.Visible = v417;
end;
local l_UIGridLayout_2 = Instance.new("UIGridLayout");
l_UIGridLayout_2.CellPadding = UDim2.fromOffset(5, 5);
l_UIGridLayout_2.CellSize = UDim2.fromOffset(65, 65);
local v420 = v44.new(l_UIGridLayout_0.Pool.Content, l_UIGridLayout_2);
v420.ItemsPerPage = 6;
local l_v420_0 = v420 --[[ copy: 103 -> 156 ]];
v420.PageChanged:Connect(function(_) --[[ Line: 1600 ]]
    -- upvalues: l_v420_0 (copy), l_l_UIGridLayout_0_1 (copy)
    local v423 = l_v420_0.Pages > 1;
    l_l_UIGridLayout_0_1.Pool.Page.Visible = v423;
    l_l_UIGridLayout_0_1.Pool.Page.Text = ("Page %* / %*"):format(l_v420_0.CurrentPage, l_v420_0.Pages);
end);
local l_v418_0 = v418 --[[ copy: 101 -> 157 ]];
do
    local l_v137_1, l_v138_2, l_v139_1, l_l_MultiDelete_0_1 = v137, v138, v139, l_MultiDelete_0;
    local function v443() --[[ Line: 1606 ]] --[[ Name: updateDetails ]]
        -- upvalues: l_v137_1 (ref), l_v418_0 (copy), v11 (copy), l_v138_2 (ref), l_v139_1 (ref), v28 (copy), l_l_UIGridLayout_0_1 (copy), v23 (copy), v26 (copy), l_l_MultiDelete_0_1 (ref), v13 (copy), v19 (copy), l_v420_0 (copy), l_ScreenGui_0 (copy)
        if not l_v137_1 then
            return l_v418_0(false);
        else
            local v429 = v11:Get();
            if not v429 then
                return l_v418_0(false);
            else
                local v430 = 0;
                local v431 = true;
                local v432 = nil;
                if l_v137_1 == "Potion" then
                    local l_l_v138_2_0 = l_v138_2;
                    local l_l_v139_1_0 = l_v139_1;
                    local v435 = {
                        Type = "Potion", 
                        Name = l_l_v138_2_0, 
                        Level = l_l_v139_1_0
                    };
                    v430 = v28:GetOwnedAmount(v429, v435);
                    l_l_UIGridLayout_0_1.Title.Text = v28:GetName(v435);
                    l_l_UIGridLayout_0_1.Stats.Text = v23.autoStroke(v28:GetDescription(v435), 2.5);
                    v28:UpdateIcon(l_l_UIGridLayout_0_1.Icon.Inner.Button.Inner, v435);
                elseif l_v137_1 == "Powerup" then
                    local l_l_v138_2_1 = l_v138_2;
                    local v437 = v26[l_l_v138_2_1];
                    local v438 = {
                        Type = "Powerup", 
                        Name = l_l_v138_2_1
                    };
                    local l_Pool_0 = v437.Pool;
                    if l_Pool_0 then
                        v432 = l_Pool_0;
                    end;
                    v431 = v437.Consumable ~= false;
                    l_l_UIGridLayout_0_1.Title.Text = v28:GetName(v438);
                    l_l_UIGridLayout_0_1.Stats.Text = v23.autoStroke(v28:GetDescription(v438), 2.5);
                    v430 = v28:GetOwnedAmount(v429, v438);
                    v28:UpdateIcon(l_l_UIGridLayout_0_1.Icon.Inner.Button.Inner, v438);
                end;
                if v430 <= 0 then
                    return l_v418_0(false);
                else
                    local v440 = l_l_MultiDelete_0_1 or "Common";
                    if v440 == "Legendary" then
                        l_l_UIGridLayout_0_1.Title.TextColor3 = Color3.new(1, 1, 1);
                        v13.Cycle(l_l_UIGridLayout_0_1.Title, "Rainbow", {
                            Speed = 0.5
                        });
                    else
                        v13.None(l_l_UIGridLayout_0_1.Title);
                        l_l_UIGridLayout_0_1.Title.TextColor3 = v19.RarityColors[v440];
                    end;
                    l_v420_0:Set(v432);
                    l_l_UIGridLayout_0_1.Pool.Visible = v432 ~= nil;
                    l_l_UIGridLayout_0_1.Buttons.Use.Visible = v431;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Label.Text = "Use";
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Transparency = 0;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.UIStroke.Transparency = 0;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Label.UIStroke.Transparency = 0;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Label.TextTransparency = 0;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Active = true;
                    l_l_UIGridLayout_0_1.Buttons.Use.Button.Selectable = true;
                    l_l_UIGridLayout_0_1.Icon.Inner.Button.Inner.Amount.Text = ("<stroke color=\"#00295E\" joins=\"miter\" thickness=\"2\"><font size=\"32\">x</font>%*</stroke>"):format(v430);
                    l_l_UIGridLayout_0_1.Buttons.Craft.Visible = false;
                    l_l_UIGridLayout_0_1.Buttons.Visible = true;
                    l_l_UIGridLayout_0_1.Icon.Visible = true;
                    l_l_UIGridLayout_0_1.Stats.Visible = true;
                    l_l_UIGridLayout_0_1.Title.Visible = true;
                    task.defer(function() --[[ Line: 1677 ]]
                        -- upvalues: l_l_UIGridLayout_0_1 (ref), l_ScreenGui_0 (ref)
                        l_l_UIGridLayout_0_1.Pool.Position = UDim2.new(0.5, 0, 0, 250 + l_l_UIGridLayout_0_1.Stats.TextBounds.Y / l_ScreenGui_0.UIScale.Scale);
                    end);
                    local l_AutoExclusiveEgg_0 = l_l_UIGridLayout_0_1.Buttons.AutoExclusiveEgg;
                    local v442 = false;
                    if l_v138_2 ~= nil then
                        v442 = false;
                        if l_v137_1 == "Powerup" then
                            v442 = v26[l_v138_2].Type == "Egg";
                        end;
                    end;
                    l_AutoExclusiveEgg_0.Visible = v442;
                    return;
                end;
            end;
        end;
    end;
    v34(l_UIGridLayout_0.Buttons.AutoExclusiveEgg.Button, v24.Button.Orange);
    v16(l_UIGridLayout_0.Buttons.AutoExclusiveEgg.Button, function() --[[ Line: 1691 ]]
        -- upvalues: v80 (ref), l_v138_2 (ref), l_v137_1 (ref), v26 (copy), v79 (ref)
        v80();
        if l_v138_2 ~= nil and l_v137_1 == "Powerup" and v26[l_v138_2].Type == "Egg" then
            v79(l_v138_2);
        end;
    end);
    local function v451(v444, v445) --[[ Line: 1704 ]] --[[ Name: displayRarityColor ]]
        -- upvalues: v28 (copy), v13 (copy), v92 (copy), v19 (copy)
		local l_v28_Rarity_0 = v28:GetRarity(v445);
        local function v450() --[[ Line: 1706 ]] --[[ Name: update ]]
            -- upvalues: v444 (copy), l_v28_Rarity_0 (copy), v13 (ref), v92 (ref), v19 (ref)
            local l_UIGradient_0 = v444.Inner.Background.UIGradient;
			if v444.Visible and (l_v28_Rarity_0 == "Legendary" or l_v28_Rarity_0 == "Secret") then
				local v441 = "Rainbow"
                v13.Shift(v444.Inner.Button, v441, {
                    Speed = 0.5
                });
                v13.Cycle(v444.Inner.Button.Inner.ItemName, v441, {
                    Speed = 0.5
                });
                v92[l_UIGradient_0] = true;
            else
                v13.None(v444.Inner.Button);
                v13.None(v444.Inner.Button.Inner.ItemName);
                v92[l_UIGradient_0] = nil;
            end;
            local l_Background_0 = v444.Inner.Background;
            local v449 = true;
            if l_v28_Rarity_0 ~= "Legendary" then
                v449 = l_v28_Rarity_0 == "Secret";
            end;
            l_Background_0.Visible = v449;
            v444.Inner.Button.BackgroundColor3 = if l_v28_Rarity_0 == "Common" then Color3.fromRGB(41, 205, 255) else if l_v28_Rarity_0 == "Secret" then Color3.new(1, 1, 1) else v19.RarityColors[l_v28_Rarity_0];
        end;
        v450();
		v444:SetAttribute("Rarity", l_v28_Rarity_0);
        v444:GetPropertyChangedSignal("Visible"):Connect(v450);
    end;
    local v452 = nil;
    local l_Potions_0 = v136.Potions;
    local function v456(v454, v455) --[[ Line: 1738 ]] --[[ Name: getPotionId ]]
        if v455 then
            return (("%*/%*"):format(v454, v455));
        else
            return v454;
        end;
    end;
    local v457 = {};
    local l_l_Template_0_1 = l_Template_0 --[[ copy: 94 -> 158 ]];
    local l_v451_0 = v451 --[[ copy: 105 -> 159 ]];
    local l_v443_0 = v443 --[[ copy: 104 -> 160 ]];
    local l_l_Potions_0_0 = l_Potions_0 --[[ copy: 107 -> 161 ]];
    local l_v457_0 = v457 --[[ copy: 109 -> 162 ]];
    local function v470(v463, v464) --[[ Line: 1744 ]] --[[ Name: makeEntry ]]
        -- upvalues: l_l_Template_0_1 (copy), v25 (copy), v28 (copy), l_v451_0 (copy), v17 (copy), v18 (copy), v16 (copy), l_v137_1 (ref), l_v138_2 (ref), l_v139_1 (ref), l_l_MultiDelete_0_1 (ref), l_v443_0 (copy), l_l_Potions_0_0 (copy), l_v457_0 (copy)
        local v465 = if v464 then ("%*/%*"):format(v463, v464) else v463;
        local v466 = l_l_Template_0_1:Clone();
        local v467 = (v464 or 0) * -1000 + v25[v463].LayoutOrder;
        if v463 == "Infinity Elixir" then
            v467 = -9999999;
        end;
        v466.Name = v465;
        v466.Inner.Cooldown.Visible = false;
        v466.LayoutOrder = v467;
        local v468 = {
            Type = "Potion", 
            Name = v463, 
            Level = v464
        };
        local l_v28_Rarity_1 = v28:GetRarity(v468);
        v28:UpdateIcon(v466.Inner.Button.Inner.Icon, v468);
        l_v451_0(v466, v468);
        v466.Inner.Button.Inner.ItemName.Text = v28:GetName(v468);
        v17:OnEnter(v466.Inner.Button, function() --[[ Line: 1769 ]]
            -- upvalues: v18 (ref), v468 (copy)
            return v18.fromPotion(v468);
        end);
        v16(v466.Inner.Button, function() --[[ Line: 1773 ]]
            -- upvalues: l_v137_1 (ref), l_v138_2 (ref), v463 (copy), l_v139_1 (ref), v464 (copy), l_l_MultiDelete_0_1 (ref), l_v28_Rarity_1 (copy), l_v443_0 (ref)
            l_v137_1 = "Potion";
            l_v138_2 = v463;
            l_v139_1 = v464;
            l_l_MultiDelete_0_1 = l_v28_Rarity_1;
            l_v443_0();
        end);
        v466.Visible = false;
        v466.Parent = l_l_Potions_0_0.Items;
        l_v457_0[v465] = v466;
    end;
    for v471, v472 in v25 do
        if #v472.Buff.Expiry > 1 then
            local v473 = 1;
            local v474 = v472.OneLevel and 1 or v19.PotionMaxLevel;
            for v475 = v473, v474 do
                v470(v471, v475);
            end;
        else
            v470(v471, 1);
        end;
    end;
    local v476 = v23.new():size(20);
    local l_v457_1 = v457 --[[ copy: 109 -> 163 ]];
    local l_l_Potions_0_1 = l_Potions_0 --[[ copy: 107 -> 164 ]];
    local l_v443_1 = v443 --[[ copy: 104 -> 165 ]];
    v452 = function() --[[ Line: 1798 ]] --[[ Name: updatePotions ]]
        -- upvalues: v11 (copy), l_Search_0 (copy), l_v457_1 (copy), v93 (ref), l_l_Potions_0_1 (copy), l_v443_1 (copy)
        local v480 = v11:Get();
        if not v480 then
            return;
        else
            local l_Text_3 = l_Search_0.Search.Bar.TextBox.Text;
            local v482 = string.lower((string.gsub(l_Text_3, "%s", "")));
            l_Text_3 = false;
            local v483 = {};
            for _, v485 in v480.Potions do
                local l_Name_4 = v485.Name;
                if #v482 <= 0 or string.find(string.lower((string.gsub(l_Name_4, "%s", ""))), v482, 1, true) then
                    local l_Level_0 = v485.Level;
                    local v488 = if l_Level_0 then ("%*/%*"):format(l_Name_4, l_Level_0) else l_Name_4;
                    v483[v488] = true;
                    l_Level_0 = l_v457_1[v488];
                    if l_Level_0 then
                        l_Level_0.Inner.Button.Inner.Amount.Text = v93(v485.Amount);
                        l_Level_0.Visible = true;
                        l_Text_3 = true;
                    end;
                end;
            end;
            for v489, v490 in l_v457_1 do
                if not v483[v489] then
                    v490.Visible = false;
                end;
            end;
            l_l_Potions_0_1.Visible = l_Text_3;
            l_v443_1();
            return;
        end;
    end;
    v41("Inventory", "Potions", v452);
    l_PropertyChangedSignal_0:Connect(v452);
    l_Potions_0 = nil;
    v456 = nil;
    v457 = v136.Powerups;
    v470 = {};
    for v491 in v26 do
        local v492 = l_Template_0:Clone();
        local l_LayoutOrder_0 = v26[v491].LayoutOrder;
        v492.Name = v491;
        v492.LayoutOrder = l_LayoutOrder_0;
        local v494 = {
            Type = "Powerup", 
            Name = v491
        };
        local l_v28_Rarity_2 = v28:GetRarity(v494);
        v28:UpdateIcon(v492.Inner.Button.Inner.Icon, v494);
        v492.Inner.Button.Inner.ItemName.Text = v28:GetName(v494);
        v17:OnEnter(v492.Inner.Button, function() --[[ Line: 1861 ]]
            -- upvalues: v18 (copy), v494 (copy)
            return v18.fromItem(v494);
        end);
        v451(v492, v494);
        v16(v492.Inner.Button, function() --[[ Line: 1866 ]]
            -- upvalues: l_v137_1 (ref), l_v138_2 (ref), v491 (copy), l_l_MultiDelete_0_1 (ref), l_v28_Rarity_2 (copy), l_v139_1 (ref), v443 (copy)
            l_v137_1 = "Powerup";
            l_v138_2 = v491;
            l_l_MultiDelete_0_1 = l_v28_Rarity_2;
            l_v139_1 = nil;
            v443();
        end);
        v492.Visible = false;
        v492.Parent = v457.Items;
        v470[v491] = v492;
    end;
    local l_v470_0 = v470 --[[ copy: 110 -> 166 ]];
    local l_v443_2 = v443 --[[ copy: 104 -> 167 ]];
    v456 = function() --[[ Line: 1879 ]] --[[ Name: updatePowerupTimers ]]
        -- upvalues: v11 (copy), l_v470_0 (copy), l_v137_1 (ref), l_v138_2 (ref), l_v443_2 (copy)
        if not v11:Get() then
            return;
        else
            for _, v499 in l_v470_0 do
                v499.Inner.Cooldown.Text = "";
                v499.Inner.Cooldown.Visible = false;
            end;
            if l_v137_1 == "Powerup" and l_v138_2 == "Power Orb" then
                l_v443_2();
            end;
            return;
        end;
    end;
    local l_v457_2 = v457 --[[ copy: 109 -> 168 ]];
    l_Potions_0 = function() --[[ Line: 1896 ]] --[[ Name: updatePowerups ]]
        -- upvalues: v11 (copy), l_Search_0 (copy), l_v470_0 (copy), v93 (ref), l_v457_2 (copy), v456 (ref), l_v443_2 (copy)
        local v501 = v11:Get();
        if not v501 then
            return;
        else
            local v502 = false;
            local l_Text_4 = l_Search_0.Search.Bar.TextBox.Text;
            local v504 = string.lower((string.gsub(l_Text_4, "%s", "")));
            for v505, v506 in l_v470_0 do
                local v507 = v501.Powerups[v505] or 0;
                if v507 <= 0 then
                    v506.Visible = false;
                    v506.Inner.Background.Visible = false;
                elseif #v504 > 0 and not string.find(string.lower((string.gsub(v505, "%s", ""))), v504, 1, true) then
                    v506.Visible = false;
                    v506.Inner.Background.Visible = false;
                else
                    local _ = v506:GetAttribute("Rarity");
                    v506.Inner.Button.Inner.Amount.Text = v93(v507);
                    v506.Visible = true;
                    v502 = true;
                end;
            end;
            l_v457_2.Visible = v502;
            v456();
            l_v443_2();
            return;
        end;
    end;
    v41("Inventory", "Powerups", l_Potions_0);
    l_PropertyChangedSignal_0:Connect(l_Potions_0);
    v457 = nil;
    v470 = v57:GetDataKeys();
    v476 = v136.Currency;
    local v509 = {};
    for v510, v511 in v47 do
        if v511.InventoryDisplay then
            local v512 = v56({
                Type = "Currency", 
                Currency = v510, 
                Amount = 1
            });
            local l_Inner_1 = v512.Button.Inner;
            l_Inner_1.Label.TextColor3 = v511.Color;
            l_Inner_1.Bottom.Visible = true;
            l_Inner_1.Bottom.TextColor3 = Color3.new(1, 1, 1);
            l_Inner_1.Bottom.TextXAlignment = Enum.TextXAlignment.Right;
            v512.LayoutOrder = v511.LayoutOrder;
            v512.Parent = v476.Items;
            v17:OnEnter(v512.Button, function() --[[ Line: 1957 ]]
                -- upvalues: v11 (copy), v18 (copy), v510 (copy), v57 (copy)
                local v514 = v11:Get();
                if not v514 then
                    return;
                else
                    return v18.fromCurrency({
                        Type = "Currency", 
                        Currency = v510, 
                        Amount = v57:GetBalance(v514, v510)
                    });
                end;
            end);
            v509[v510] = v512;
        end;
    end;
    local v515 = v23.new():size(20);
    local l_v509_0 = v509 --[[ copy: 112 -> 169 ]];
    local l_v515_0 = v515 --[[ copy: 113 -> 170 ]];
    v41("Inventory", v470, function() --[[ Line: 1975 ]] --[[ Name: updateCurrency ]]
        -- upvalues: v11 (copy), l_v509_0 (copy), v47 (copy), v57 (copy), l_v515_0 (copy), v31 (copy), v23 (copy)
        local v518 = v11:Get();
        if not v518 then
            return;
        else
            for v519, v520 in l_v509_0 do
                local _ = v47[v519];
                local l_v57_Balance_0 = v57:GetBalance(v518, v519);
                local v523 = true;
                if l_v57_Balance_0 <= 0 then
                    v523 = true;
                    if v519 ~= "Coins" then
                        v523 = v519 == "Gems";
                    end;
                end;
                v520.Visible = v523;
                v523 = ("%*%*"):format(l_v515_0("x"), (v31(l_v57_Balance_0, 1000)));
                v520.Button.Inner.Bottom.Text = v23.autoStroke(v523);
            end;
            return;
        end;
    end);
    task.spawn(function() --[[ Line: 1994 ]]
        -- upvalues: v22 (copy), l_Inner_0 (copy), v456 (ref)
        while true do
            if v22:IsOpen("Inventory") and l_Inner_0.Items.Visible then
                v456();
            end;
            task.wait(0.5);
        end;
    end);
    l_ScrollingFrame_0 = function() --[[ Line: 2006 ]] --[[ Name: updateItems ]]
        -- upvalues: v452 (ref), l_Potions_0 (ref)
        v452();
        l_Potions_0();
    end;
    v470 = {};
    v476 = function(v524, v525) --[[ Line: 2012 ]] --[[ Name: playPotionNoise ]]
        -- upvalues: v470 (copy), v64 (copy)
        local v526 = "PotionUse";
        if v525 and v525 == 6 or v524 == "Infinity Elixir" then
            v526 = "PotionEvoUse";
        end;
        local v527 = os.clock();
        if v527 - (v470[v526] or 0) < 0.25 then
            return;
        else
            v470[v526] = v527;
            v64(v526);
            return;
        end;
    end;
    v34(l_UIGridLayout_0.Buttons.Use.Button, v24.Button.Green);
    v16(l_UIGridLayout_0.Buttons.Use.Button, function() --[[ Line: 2029 ]]
        -- upvalues: v11 (copy), l_v138_2 (ref), l_v137_1 (ref), v32 (copy), v23 (copy), v24 (copy), v34 (copy), v16 (copy), v33 (copy), l_v139_1 (ref), v470 (copy), v64 (copy), v20 (copy), v26 (copy), v28 (copy), v48 (copy), v50 (copy), v49 (copy), v22 (copy), v39 (copy), v62 (copy)
        local v528 = v11:Get();
        if not v528 then
            return;
        elseif not l_v138_2 then
            return;
        elseif l_v137_1 == "Potion" then
            if l_v138_2 == "Mythic" then
                local v529 = false;
                for _, v531 in v528.MasteryUpgrades do
                    if v531.Type == "DarkArts" then
                        v529 = true;
                        break;
                    end;
                end;
                if not v529 then
                    local v534 = v32.new("Uh Oh!"):Sound("PopupFailure"):Text((("You need the %* to use this potion!"):format((v23.autoColor("Dark Arts Mastery", v24.Text.Pink))))):Button(function(v532, v533) --[[ Line: 2050 ]]
                        -- upvalues: v34 (ref), v24 (ref), v16 (ref)
                        v532.Label.Text = "Close";
                        v34(v532, v24.Button.Red);
                        v16(v532, v533);
                    end);
                    return v33(v534:Build());
                end;
            end;
            local l_l_v138_2_2 = l_v138_2;
            local l_l_v139_1_1 = l_v139_1;
            local v537 = "PotionUse";
            if l_l_v139_1_1 and l_l_v139_1_1 == 6 or l_l_v138_2_2 == "Infinity Elixir" then
                v537 = "PotionEvoUse";
            end;
            local v538 = os.clock();
            if v538 - (v470[v537] or 0) >= 0.25 then
                v470[v537] = v538;
                v64(v537);
            end;
            v20:FireServer("UsePotion", l_v138_2, l_v139_1);
            return;
        else
            if l_v137_1 == "Powerup" then
                local v539 = v26[l_v138_2];
                local v540 = {
                    Type = "Powerup", 
                    Name = l_v138_2
                };
                local l_v28_OwnedAmount_0 = v28:GetOwnedAmount(v528, v540);
                if l_v28_OwnedAmount_0 <= 0 then
                    return;
                elseif v539.Type == "Gift" then
                    v33(v32.fromGift(l_v138_2, l_v28_OwnedAmount_0):Build());
                    return;
                elseif l_v138_2 == "Reroll Orb" then
                    v48:Open(function(v542) --[[ Line: 2074 ]]
                        -- upvalues: v50 (ref)
                        return v50:IsEnchantable(v542);
                    end, function(v543) --[[ Line: 2076 ]]
                        -- upvalues: v49 (ref), v22 (ref)
                        v49:SetSelectedPetId(v543.Id);
                        task.defer(function() --[[ Line: 2078 ]]
                            -- upvalues: v22 (ref)
                            v22:Open("Enchants");
                        end);
                    end, "Inventory");
                    return;
                elseif l_v138_2 == "Power Orb" then
                    v48:Open(function(v544) --[[ Line: 2086 ]]
                        -- upvalues: v39 (ref)
                        return not v39:IsMaxLevel(v544);
                    end, function(v545) --[[ Line: 2088 ]]
                        -- upvalues: v64 (ref), v20 (ref)
                        v64("PowerOrb");
                        v20:FireServer("UsePowerOrb", v545.Id);
                    end, "Inventory", "You have no pets below max level!");
                    return;
                elseif l_v138_2 == "Golden Orb" then
                    v20:FireServer("UseGoldenOrb");
                    return;
                elseif v539.Type == "Egg" then
                    if not v62(v528) then
                        return;
                    else
                        v33(v32.fromExclusiveEgg(l_v138_2, l_v28_OwnedAmount_0):Build());
                        return;
                    end;
                end;
            end;
            return;
        end;
    end);
    v34(l_UIGridLayout_0.Buttons.Craft.Button, v24.Button.Purple);
    v16(l_UIGridLayout_0.Buttons.Craft.Button, function() --[[ Line: 2112 ]]
        -- upvalues: v11 (copy), l_v138_2 (ref), l_v137_1 (ref), l_v139_1 (ref), v51 (copy), v22 (copy)
        if not v11:Get() then
            return;
        elseif not l_v138_2 or not l_v137_1 or not l_v139_1 then
            return;
        else
            v51:SetSelectedPotion({
                Name = l_v138_2, 
                Level = l_v139_1
            });
            v22:Open("Potions");
            return;
        end;
    end);
    v27(l_Details_0, l_Details_0.UIListLayout);
end;
l_Pets_0 = nil;
l_UIGridLayout_0 = nil;
l_Details_0 = l_Inner_0.Titles.Main;
v133 = l_Inner_0.Titles.Details;
l_Template_0 = l_Details_0.Tabs;
v135 = l_Details_0.Content.ScrollingFrame;
v136 = v135.Template;
v136.Parent = nil;
v137 = {};
v138 = nil;
v139 = nil;
l_MultiDelete_0 = {};
v418 = {};
for v546, v547 in v30 do
    if v547.Special then
        table.insert(v418, v546);
    else
        table.insert(l_MultiDelete_0, v546);
    end;
end;
l_UIGridLayout_2 = function(v548, v549) --[[ Line: 2163 ]] --[[ Name: cmp ]]
    -- upvalues: v30 (copy)
    local l_LayoutOrder_1 = v30[v548].LayoutOrder;
    local l_LayoutOrder_2 = v30[v549].LayoutOrder;
    if l_LayoutOrder_1 ~= l_LayoutOrder_2 then
        return l_LayoutOrder_1 < l_LayoutOrder_2;
    else
        return v548 < v549;
    end;
end;
table.sort(l_MultiDelete_0, l_UIGridLayout_2);
table.sort(v418, l_UIGridLayout_2);
v138 = l_MultiDelete_0[1];
v139 = v418[1];
l_MultiDelete_0 = "Progress";
v418 = v138;
local l_l_Template_0_2 = l_Template_0 --[[ copy: 94 -> 171 ]];
do
    local l_v138_3, l_v139_2, l_l_MultiDelete_0_2, l_v418_1 = v138, v139, l_MultiDelete_0, v418;
    l_UIGridLayout_2 = function(v557) --[[ Line: 2180 ]] --[[ Name: selectTab ]]
        -- upvalues: l_l_MultiDelete_0_2 (ref), v30 (copy), l_v418_1 (ref), l_v138_3 (ref), l_v139_2 (ref), v34 (copy), l_l_Template_0_2 (copy), v24 (copy), l_Pets_0 (ref)
        l_l_MultiDelete_0_2 = v557;
        local v558 = v30[l_v418_1];
        if v558.Special == true and v557 == "Progress" then
            l_v418_1 = l_v138_3;
        elseif v558.Special ~= true and v557 == "Special" then
            l_v418_1 = l_v139_2;
        end;
        v34(l_l_Template_0_2.Progress.Button, v557 == "Progress" and v24.Button.Default or v24.Button.Inactive);
        v34(l_l_Template_0_2.Special.Button, v557 == "Special" and v24.Button.Active or v24.Button.Inactive);
        l_Pets_0();
    end;
    for v559, v560 in v30 do
        local v561 = v136:Clone();
        v561.LayoutOrder = v560.LayoutOrder;
        v561.Name = v560.Display or v559;
        if typeof(v560.Color) == "ColorSequence" then
            local l_UIGradient_1 = Instance.new("UIGradient");
            l_UIGradient_1.Color = v560.Color;
            l_UIGradient_1.Parent = v561.Button.TitleName;
        else
            v561.Button.TitleName.TextColor3 = v560.Color;
        end;
        task.defer(function() --[[ Line: 2209 ]]
            -- upvalues: v561 (copy), l_ScreenGui_0 (copy)
            v561.Button.TitleName.Size = UDim2.new(0, v561.Button.TitleName.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 1, 0);
        end);
        v561.Button.TitleName.Text = v560.Display or v559;
        v34(v561.Button, v24.Button.Default);
        v16(v561.Button, function() --[[ Line: 2216 ]]
            -- upvalues: l_v418_1 (ref), v559 (copy), l_Pets_0 (ref)
            l_v418_1 = v559;
            l_Pets_0();
        end);
        v561.Visible = false;
        v561.Parent = v135;
        v137[v559] = v561;
    end;
    local l_v137_2 = v137 --[[ copy: 97 -> 172 ]];
    local l_v133_0 = v133 --[[ copy: 93 -> 173 ]];
    l_Pets_0 = function() --[[ Line: 2226 ]] --[[ Name: updateTitles ]]
        -- upvalues: v11 (copy), l_v137_2 (copy), l_v418_1 (ref), v30 (copy), l_l_MultiDelete_0_2 (ref), v34 (copy), v24 (copy), l_v133_0 (copy)
        local v565 = v11:Get();
        if not v565 then
            return;
        else
            for v566, v567 in l_v137_2 do
                local v568 = v565.Titles[v566] == true;
                local v569 = v565.TitleEquipped == v566;
                local v570 = l_v418_1 == v566;
                v567.Visible = v30[v566].Special == true == (l_l_MultiDelete_0_2 == "Special");
                v567.Button.Lock.Visible = not v568;
                v567.Button.TitleName.TextTransparency = v568 and 0 or 0.35;
                v567.Button.TitleName.UIStroke.Transparency = v568 and 0 or 0.35;
                v567.Button.BackgroundTransparency = v568 and 0 or 0.35;
                v567.Button.UIStroke.Transparency = v568 and 0 or 0.35;
                v567.Button.Equipped.Visible = v569;
                v567.Button.UIStroke.Thickness = v570 and 4 or 2;
                v34(v567.Button, v568 and v24.Button.Default or v24.Button.Inactive);
                v567.Button.UIStroke.Color = v570 and v24.Color.Cyan or v24.Color.Default;
            end;
            local v571 = v565.Titles[l_v418_1] == true;
            local v572 = v565.TitleEquipped == l_v418_1;
            local v573 = v30[l_v418_1];
            if v573 then
                if typeof(v573.Color) == "ColorSequence" then
                    l_v133_0.Title.UIGradient.Color = v573.Color;
                else
                    l_v133_0.Title.UIGradient.Color = ColorSequence.new(v573.Color);
                end;
            end;
            l_v133_0.Title.Text = v573.Display or l_v418_1;
            local l_Description_0 = v573.Description;
            if v573.ChatTag == true then
                l_Description_0 = ("%*\n\n\226\156\133 Chat Tag"):format(l_Description_0);
            end;
            l_v133_0.Description.Text = l_Description_0;
            l_v133_0.Buttons.Equip.Visible = v571 and not v572;
            l_v133_0.Buttons.Unequip.Visible = v571 and v572;
            local l_Requirement_0 = v573.Requirement;
            if l_Requirement_0 and not v571 then
                local v576, v577 = l_Requirement_0.GetProgress(v565);
                v576 = math.clamp(v576, 0, v577);
                l_v133_0.Progress.Visible = true;
                l_v133_0.Progress.Text = string.format("%i%%", (math.floor(100 * v576 / v577)));
                l_v133_0.Progress.Bar.Fill.Size = UDim2.new(v576 / v577, 0, 1, 6);
                return;
            else
                l_v133_0.Progress.Visible = false;
                return;
            end;
        end;
    end;
    v34(v133.Buttons.Equip.Button, v24.Button.Green);
    v16(v133.Buttons.Equip.Button, function() --[[ Line: 2287 ]]
        -- upvalues: v20 (copy), l_v418_1 (ref)
        v20:FireServer("EquipTitle", l_v418_1);
    end);
    v34(v133.Buttons.Unequip.Button, v24.Button.Pink);
    v16(v133.Buttons.Unequip.Button, function() --[[ Line: 2292 ]]
        -- upvalues: v20 (copy)
        v20:FireServer("UnequipTitle");
    end);
    v41("Inventory", {
        "Titles", 
        "TitleEquipped"
    }, l_Pets_0);
    v420 = {};
    for _, v579 in v30 do
        if v579.Requirement then
            for _, v581 in v579.Requirement.DataKeys do
                if not table.find(v420, v581) then
                    table.insert(v420, v581);
                end;
            end;
        end;
    end;
    v41("Inventory", v420, l_Pets_0);
    local l_l_UIGridLayout_2_0 = l_UIGridLayout_2 --[[ copy: 102 -> 174 ]];
    v16(l_Template_0.Progress.Button, function() --[[ Line: 2310 ]]
        -- upvalues: l_l_UIGridLayout_2_0 (copy)
        l_l_UIGridLayout_2_0("Progress");
    end);
    v16(l_Template_0.Special.Button, function() --[[ Line: 2314 ]]
        -- upvalues: l_l_UIGridLayout_2_0 (copy)
        l_l_UIGridLayout_2_0("Special");
    end);
    l_UIGridLayout_2("Progress");
    v27(v135, v135.UIListLayout);
    for v583, v584 in v30 do
        local v588 = v38.new(function(v585) --[[ Line: 2324 ]]
            -- upvalues: v584 (copy), v583 (copy)
            v585.Text = v584.Display or v583;
            local l_Color_0 = v584.Color;
            if typeof(l_Color_0) == "Color3" then
                v585.TextColor3 = l_Color_0;
                return;
            else
                v585.TextColor3 = Color3.fromRGB(255, 255, 255);
                local l_UIGradient_2 = Instance.new("UIGradient");
                l_UIGradient_2.Color = l_Color_0;
                l_UIGradient_2.Parent = v585;
                return;
            end;
        end):Description("New title earned!"):Build();
        v20.Event("TitleAcquired"):Connect(function(v589) --[[ Line: 2341 ]]
            -- upvalues: v583 (copy), v37 (copy), v588 (copy)
            if v589 == v583 then
                v37:Play(v588);
            end;
        end);
    end;
    local l_Notification_1 = l_Inner_0.Parent.Sidebar.Buttons.Titles.Button.Notification;
    local v591 = {};
    local v592 = true;
    l_UIGridLayout_0 = function() --[[ Line: 2353 ]] --[[ Name: clearTitleNotifications ]]
        -- upvalues: l_Notification_1 (copy), v11 (copy), v591 (copy)
        l_Notification_1.Visible = false;
        local v593 = v11:Get();
        if v593 then
            for v594 in v593.Titles do
                v591[v594] = true;
            end;
        end;
    end;
    v41("Inventory", "Titles", function() --[[ Line: 2364 ]]
        -- upvalues: v11 (copy), v592 (ref), l_UIGridLayout_0 (ref), v591 (copy), l_Notification_1 (copy)
        local v595 = v11:Get();
        if not v595 then
            return;
        elseif v592 then
            v592 = false;
            return l_UIGridLayout_0();
        else
            local l_Titles_0 = v595.Titles;
            local v597 = 0;
            for v598 in l_Titles_0 do
                if not v591[v598] then
                    v597 = v597 + 1;
                end;
            end;
            l_Notification_1.Visible = v597 > 0;
            l_Notification_1.Label.Text = if v597 <= 9 then tostring(v597) else "!";
            return;
        end;
    end);
    v22:BindOnOpened("Inventory", function() --[[ Line: 2387 ]]
        -- upvalues: l_Inner_0 (copy), l_UIGridLayout_0 (ref)
        if l_Inner_0.Titles.Visible then
            l_UIGridLayout_0();
        end;
    end);
    l_UIGridLayout_0();
end;
l_Details_0 = nil;
v133 = l_Inner_0.Currency.ScrollingFrame;
l_Template_0 = v57:GetDataKeys();
v135 = {};
for v599, v600 in v47 do
    v418 = v56({
        Type = "Currency", 
        Currency = v599, 
        Amount = 1
    });
    l_UIGridLayout_2 = v418.Button.Inner;
    l_UIGridLayout_2.Label.TextColor3 = v600.Color;
    l_UIGridLayout_2.Bottom.Visible = true;
    l_UIGridLayout_2.Bottom.TextColor3 = Color3.new(1, 1, 1);
    l_UIGridLayout_2.Bottom.TextXAlignment = Enum.TextXAlignment.Right;
    v418.LayoutOrder = v600.LayoutOrder;
    v418.Parent = v133;
    v17:OnEnter(v418.Button, function() --[[ Line: 2425 ]]
        -- upvalues: v11 (copy), v18 (copy), v599 (copy), v57 (copy)
        local v601 = v11:Get();
        if not v601 then
            return;
        else
            return v18.fromCurrency({
                Type = "Currency", 
                Currency = v599, 
                Amount = v57:GetBalance(v601, v599)
            });
        end;
    end);
    v135[v599] = v418;
end;
v136 = v23.new():size(20);
local l_v135_1 = v135 --[[ copy: 95 -> 175 ]];
local l_v136_1 = v136 --[[ copy: 96 -> 176 ]];
v41("Inventory", l_Template_0, function() --[[ Line: 2443 ]] --[[ Name: updateCurrency ]]
    -- upvalues: v11 (copy), l_v135_1 (copy), v47 (copy), v57 (copy), l_v136_1 (copy), v31 (copy), v23 (copy)
    local v604 = v11:Get();
    if not v604 then
        return;
    else
        for v605, v606 in l_v135_1 do
            local _ = v47[v605];
            local l_v57_Balance_1 = v57:GetBalance(v604, v605);
            local v609 = true;
            if l_v57_Balance_1 <= 0 then
                v609 = true;
                if v605 ~= "Coins" then
                    v609 = v605 == "Gems";
                end;
            end;
            v606.Visible = v609;
            v609 = ("%*%*"):format(l_v136_1("x"), (v31(l_v57_Balance_1, 1000)));
            v606.Button.Inner.Bottom.Text = v23.autoStroke(v609);
        end;
        return;
    end;
end);
v27(v133, v133.UIGridLayout);
v133 = function(v610) --[[ Line: 2467 ]] --[[ Name: setPage ]]
    -- upvalues: l_CancelAutoExclusiveEggHatch_0 (ref), l_Inner_0 (copy), v94 (ref), l_Notification_0 (ref), l_UIGridLayout_0 (ref), l_ScreenGui_0 (copy)
    l_CancelAutoExclusiveEggHatch_0();
    if v610 == "Pets" then
        l_Inner_0.Pets.Visible = true;
        l_Inner_0.Items.Visible = false;
        l_Inner_0.Titles.Visible = false;
        l_Inner_0.Currency.Visible = false;
        l_Inner_0.Parent.Top.Title.Title.Text = "My Pets";
        l_Inner_0.Parent.Tray.Visible = true;
        v94();
    elseif v610 == "Items" then
        l_Inner_0.Pets.Visible = false;
        l_Inner_0.Items.Visible = true;
        l_Inner_0.Titles.Visible = false;
        l_Inner_0.Currency.Visible = false;
        l_Inner_0.Parent.Top.Title.Title.Text = "My Items";
        l_Inner_0.Parent.Tray.Visible = false;
        l_Notification_0();
    elseif v610 == "Titles" then
        l_Inner_0.Pets.Visible = false;
        l_Inner_0.Items.Visible = false;
        l_Inner_0.Titles.Visible = true;
        l_Inner_0.Currency.Visible = false;
        l_Inner_0.Parent.Top.Title.Title.Text = "My Titles";
        l_Inner_0.Parent.Tray.Visible = false;
        l_UIGridLayout_0();
    elseif v610 == "Currency" then
        l_Inner_0.Pets.Visible = false;
        l_Inner_0.Items.Visible = false;
        l_Inner_0.Titles.Visible = false;
        l_Inner_0.Currency.Visible = true;
        l_Inner_0.Parent.Top.Title.Title.Text = "My Currency";
        l_Inner_0.Parent.Tray.Visible = false;
    else
        warn((("unknown page \"%*\""):format(v610)));
    end;
    if v610 == "Titles" then
        l_Inner_0.Parent.Size = UDim2.fromOffset(800, 550);
    elseif v610 == "Currency" then
        l_Inner_0.Parent.Size = UDim2.fromOffset(750, 550);
    else
        l_Inner_0.Parent.Size = UDim2.fromOffset(1235, 770);
    end;
    l_ScreenGui_0.Inventory.Frame.Top.StorageHolder.Visible = v610 == "Pets";
end;
for _, v612 in l_Inner_0.Parent.Sidebar.Buttons:GetChildren() do
    if v612:IsA("Frame") and v612.Visible then
        v16(v612.Button, function() --[[ Line: 2519 ]]
            -- upvalues: l_Search_0 (copy), v124 (ref), v133 (copy), v612 (copy)
            l_Search_0.Search.Bar.TextBox.Text = "";
            v124();
            v133(v612.Name);
        end);
    end;
end;
v133("Pets");
v45(l_Tray_0.Buttons.Buttons.Best.Button.Keybind, "Equip Best", function() --[[ Line: 2531 ]]
    -- upvalues: v20 (copy)
    v20:FireServer("EquipBestPets");
end);
v34(l_Inner_0.Parent.Top.Close.Button, v24.Button.Red);
v16(l_Inner_0.Parent.Top.Close.Button, function() --[[ Line: 2538 ]]
    -- upvalues: v22 (copy)
    v22:Close();
end);
v22:BindOnClosed("Inventory", function() --[[ Line: 2542 ]]
    -- upvalues: v124 (ref)
    v124();
end);
l_Template_0 = {
    IsMultiDeleting = function(_) --[[ Line: 2551 ]] --[[ Name: IsMultiDeleting ]]
        -- upvalues: v123 (ref)
        return v123();
    end, 
    StopMultiDeleting = function(_) --[[ Line: 2556 ]] --[[ Name: StopMultiDeleting ]]
        -- upvalues: v124 (ref)
        v124();
    end
};
v135 = l_ScreenGui_0.Inventory.Frame;
v136 = v135.Top.StorageHolder.Buy;
v137 = v135.Sidebar.Buttons;
v138 = function() --[[ Line: 2571 ]] --[[ Name: updateButton ]]
    -- upvalues: v63 (copy), v136 (copy), v135 (copy), l_ScreenGui_0 (copy)
    if v63.Mode == "Touch" then
        v136.Position = UDim2.new(1, -v135.Top.StorageHolder.Storage.TextBounds.X / l_ScreenGui_0.UIScale.Scale - 10, 0, 15);
        v136.Size = UDim2.fromOffset(60, 60);
        v136.AnchorPoint = Vector2.new(1, 0);
        v136.Button.Label.Text = "+";
        v136.Button.Label.TextSize = 64;
        return;
    else
        v136.Button.Label.Text = "Get More";
        v136.Position = UDim2.fromOffset(0, 55);
        v136.Size = UDim2.fromOffset(120, 35);
        v136.AnchorPoint = Vector2.new();
        v136.Button.Label.TextSize = 26;
        return;
    end;
end;
v63.Changed:Connect(function(v615) --[[ Line: 2588 ]]
    -- upvalues: v135 (copy), v137 (copy), l_ScreenGui_0 (copy), v138 (copy)
    local v616 = v615 == "Touch";
    local v617 = Vector2.new(v616 and 1 or 0);
    local v618 = v616 and Enum.TextXAlignment.Right or Enum.TextXAlignment.Left;
    v135.Top.StorageHolder.AnchorPoint = v617;
    v135.Top.StorageHolder.Digital.AnchorPoint = v617;
    v135.Top.StorageHolder.Storage.AnchorPoint = v617;
    v135.Top.StorageHolder.Digital.TextXAlignment = v618;
    v135.Top.StorageHolder.Storage.TextXAlignment = v618;
    v135.Top.StorageHolder.Digital.TextSize = v616 and 50 or 36;
    v135.Top.StorageHolder.Storage.TextSize = v616 and 50 or 36;
    v135.Top.StorageHolder.Digital.Size = UDim2.fromOffset(v616 and 200 or 100, v616 and 60 or 40);
    v135.Top.StorageHolder.Digital.Position = UDim2.new(v616 and 1 or 0, 0, 0, v616 and 20 or 10);
    v135.Top.StorageHolder.Storage.Position = UDim2.new(v616 and 1 or 0, 0, 0, v616 and 20 or 10);
    v135.Top.StorageHolder.Position = UDim2.new(v616 and 1 or 0, v616 and -95 or 1, 0, 0);
    local v619 = v616 and 90 or 65;
    for _, v621 in v137:GetChildren() do
        if v621:IsA("Frame") then
            v621.Size = UDim2.fromOffset(v619, v619);
            v621.Button.Label.TextSize = v616 and 34 or 20;
        end;
    end;
    v137.UIListLayout.Padding = UDim.new(0, v616 and 20 or 20);
    v135.Sidebar.Position = UDim2.new(0, v616 and 0 or -15, 0.5, v616 and -75 or 0);
    local v622 = v616 and 60 or 45;
    v135.Inner.Pets.Details.Icon.Inner.Button.Inner.Lock.Size = UDim2.fromOffset(v622, v622);
    task.defer(function() --[[ Line: 2627 ]]
        -- upvalues: v135 (ref), v619 (copy), v137 (ref), l_ScreenGui_0 (ref)
        v135.Sidebar.Size = UDim2.fromOffset(v619 + 20, v137.UIListLayout.AbsoluteContentSize.Y / l_ScreenGui_0.UIScale.Scale + 30);
    end);
    v138();
end);
v135.Top.StorageHolder.Storage:GetPropertyChangedSignal("TextBounds"):Connect(v138);
return l_Template_0;
ModuleScript: IslandRace
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_HttpService_0 = game:GetService("HttpService");
local l_TweenService_0 = game:GetService("TweenService");
local v4 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v5 = require(l_ReplicatedStorage_0.Client.PlayerControls);
local v6 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateCountdown);
local v8 = require(l_ReplicatedStorage_0.Shared.Utils.RaceUtil);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.PlayTransition);
local v12 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v13 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v14 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Animations.SetFade);
local v15 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v16 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v17 = require(l_ReplicatedStorage_0.Shared.Palette);
local v18 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v20 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v21 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.Confetti);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v24 = require(l_ReplicatedStorage_0.Client.Effects.Physics);
local v25 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_IslandRace_0 = l_ScreenGui_0.IslandRace;
l_IslandRace_0.Visible = false;
local l_Items_0 = l_IslandRace_0.Rewards.Items;
local l_Template_0 = l_Items_0.Template;
l_Template_0.Parent = nil;
local v35 = v12.new(function() --[[ Line: 42 ]]
    -- upvalues: l_Template_0 (copy), v18 (copy), l_HttpService_0 (copy), v20 (copy)
    local v32 = l_Template_0:Clone();
    v18:OnEnter(v32.Button, function() --[[ Line: 45 ]]
        -- upvalues: v32 (copy), l_HttpService_0 (ref), v20 (ref)
        local l_v32_Attribute_0 = v32:GetAttribute("Item");
        local v34 = l_HttpService_0:JSONDecode(l_v32_Attribute_0);
        if not v34 then
            return;
        else
            return v20.fromItem(v34);
        end;
    end);
    return v32;
end);
local v36 = nil;
local v37 = {};
local l_Race_0 = workspace.Worlds["The Overworld"].Race;
local l_Pad_0 = l_Race_0.Pad;
local l_FullName_0 = l_Pad_0.Root:GetFullName();
local l_Win_0 = l_IslandRace_0.Win;
local l_Lose_0 = l_IslandRace_0.Lose;
l_Win_0.Parent = nil;
l_Lose_0.Parent = nil;
local v43 = TweenInfo.new(0.2, Enum.EasingStyle.Quint);
local v44 = TweenInfo.new(1);
local function v47(v45) --[[ Line: 78 ]] --[[ Name: finish ]]
    -- upvalues: l_Win_0 (copy), l_Lose_0 (copy), l_ScreenGui_0 (copy), v14 (copy), v43 (copy), l_TweenService_0 (copy), v21 (copy), v22 (copy), v44 (copy), l_IslandRace_0 (copy)
    local v46 = (v45 == "Win" and l_Win_0 or l_Lose_0):Clone();
    v46.UIScale.Scale = 2;
    v46.Visible = true;
    v46.Parent = l_ScreenGui_0;
    v14(v46, 0, v43);
    l_TweenService_0:Create(v46.UIScale, v43, {
        Scale = 1
    }):Play();
    if v45 == "Win" then
        v21:Emit(v21.Bottom, 15);
        v22("MinigameVictory");
    end;
    v22("Whistle");
    task.wait(v45 == "Win" and 2 or 1);
    v14(v46, 1, v43);
    task.wait(v44.Time);
    l_IslandRace_0.Visible = false;
    l_ScreenGui_0.HUD.Visible = true;
    v46:Destroy();
end;
local function v56() --[[ Line: 105 ]] --[[ Name: updateRewards ]]
    -- upvalues: v9 (copy), v8 (copy), v37 (ref), v23 (copy), v35 (copy), l_Items_0 (copy), l_HttpService_0 (copy), v13 (copy), v10 (copy)
    local v48 = v9:Get();
    if not v48 then
        return;
    else
        local l_v8_Seed_0 = v8:GetSeed();
        local l_v8_Rewards_0 = v8:GetRewards(l_v8_Seed_0);
        v37 = {};
        for v51, v52 in l_v8_Rewards_0 do
            local v53 = table.clone(v52.Item);
            if v53.Type == "Currency" then
                local l_v23_CurrencyMultiplier_0 = v23:GetCurrencyMultiplier(v48, v53.Currency, true);
                v53.Amount = math.floor(v53.Amount * l_v23_CurrencyMultiplier_0);
            end;
            local v55 = v35:Get();
            v55.LayoutOrder = v51;
            v55.Parent = l_Items_0;
            v55.Requirement.TextColor3 = Color3.new(1, 1, 1);
            v55.Requirement.FontFace.Bold = false;
            v55:SetAttribute("Item", l_HttpService_0:JSONEncode(v53));
            v13:FormatAmount(v55.Button.Label, v53);
            v13:UpdateIcon(v55.Button.Icon, v53);
            if v52.Time > 10000000000 then
                v55.Requirement.Text = "Finish Race";
            else
                v55.Requirement.Text = ("%* \226\143\176"):format((v10.formatTime(v8.RaceTime - v52.Time)));
            end;
            table.insert(v37, {
                Element = v55, 
                Reward = v52, 
                Enabled = true
            });
        end;
        v35:Done();
        return;
    end;
end;
local v57 = nil;
local function v67() --[[ Line: 149 ]] --[[ Name: update ]]
    -- upvalues: v9 (copy), v8 (copy), v57 (ref), v56 (copy), v15 (copy), v16 (copy), v17 (copy), l_FullName_0 (copy), l_IslandRace_0 (copy), v5 (copy), v24 (copy), l_LocalPlayer_0 (copy), v7 (copy), l_Race_0 (copy), v10 (copy), v36 (ref), v37 (ref), v14 (copy), l_Pad_0 (copy)
    local v58 = v9:Get();
    if not v58 then
        return;
    else
        local l_v8_Phase_0 = v8:GetPhase();
        if l_v8_Phase_0.Type ~= v57 then
            if l_v8_Phase_0.Type == "Countdown" then
                v56();
            elseif l_v8_Phase_0.Type == "SignUp" and v58.AreasUnlocked.Zen then
                v15(("An %* has begun!"):format((v16.autoColor("Island Race", v17.Text.Cyan))), {
                    TeleportId = l_FullName_0, 
                    Sound = "NotificationHelp", 
                    DisplayTime = 3
                });
            end;
            if v57 == "Countdown" then
                l_IslandRace_0.Height.Leave.Visible = true;
                v5:Enable();
                v24:Update();
            end;
            v57 = l_v8_Phase_0.Type;
        end;
        if l_v8_Phase_0.Type == "Countdown" and v8:HasPlayer(l_LocalPlayer_0) then
            l_IslandRace_0.Height.Leave.Visible = false;
            v7((math.ceil(l_v8_Phase_0.Time)));
        elseif l_v8_Phase_0.Type == "Inactive" then
            l_Race_0.Display.BillboardGui.Timer.Text = v10.formatRealTime(l_v8_Phase_0.Time);
        end;
        if v36 then
            local v60 = v10.now() - v36.StartTime;
            for v61, v62 in v37 do
                local v63 = v62.Reward.Time - v60 > 0;
                if v63 ~= v62.Enabled then
                    v62.Enabled = v63;
                    v62.Element.Requirement.Text = "X";
                    v62.Element.Requirement.FontFace.Bold = false;
                    v62.Element.Requirement.TextColor3 = v17.Text.Red;
                    v62.Element.LayoutOrder = v61 + (v63 and 0 or 100);
                    v14(v62.Element.Button, v63 and 0 or 0.75, nil, {
                        "Frame", 
                        "ImageButton"
                    });
                end;
            end;
        end;
        local v64 = v8:HasPlayer(l_LocalPlayer_0);
        l_Pad_0.Parent = l_v8_Phase_0.Type == "SignUp" and l_Race_0 or nil;
        local l_BillboardGui_0 = l_Race_0.Display.BillboardGui;
        local v66 = false;
        if l_v8_Phase_0.Type == "Inactive" then
            v66 = not v64;
        end;
        l_BillboardGui_0.Enabled = v66;
        return;
    end;
end;
v25(l_IslandRace_0.Height.Leave.Button, v17.Button.Red);
v26(l_IslandRace_0.Height.Leave.Button, function() --[[ Line: 208 ]]
    -- upvalues: v36 (ref), l_IslandRace_0 (copy), l_ScreenGui_0 (copy), v4 (copy)
    v36 = nil;
    l_IslandRace_0.Visible = false;
    l_ScreenGui_0.HUD.Visible = true;
    v4:FireServer("RequestRaceLeave");
end);
v9:ConnectDataChanged("AreasUnlocked", function(v68) --[[ Line: 216 ]]
    -- upvalues: l_Race_0 (copy)
    l_Race_0.Parent = v68.AreasUnlocked.Zen and workspace.Worlds["The Overworld"] or nil;
end);
v4.Event("IslandRaceStart"):Connect(function(v69) --[[ Line: 221 ]]
    -- upvalues: v36 (ref), v67 (copy)
    v36 = v69;
    v67();
end);
v4.Event("IslandRaceFinish"):Connect(function(v70) --[[ Line: 226 ]]
    -- upvalues: v47 (copy)
    v47(v70);
end);
v6(0.25, v67);
l_LocalPlayer_0:GetAttributeChangedSignal("InRace"):Connect(function() --[[ Line: 232 ]]
    -- upvalues: l_LocalPlayer_0 (copy), v11 (copy), l_IslandRace_0 (copy), l_ScreenGui_0 (copy), v5 (copy), v36 (ref), v67 (copy)
    if l_LocalPlayer_0:GetAttribute("InRace") then
        v11("Race Time!", function() --[[ Line: 234 ]]
            -- upvalues: l_IslandRace_0 (ref), l_ScreenGui_0 (ref), v5 (ref)
            l_IslandRace_0.Visible = true;
            l_ScreenGui_0.HUD.Visible = false;
            l_IslandRace_0.Height.Leave.Visible = false;
            v5:Disable();
        end);
    else
        v36 = nil;
        l_IslandRace_0.Visible = false;
        l_ScreenGui_0.HUD.Visible = true;
    end;
    v67();
end);
return {};
ModuleScript: ItemShop
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local l_HttpService_0 = game:GetService("HttpService");
local l_MarketplaceService_0 = game:GetService("MarketplaceService");
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v5 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v9 = require(l_ReplicatedStorage_0.Shared.Palette);
local v10 = require(l_ReplicatedStorage_0.Shared.Constants);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v12 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v13 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v14 = require(l_ReplicatedStorage_0.Shared.Data.Shops);
local v15 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v16 = require(l_ReplicatedStorage_0.Shared.Utils.ShopUtil);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v18 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v19 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v20 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local v21 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v22 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.BuffUtil);
local v23 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v24 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local v25 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v27 = require(l_ReplicatedStorage_0.Client.Gui.Utils.CheckInventorySpace);
local v28 = require(l_ReplicatedStorage_0.Client.Gui.Animations.ProcessingPurchase);
local v29 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v30 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v31 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_ItemShop_0 = l_ScreenGui_0.ItemShop;
local l_ScrollingFrame_0 = l_ItemShop_0.Frame.Main.ScrollingFrame;
local l_Template_0 = l_ScrollingFrame_0.Template;
l_Template_0.Parent = nil;
local v38 = nil;
local v39 = nil;
local v40 = nil;
local v41 = nil;
local function _(v42, v43, v44) --[[ Line: 56 ]] --[[ Name: getShopHash ]]
    -- upvalues: l_HttpService_0 (copy)
    return l_HttpService_0:JSONEncode({
        Item = v42, 
        Stocks = v43, 
        Sales = v44
    });
end;
local function v57() --[[ Line: 65 ]] --[[ Name: updateTimers ]]
    -- upvalues: v5 (copy), v38 (ref), v14 (copy), v15 (copy), v22 (copy), l_ItemShop_0 (copy), v16 (copy)
    local v46 = v5:Get();
    if not v46 then
        return;
    elseif not v38 then
        return;
    else
        local v47 = v46.Shops[v38];
        local v48 = v14[v38];
        local v49 = v15.now();
        local l_RerollDuration_0 = v48.RerollDuration;
        local v51 = 1;
        for _, v53 in v46.MasteryUpgrades do
            if v53.Type == "FasterRestock" then
                v51 = v22:GetValue(1, v53.Buff);
                break;
            end;
        end;
        l_RerollDuration_0 = math.round(l_RerollDuration_0 / v51);
        local v54 = math.max(0, v47.Began + l_RerollDuration_0 - v49);
        if #v48.RandomItems == 0 then
            l_ItemShop_0.Frame.Timer.Frame.Top.Text = "RESTOCKS IN";
        else
            l_ItemShop_0.Frame.Timer.Frame.Top.Text = "REFRESHES IN";
        end;
        l_ItemShop_0.Frame.Timer.Frame.Label.Text = v15.formatTime(v54);
        l_RerollDuration_0 = v15.untilMidnight();
        local v55 = v16:GetMaxFreeRerolls(v46) > v46.ShopFreeRerolls.Used;
        local l_Button_0 = l_ItemShop_0.Frame.FreeReroll.Reroll.Button;
        if v55 then
            l_Button_0.Label.Text = "Reroll Now";
        else
            l_Button_0.Label.Text = ("\226\143\179 %* "):format((v15.formatTime(l_RerollDuration_0)));
        end;
        l_Button_0.BackgroundTransparency = v55 and 0 or 0.3;
        l_Button_0.UIStroke.Transparency = v55 and 0 or 0.3;
        l_Button_0.Label.TextTransparency = v55 and 0 or 0.3;
        l_Button_0.Label.UIStroke.Transparency = v55 and 0 or 0.3;
        l_Button_0.Active = v55;
        l_Button_0.Selectable = v55;
        return;
    end;
end;
local l_Currency_0 = l_ItemShop_0.Frame.Currency;
local l_List_0 = l_Currency_0.List;
local l_Template_1 = l_List_0.Template;
l_Template_1.Parent = nil;
local v61 = {};
for v62, v63 in v20 do
    local v64 = l_Template_1:Clone();
    v64.Name = v62;
    v64.Icon.Image = v63.Image;
    v64.Amount.TextColor3 = v63.Color;
    v64.LayoutOrder = v63.LayoutOrder;
    v64.Visible = false;
    v64.Parent = l_List_0;
    local function v66() --[[ Line: 140 ]] --[[ Name: updateLabelSize ]]
        -- upvalues: v64 (copy), l_UIScale_0 (copy)
        local v65 = math.ceil(v64.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
        v64.Amount.Size = UDim2.new(0, v65, 1, 0);
    end;
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v66);
    v64.Amount:GetPropertyChangedSignal("TextBounds"):Connect(v66);
    local v67 = math.ceil(v64.Amount.TextBounds.X / l_UIScale_0.Scale) + 1;
    v64.Amount.Size = UDim2.new(0, v67, 1, 0);
    v67 = function() --[[ Line: 148 ]] --[[ Name: updateEntrySize ]]
        -- upvalues: v64 (copy), l_UIScale_0 (copy)
        local v68 = math.ceil(v64.UIListLayout.AbsoluteContentSize.X / l_UIScale_0.Scale) + 1;
        v64.Size = UDim2.fromOffset(v68 + 8, 40);
    end;
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v66);
    v64.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v67);
    local v69 = math.ceil(v64.UIListLayout.AbsoluteContentSize.X / l_UIScale_0.Scale) + 1;
    v64.Size = UDim2.fromOffset(v69 + 8, 40);
    v61[v62] = v64;
end;
local function v72() --[[ Line: 160 ]] --[[ Name: updateCurrencySize ]]
    -- upvalues: l_List_0 (copy), l_UIScale_0 (copy), l_Currency_0 (copy)
    local v70 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.X / l_UIScale_0.Scale) + 1;
    local v71 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale) + 1;
    l_Currency_0.Size = UDim2.fromOffset(v70 + 25, v71 + 15);
end;
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v72);
l_List_0.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v72);
local v73 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.X / l_UIScale_0.Scale) + 1;
local v74 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale) + 1;
l_Currency_0.Size = UDim2.fromOffset(v73 + 25, v74 + 15);
v73 = function() --[[ Line: 169 ]] --[[ Name: updateCurrency ]]
    -- upvalues: v5 (copy), v38 (ref), v16 (copy), l_LocalPlayer_0 (copy), v61 (copy), v24 (copy), v19 (copy)
    local v75 = v5:Get();
    if not v38 or not v75 then
        return;
    else
        local _ = v75.Shops[v38];
        local l_v16_ItemsData_0 = v16:GetItemsData(v38, l_LocalPlayer_0, v75);
        local v78 = {};
        for _, v80 in l_v16_ItemsData_0 do
            v78[v80.Cost.Currency] = true;
        end;
        for v81, v82 in v61 do
            local l_v24_Balance_0 = v24:GetBalance(v75, v81);
            v82.Visible = v78[v81] == true;
            v82.Amount.Text = v19(l_v24_Balance_0, 10000);
        end;
        return;
    end;
end;
v74 = {};
local function v87() --[[ Line: 203 ]] --[[ Name: updateShopSize ]]
    -- upvalues: l_ScrollingFrame_0 (copy), l_ItemShop_0 (copy)
    local v84 = 0;
    for _, v86 in l_ScrollingFrame_0:GetChildren() do
        if v86:IsA("Frame") and v86.Visible then
            v84 = v84 + 1;
        end;
    end;
    if v84 <= 3 then
        l_ItemShop_0.Frame.Size = UDim2.fromOffset(700, 425);
        return;
    elseif v84 <= 4 then
        l_ItemShop_0.Frame.Size = UDim2.fromOffset(900, 425);
        return;
    elseif v84 <= 6 then
        l_ItemShop_0.Frame.Size = UDim2.fromOffset(700, 730);
        return;
    else
        l_ItemShop_0.Frame.Size = UDim2.fromOffset(900, 730);
        return;
    end;
end;
local function v126() --[[ Line: 228 ]] --[[ Name: update ]]
    -- upvalues: v5 (copy), v38 (ref), v14 (copy), l_ItemShop_0 (copy), v16 (copy), l_LocalPlayer_0 (copy), l_HttpService_0 (copy), v40 (ref), v39 (ref), v41 (ref), v74 (copy), l_Template_0 (copy), v11 (copy), v17 (copy), v18 (copy), v7 (copy), v23 (copy), v25 (copy), v26 (copy), v27 (copy), v21 (copy), v6 (copy), v9 (copy), v8 (copy), l_ScrollingFrame_0 (copy), v19 (copy), l_UIScale_0 (copy), v20 (copy), v57 (copy), v73 (copy), v87 (copy)
    local v88 = v5:Get();
    if not v88 then
        return;
    elseif not v38 then
        return;
    else
        local v89 = v14[v38];
        l_ItemShop_0.Frame.Top.Label.Text = v89.DisplayName;
        l_ItemShop_0.Frame.Top.Label.Highlight.Text = v89.DisplayName;
        local v90 = v88.Shops[v38];
        local l_v16_ItemsData_1, v92, v93 = v16:GetItemsData(v38, l_LocalPlayer_0, v88);
        local v94 = l_HttpService_0:JSONEncode({
            Item = l_v16_ItemsData_1, 
            Stocks = v92, 
            Sales = v93
        });
        local l_Began_0 = v90.Began;
        if l_Began_0 ~= v40 or v39 ~= v38 or v94 ~= v41 then
            v40 = l_Began_0;
            v39 = v38;
            v41 = v94;
            for _, v97 in v74 do
                for _, v99 in v97 do
                    v99.Cleanup();
                    v99.Frame:Destroy();
                end;
                table.clear(v97);
            end;
            table.clear(v74);
        end;
        local v100 = v74[v38];
        if not v100 then
            v100 = {};
            v74[v38] = v100;
        end;
        local l_v16_UnlockedSlots_0 = v16:GetUnlockedSlots(v88, #l_v16_ItemsData_1);
        for v102, v103 in l_v16_ItemsData_1 do
            local v104 = v102 <= l_v16_UnlockedSlots_0;
            local v105 = v90.Bought[v102] or 0;
            local v106 = v92[v102];
            local l_Product_0 = v103.Product;
            local v108 = math.max(0, v106 - v105);
            local v109 = v108 <= 0;
            local l_Cost_0 = v103.Cost;
            local v111 = v93[v102] == true;
            local v112 = v100[v102];
            if not v112 then
                local v113 = l_Template_0:Clone();
                v113.Name = ("Item%*"):format(v102);
                local v114, v115 = v11(l_Product_0);
                v114.Size = UDim2.fromScale(1, 1);
                v17:OnEnter(v114.Button, function() --[[ Line: 295 ]]
                    -- upvalues: v18 (ref), l_Product_0 (copy)
                    return v18.fromItem(l_Product_0);
                end);
                v114.Parent = v113.Frame;
                v7(v113.Buy.Button, function() --[[ Line: 300 ]]
                    -- upvalues: v5 (ref), v23 (ref), l_Cost_0 (copy), v25 (ref), v26 (ref), l_Product_0 (copy), v27 (ref), v21 (ref), v38 (ref), v102 (copy)
                    local v116 = v5:Get();
                    if not v116 then
                        return;
                    elseif not v23:CanAfford(v116, l_Cost_0) then
                        local v118 = v25.fromNotEnough(v116, l_Cost_0, function(v117) --[[ Line: 307 ]]
                            return (("You need %* to buy this!"):format(v117));
                        end);
                        return v26(v118:Build());
                    elseif l_Product_0.Type == "Pet" and not v27(v116) then
                        return;
                    else
                        v21:FireServer("BuyShopItem", v38, v102);
                        return;
                    end;
                end);
                v6(v113.Cover.Open.Button, v9.Button.Purple);
                v7(v113.Cover.Open.Button, function() --[[ Line: 321 ]]
                    -- upvalues: v8 (ref)
                    v8:Open("Mastery");
                end);
                v113.Parent = l_ScrollingFrame_0;
                v112 = {
                    Frame = v113, 
                    Cleanup = v115
                };
                v100[v102] = v112;
            end;
            local l_Label_0 = v112.Frame.Buy.Button.Frame.Label;
            l_Label_0.Text = v19(l_Cost_0.Amount, 10000);
            task.defer(function() --[[ Line: 338 ]]
                -- upvalues: l_Label_0 (copy), l_UIScale_0 (ref)
                local v120 = math.ceil(l_Label_0.TextBounds.X / l_UIScale_0.Scale) + 1;
                l_Label_0.Size = UDim2.new(0, v120, 1, 0);
            end);
            local l_Red_0 = v9.Button.Red;
            local v122 = v23:GetOwnedAmount(v88, l_Cost_0) >= v23:GetAmount(l_Cost_0);
            if v122 then
                l_Red_0 = if l_Cost_0.Type == "Currency" and l_Cost_0.Currency == "Gems" then v9.Button.Gem else v9.Button.Green;
            end;
            if not v104 then
                v112.Frame.LayoutOrder = 9999 + v102;
            elseif not v122 then
                v112.Frame.LayoutOrder = 999 + v102;
            else
                v112.Frame.LayoutOrder = v102;
            end;
            l_Label_0.UIStroke.Color = l_Red_0.Stroke or Color3.fromHex("#00295e");
            v6(v112.Frame.Buy.Button, l_Red_0);
            l_Label_0.Parent.Icon.Image = v20[l_Cost_0.Currency].Image;
            v112.Frame.Buy.Visible = not v109 and v104;
            v112.Frame.Frame.Visible = v104;
            v112.Frame.Stock.Visible = v104;
            v112.Frame.Cover.Visible = not v104;
            v112.Frame.Sale.Visible = v104 and v111;
            local l_Stock_0 = v112.Frame.Stock;
            if v109 then
                l_Stock_0.Text = "Out of stock!";
            else
                l_Stock_0.Text = ("%* in stock"):format(v108);
            end;
            v112.Frame.Visible = v102 <= l_v16_UnlockedSlots_0 + 1;
        end;
        local l_v16_MaxFreeRerolls_0 = v16:GetMaxFreeRerolls(v88);
        local l_Used_0 = v88.ShopFreeRerolls.Used;
        l_ItemShop_0.Frame.FreeReroll.Visible = l_v16_MaxFreeRerolls_0 > 0;
        l_ItemShop_0.Frame.FreeReroll.Reroll.Button.Amount.Text = ("%* remaining"):format(l_v16_MaxFreeRerolls_0 - l_Used_0);
        v57();
        v73();
        v87();
        return;
    end;
end;
local v127 = {
    "Shops", 
    "MasteryLevels", 
    "MasteryUpgrades", 
    "ShopFreeRerolls"
};
for _, v129 in v24:GetDataKeys() do
    table.insert(v127, v129);
end;
v13("ItemShop", v127, v126);
v6(l_ItemShop_0.Frame.FreeReroll.Reroll.Button, v9.Button.Purple);
v7(l_ItemShop_0.Frame.FreeReroll.Reroll.Button, function() --[[ Line: 409 ]]
    -- upvalues: v38 (ref), v21 (copy)
    if v38 then
        v21:FireServer("ShopFreeReroll", v38);
    end;
end);
v21.Event("ShopsRestocked"):Connect(function(v130) --[[ Line: 419 ]]
    -- upvalues: v5 (copy), v9 (copy), v14 (copy), v15 (copy), v31 (copy), v29 (copy)
    local v131 = v5:Get();
    if not v131 then
        return;
    else
        for _, v133 in v130 do
            local l_Yellow_0 = v9.Text.Yellow;
            if v133 == "shard-shop" then
                l_Yellow_0 = v9.Text.Pink;
            end;
            local v135 = v14[v133];
            if v133 ~= "traveling-merchant" or v15.isWeekend() then
                local l_Unlocked_0 = v135.Unlocked;
                if not l_Unlocked_0 or l_Unlocked_0(v131) ~= false then
                    v31(("The %* has restocked!"):format((v29.autoColor(v135.DisplayName, l_Yellow_0))), {
                        Sound = "ShopRestock"
                    });
                end;
            end;
        end;
        return;
    end;
end);
l_ScrollingFrame_0.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v87);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v87);
v87();
v12(l_ScrollingFrame_0, l_ScrollingFrame_0.UIListLayout);
local l_ShopRerollProductId_0 = v10.ShopRerollProductId;
v6(l_ItemShop_0.Frame.Timer.Buy.Button, v9.Button.Purple);
v7(l_ItemShop_0.Frame.Timer.Buy.Button, function() --[[ Line: 464 ]]
    -- upvalues: v38 (ref), v28 (copy), v21 (copy), l_MarketplaceService_0 (copy), l_LocalPlayer_0 (copy), l_ShopRerollProductId_0 (copy)
    if v38 then
        v28:Show();
        v21:FireServer("SetShopRerollTarget", v38);
        l_MarketplaceService_0:PromptProductPurchase(l_LocalPlayer_0, l_ShopRerollProductId_0);
    end;
end);
v6(l_ItemShop_0.Frame.Close, v9.Button.Red);
v7(l_ItemShop_0.Frame.Close, function() --[[ Line: 475 ]]
    -- upvalues: v8 (copy)
    v8:Close();
end);
v8:BindOnClosed("ItemShop", function() --[[ Line: 480 ]]
    -- upvalues: v38 (ref)
    v38 = nil;
end);
v13("ItemShop", {
    "MasteryUpgrades", 
    "ShopFreeRerolls"
}, v57);
task.spawn(function() --[[ Line: 489 ]]
    -- upvalues: v8 (copy), v57 (copy)
    while true do
        if v8:IsOpen("ItemShop") then
            v57();
        end;
        task.wait(0.25);
    end;
end);
local v141 = {
    SetShopId = function(_, v139) --[[ Line: 502 ]] --[[ Name: SetShopId ]]
        -- upvalues: v38 (ref), v126 (copy)
        v38 = v139;
        v126();
    end, 
    GetShopId = function(_) --[[ Line: 507 ]] --[[ Name: GetShopId ]]
        -- upvalues: v38 (ref)
        return v38;
    end
};
v8:BindOnOpened("ItemShop", function() --[[ Line: 512 ]]
    -- upvalues: v5 (copy), v38 (ref), v25 (copy), v29 (copy), v9 (copy), v6 (copy), v7 (copy), v26 (copy), v8 (copy), v30 (copy)
    task.defer(function() --[[ Line: 513 ]]
        -- upvalues: v5 (ref), v38 (ref), v25 (ref), v29 (ref), v9 (ref), v6 (ref), v7 (ref), v26 (ref), v8 (ref)
        local v142 = v5:Get();
        if not v142 then
            return;
        else
            if v38 == "shard-shop" then
                local v143 = false;
                for _, v145 in v142.MasteryUpgrades do
                    if v145.Type == "Blackmarket" then
                        v143 = true;
                        break;
                    end;
                end;
                if not v143 then
                    local v148 = v25.new("Uh Oh!"):Sound("PopupFailure"):Text((("You need the %* to access this shop!"):format((v29.autoColor("Blackmarket Mastery", v9.Text.Pink))))):Button(function(v146, v147) --[[ Line: 530 ]]
                        -- upvalues: v6 (ref), v9 (ref), v7 (ref)
                        v146.Label.Text = "Close";
                        v6(v146, v9.Button.Red);
                        v7(v146, v147);
                    end);
                    v26(v148:Build());
                    v8:Close();
                end;
            end;
            return;
        end;
    end);
    v30("ShopOpen");
end);
return v141;
ModuleScript: Mastery
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local l_RunService_0 = game:GetService("RunService");
local l_TweenService_0 = game:GetService("TweenService");
local v4 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.Animations.Book);
local _ = require(l_ReplicatedStorage_0.Client.Framework.Utilities.UserInput);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v8 = require(l_ReplicatedStorage_0.Shared.Palette);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v10 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v11 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v12 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v13 = require(l_ReplicatedStorage_0.Shared.Data.Mastery);
local v14 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v15 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v16 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v17 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.MasteryUtil);
local v18 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local _ = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local _ = require(l_ReplicatedStorage_0.Client.Effects.OutlinePulse);
local v21 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v22 = require(l_ReplicatedStorage_0.Shared.Data.Builders.PromptBuilder);
local v23 = require(l_ReplicatedStorage_0.Client.Gui.Prompt);
local v24 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Emitter);
local v25 = require(l_ReplicatedStorage_0.Client.Gui.Utils.PlayLocalSound);
local v26 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v27 = require(l_ReplicatedStorage_0.Shared.Constants);
local v28 = require(l_ReplicatedStorage_0.Shared.Data.Currency);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v30 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local l_LocalPlayer_0 = l_Players_0.LocalPlayer;
local l_CurrentCamera_0 = workspace.CurrentCamera;
local l_ScreenGui_0 = l_LocalPlayer_0.PlayerGui.ScreenGui;
local l_Mastery_0 = l_ScreenGui_0.Mastery;
local v35 = "Pets";
local v36 = v24.fromEmitter(l_ReplicatedStorage_0.Assets.Particles.Mastery);
v36.Parent = nil;
v36.Rate = 0;
v36.Parent = l_Mastery_0.Effect.Emitter;
local v37 = TweenInfo.new(0.125, Enum.EasingStyle.Sine, Enum.EasingDirection.In);
local v38 = TweenInfo.new(v37.Time, v37.EasingStyle);
local l_Template_0 = l_Mastery_0.Container.Left.ScrollingFrame.Template;
l_Template_0.Parent = nil;
local l_Template_1 = l_Mastery_0.Container.Right.ScrollingFrame.Template;
l_Template_1.Parent = nil;
local l_Template_2 = l_Template_1.Content.Template;
l_Template_2.Parent = nil;
local l_Purchase_0 = l_Template_1.Content.Purchase;
l_Purchase_0.Parent = nil;
local v43 = {};
local v44 = nil;
local v45 = nil;
local v47 = v12.new(function() --[[ Line: 69 ]]
    -- upvalues: l_Template_0 (copy), v9 (copy), v45 (ref)
    local v46 = l_Template_0:Clone();
    v9(v46.Button, function() --[[ Line: 72 ]]
        -- upvalues: v45 (ref), v46 (copy)
        v45(v46.Name);
    end);
    return v46;
end);
local v48 = v12.new(function() --[[ Line: 79 ]]
    -- upvalues: l_Template_1 (copy)
    return l_Template_1:Clone();
end);
local v49 = v12.new(function() --[[ Line: 83 ]]
    -- upvalues: l_Template_2 (copy)
    return l_Template_2:Clone();
end);
local function v53() --[[ Line: 88 ]] --[[ Name: createConnection ]]
    -- upvalues: v44 (ref), l_RunService_0 (copy), v43 (copy)
    if v44 then
        v44:Disconnect();
    end;
    v44 = l_RunService_0.Heartbeat:Connect(function() --[[ Line: 92 ]]
        -- upvalues: v43 (ref)
        local v50 = os.clock();
        for v51, _ in v43 do
            v51.Rotation = v50 * 100 % 360;
        end;
    end);
end;
local v54 = 0;
local function v56() --[[ Line: 101 ]] --[[ Name: pulseCamera ]]
    -- upvalues: v54 (ref), l_TweenService_0 (copy), l_CurrentCamera_0 (copy), v38 (copy), v37 (copy)
    local v55 = v54 + 1;
    v54 = v55;
    l_TweenService_0:Create(l_CurrentCamera_0, v38, {
        FieldOfView = 75
    }):Play();
    task.wait(v38.Time);
    if v55 == v54 then
        l_TweenService_0:Create(l_CurrentCamera_0, v37, {
            FieldOfView = 70
        }):Play();
    end;
end;
local function v58() --[[ Line: 112 ]] --[[ Name: shockwave ]]
    -- upvalues: l_Mastery_0 (copy), l_TweenService_0 (copy)
    local v57 = l_Mastery_0.Shockwave:Clone();
    v57.Visible = true;
    v57.Parent = l_Mastery_0;
    l_TweenService_0:Create(v57, TweenInfo.new(1.25, Enum.EasingStyle.Quint), {
        Size = UDim2.fromOffset(3000, 3000), 
        ImageTransparency = 1
    }):Play();
    task.delay(1.25, function() --[[ Line: 120 ]]
        -- upvalues: v57 (copy)
        v57:Destroy();
    end);
end;
local function v68(v59) --[[ Line: 126 ]] --[[ Name: scrollToUnlocked ]]
    -- upvalues: l_Mastery_0 (copy), l_ScreenGui_0 (copy), l_TweenService_0 (copy)
    local v60 = {};
    for _, v62 in l_Mastery_0.Container.Right.ScrollingFrame:GetChildren() do
        if v62:IsA("Frame") then
            local l_Cover_0 = v62:FindFirstChild("Cover");
            if l_Cover_0 then
                if not l_Cover_0.Visible then
                    table.insert(v60, v62);
                else
                    break;
                end;
            end;
        end;
    end;
    table.sort(v60, function(v64, v65) --[[ Line: 141 ]]
        return v64.LayoutOrder < v65.LayoutOrder;
    end);
    local v66 = 0;
    for v67 = 1, #v60 - 1 do
        v66 = v66 + v60[v67].Size.Y.Offset / l_ScreenGui_0.UIScale.Scale;
    end;
    if v59 then
        l_Mastery_0.Container.Right.ScrollingFrame.CanvasPosition = Vector2.new(0, v66);
        return;
    else
        l_TweenService_0:Create(l_Mastery_0.Container.Right.ScrollingFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {
            CanvasPosition = Vector2.new(0, v66)
        }):Play();
        return;
    end;
end;
local function v96(v69) --[[ Line: 158 ]] --[[ Name: update ]]
    -- upvalues: v14 (copy), v13 (copy), v17 (copy), v47 (copy), l_Mastery_0 (copy), v26 (copy), l_ReplicatedStorage_0 (copy), v43 (copy), v35 (ref), v48 (copy), v27 (copy), v49 (copy), v18 (copy), v15 (copy), v7 (copy), l_Purchase_0 (copy), v8 (copy), v28 (copy), v16 (copy), l_ScreenGui_0 (copy), v68 (copy)
    local v70 = v14:Get();
    if not v70 then
        return;
    else
        for v71, v72 in v13.Upgrades do
            local v73 = v70.MasteryLevels[v71] or 0;
            local l_v17_Emblem_0 = v17:GetEmblem(v73, #v72.Levels);
            local l_Effect_0 = l_v17_Emblem_0.Effect;
            local v76 = v47:Get();
            v76.Name = v71;
            v76.LayoutOrder = v72.LayoutOrder;
            v76.Button.Icon.Image = v72.Icon;
            v76.Button.Label.Text = v71;
            v76.Button.Image = l_v17_Emblem_0.Background;
            v76.Button.Emblem.Image = l_v17_Emblem_0.Image;
            v76.Button.ImageColor3 = l_Effect_0 == nil and Color3.fromRGB(235, 178, 155) or Color3.new(1, 1, 1);
            v76.Parent = l_Mastery_0.Container.Left.ScrollingFrame;
            local l_UIGradient_0 = v76.Button.UIGradient;
            l_UIGradient_0.Enabled = l_v17_Emblem_0.Effect ~= nil;
            if l_Effect_0 ~= nil then
                if l_Effect_0 == "Rainbow" then
                    v26.Cycle(v76.Button.Label, "Rainbow", {
                        Speed = 0.4
                    });
                    v26.Cycle(v76.Button.Level, "Rainbow", {
                        Speed = 0.4
                    });
                    l_UIGradient_0.Color = l_ReplicatedStorage_0.Assets.Gradients.Rainbow.Color;
                end;
                v43[l_UIGradient_0] = l_Effect_0;
            else
                v43[l_UIGradient_0] = nil;
                v26.None(v76.Button.Label);
                v26.None(v76.Button.Level);
            end;
            if v73 == #v72.Levels then
                v76.Button.Level.Text = "MAX";
            else
                local v78 = v71 == v35;
                v76.Button.ImageColor3 = v78 and Color3.fromRGB(0, 213, 255) or Color3.fromRGB(235, 178, 155);
                v76.Button.Label.TextColor3 = v78 and Color3.fromRGB(0, 242, 255) or Color3.new(1, 1, 1);
                v76.Button.Level.Text = v73 == 0 and "" or ("Level %*"):format(v73);
            end;
        end;
        local v79 = v13.Upgrades[v35];
        local v80 = v70.MasteryLevels[v35] or 0;
        local v81 = {};
        for v82, v83 in v79.Levels do
            local v84 = v48:Get();
            local l_Cost_0 = v83.Cost;
            local v86 = false;
            if v83.UnlockEarly and v83.UnlockEarly(v70) then
                v86 = true;
                l_Cost_0 = {
                    Type = "Currency", 
                    Currency = "Coins", 
                    Amount = 0
                };
            end;
            local l_v17_Emblem_1 = v17:GetEmblem(v82, #v79.Levels);
            v84.Content.Title.Text = ("~ Level %* ~"):format(v82);
            local l_Cover_1 = v84.Cover;
            local v89 = false;
            if v80 < v82 - 1 then
                v89 = not v86;
            end;
            l_Cover_1.Visible = v89;
            l_Cover_1 = v84.Line;
            v89 = false;
            if v82 < #v79.Levels then
                v89 = v82 - 1 <= v80;
            end;
            l_Cover_1.Visible = v89;
            v84.Content.UnlockEarly.Visible = v86;
            v84.Parent = l_Mastery_0.Container.Right.ScrollingFrame;
            if l_v17_Emblem_1.Rarity == "Legendary" then
                v84.Content.Title.TextColor3 = Color3.new(1, 1, 1);
                v26.Cycle(v84.Content.Title, "Rainbow", {
                    Speed = 0.4
                });
            else
                v26.None(v84.Content.Title);
                v84.Content.Title.TextColor3 = v27.RarityColors[l_v17_Emblem_1.Rarity];
            end;
            for v90, v91 in v83.Upgrades do
                local v92 = (v81[v91.Type] or 0) + 1;
                v81[v91.Type] = v92;
                local l_v17_UpgradeInfo_0 = v17:GetUpgradeInfo(v70, v91, v92);
                local v94 = v49:Get();
                v94.Icon.Label.Image = l_v17_UpgradeInfo_0.Image;
                v94.Label.Text = l_v17_UpgradeInfo_0.DisplayName;
                v94.LayoutOrder = v90;
                v94.Description.Text = v18.autoStroke(l_v17_UpgradeInfo_0.Description);
                v94.Parent = v84.Content;
            end;
            if v82 == v80 + 1 then
                l_Cover_1 = v15:GetAmount(l_Cost_0);
                if l_Cover_1 > 0 then
                    if l_Cost_0.Currency == "Coins" then
                        v7(l_Purchase_0.Button, v8.Button.Green);
                        l_Purchase_0.Label.UIStroke.Color = v8.Button.Green.Stroke;
                    else
                        v7(l_Purchase_0.Button, v8.Button.Gem);
                        l_Purchase_0.Label.UIStroke.Color = v8.Button.Gem.Stroke;
                    end;
                    l_Purchase_0.Button.Icon.Visible = true;
                    l_Purchase_0.Button.Icon.Image = v28[l_Cost_0.Currency].Image;
                    l_Purchase_0.Button.UIPadding.PaddingRight = UDim.new(0, 10);
                    l_Purchase_0.Button.Label.Text = ("%*"):format((v16(l_Cover_1, 10000)));
                else
                    v7(l_Purchase_0.Button, v8.Button.Green);
                    l_Purchase_0.Label.UIStroke.Color = v8.Button.Green.Stroke;
                    l_Purchase_0.Button.Icon.Visible = false;
                    l_Purchase_0.Button.UIPadding.PaddingRight = UDim.new(0, 0);
                    l_Purchase_0.Button.Label.Text = "FREE";
                end;
                if v15:GetOwnedAmount(v70, l_Cost_0) < l_Cover_1 then
                    v7(l_Purchase_0.Button, v8.Button.Red);
                end;
                v84.Cover.Label.Text = ("Unlock Level %*"):format(v82);
                l_Purchase_0.Parent = v84.Content;
            else
                v84.Cover.Label.Text = "Locked";
            end;
            task.defer(function() --[[ Line: 281 ]]
                -- upvalues: v84 (copy), l_ScreenGui_0 (ref)
                local v95 = math.max(v84.Cover.UIListLayout.AbsoluteContentSize.Y / l_ScreenGui_0.UIScale.Scale + 40, v84.Content.UIListLayout.AbsoluteContentSize.Y / l_ScreenGui_0.UIScale.Scale);
                v84.Size = UDim2.new(1, -12, 0, v95);
            end);
        end;
        if #v79.Levels == v80 then
            l_Purchase_0.Parent = nil;
        end;
        v48:Done();
        v49:Done();
        v47:Done();
        task.defer(function() --[[ Line: 298 ]]
            -- upvalues: l_Purchase_0 (ref), l_ScreenGui_0 (ref), v68 (ref), v69 (copy)
            l_Purchase_0.Button.Label.Size = UDim2.new(0, l_Purchase_0.Button.Label.TextBounds.X / l_ScreenGui_0.UIScale.Scale, 1, 0);
            task.defer(v68, v69);
        end);
        return;
    end;
end;
v14:ConnectDataChanged(v30:GetDataKeys(), function() --[[ Line: 304 ]]
    -- upvalues: v96 (copy)
    v96();
end);
v45 = function(v97) --[[ Line: 310 ]] --[[ Name: updateSelected ]]
    -- upvalues: v35 (ref), l_Mastery_0 (copy), v96 (copy)
    v35 = v97;
    l_Mastery_0.Container.Right.Label.Text = ("%* Mastery"):format(v35);
    v96(true);
end;
v4:BindOnOpened("Mastery", v53);
v4:BindOnClosed("Mastery", function() --[[ Line: 318 ]]
    -- upvalues: v44 (ref)
    if v44 then
        v44:Disconnect();
        v44 = nil;
    end;
end);
v5(l_Mastery_0);
v7(l_Mastery_0.Close, v8.Button.Red);
v9(l_Mastery_0.Close, function() --[[ Line: 329 ]]
    -- upvalues: v4 (copy)
    v4:Close();
end);
v9(l_Purchase_0.Button, function() --[[ Line: 333 ]]
    -- upvalues: v14 (copy), v13 (copy), v35 (ref), v15 (copy), v22 (copy), v23 (copy), l_Purchase_0 (copy), v36 (copy), v56 (copy), v58 (copy), v25 (copy), l_Mastery_0 (copy), l_TweenService_0 (copy), v96 (copy), v21 (copy)
    local v98 = v14:Get();
    if not v98 then
        return;
    else
        local v99 = v13.Upgrades[v35];
        if not v99 then
            return;
        else
            local v100 = v98.MasteryLevels[v35] or 0;
            local v101 = v99.Levels[v100 + 1];
            if not v101 then
                return;
            else
                local l_Cost_1 = v101.Cost;
                if v101.UnlockEarly and v101.UnlockEarly(v98) then
                    l_Cost_1 = {
                        Type = "Currency", 
                        Currency = "Coins", 
                        Amount = 0
                    };
                end;
                if v15:GetOwnedAmount(v98, l_Cost_1) < v15:GetAmount(l_Cost_1) then
                    local v104 = v22.fromNotEnough(v98, l_Cost_1, function(v103) --[[ Line: 354 ]]
                        return (("You need %* to purchase this mastery!"):format(v103));
                    end);
                    return v23(v104:Build());
                else
                    if l_Purchase_0.Parent then
                        v36.Enabled = true;
                        v36:Emit(10);
                        task.spawn(function() --[[ Line: 366 ]]
                            -- upvalues: v36 (ref), v56 (ref), v58 (ref), v25 (ref), l_Mastery_0 (ref), l_TweenService_0 (ref), v96 (ref)
                            local v105 = TweenInfo.new(0.25, Enum.EasingStyle.Quint);
                            local v106 = TweenInfo.new(v105.Time, v105.EasingStyle, Enum.EasingDirection.In);
                            v36.Rate = 20;
                            v56();
                            v58();
                            v25("SparkleExplode");
                            l_Mastery_0.Effect.Fade.Size = UDim2.fromScale(2.5, 0);
                            l_TweenService_0:Create(l_Mastery_0.Effect.Fade, v105, {
                                ImageTransparency = 0.65, 
                                Size = UDim2.new(2.5, 0, 0, 500)
                            }):Play();
                            task.wait(v106.Time);
                            l_TweenService_0:Create(l_Mastery_0.Effect.Fade, v106, {
                                ImageTransparency = 1
                            }):Play();
                            v36.Rate = 0;
                            v96();
                        end);
                    end;
                    v21:FireServer("UpgradeMastery", v35);
                    return;
                end;
            end;
        end;
    end;
end);
v11("Mastery", {
    "MasteryLevels", 
    "MasteryUpgrades"
}, v96);
v10(l_Mastery_0.Container.Left.ScrollingFrame, l_Mastery_0.Container.Left.ScrollingFrame.UIGridLayout);
v10(l_Mastery_0.Container.Right.ScrollingFrame, l_Mastery_0.Container.Right.ScrollingFrame.UIListLayout);
v45(v35);
return {};
ModuleScript: PetChoosePrompt
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local l_Players_0 = game:GetService("Players");
local v2 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v4 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v6 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v7 = require(l_ReplicatedStorage_0.Shared.Palette);
local v8 = require(l_ReplicatedStorage_0.Client.Gui.Utils.GetPetRenderList);
local v9 = require(l_ReplicatedStorage_0.Client.Framework.Classes.VirtualGrid);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Classes.Pool);
local v11 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v12 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v13 = require(l_ReplicatedStorage_0.Client.Gui.PetEntryAppearance);
local v14 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v15 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v16 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v17 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Shiny);
local v18 = require(l_ReplicatedStorage_0.Shared.Data.Pets);
local v19 = require(l_ReplicatedStorage_0.Shared.Utils.SortPetsList);
local _ = require(l_ReplicatedStorage_0.Shared.Constants);
local v21 = require(l_ReplicatedStorage_0.Shared.Utils.PetStackUtil);
local v22 = require(l_ReplicatedStorage_0.Client.Framework.Services.InputMode);
local v23 = nil;
local v24 = nil;
local v25 = nil;
local v26 = nil;
local v27 = nil;
local v28 = nil;
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_PetChoosePrompt_0 = l_ScreenGui_0.PetChoosePrompt;
local l_ScrollingFrame_0 = l_PetChoosePrompt_0.Frame.Inner.Pets.ScrollingFrame;
l_ScrollingFrame_0:GetPropertyChangedSignal("CanvasPosition"):Connect(function() --[[ Line: 49 ]]
    -- upvalues: v4 (copy)
    v4:Hide();
end);
local l_UIGridLayout_0 = l_ScrollingFrame_0.Pets.UIGridLayout;
local l_Template_0 = l_ScrollingFrame_0.Pets.Template;
l_Template_0.Parent = nil;
local l_Tray_0 = l_PetChoosePrompt_0.Frame.Tray;
local l_Search_0 = l_Tray_0.Search;
local l_PropertyChangedSignal_0 = l_Search_0.Search.Bar.TextBox:GetPropertyChangedSignal("Text");
local function _() --[[ Line: 68 ]] --[[ Name: getSearch ]]
    -- upvalues: l_Search_0 (copy)
    local l_Text_0 = l_Search_0.Search.Bar.TextBox.Text;
    return string.lower((string.gsub(l_Text_0, "%s", "")));
end;
local function _() --[[ Line: 73 ]] --[[ Name: clearSearch ]]
    -- upvalues: l_Search_0 (copy)
    l_Search_0.Search.Bar.TextBox.Text = "";
end;
l_Search_0.Search.Bar.TextBox.Focused:Connect(function() --[[ Line: 77 ]]
    -- upvalues: v4 (copy)
    v4:Hide();
end);
local function v41() --[[ Line: 82 ]] --[[ Name: onClosed ]]
    -- upvalues: v24 (ref), v25 (ref), v26 (ref), v27 (ref), v28 (ref), l_Search_0 (copy), v4 (copy)
    v24 = nil;
    v25 = nil;
    v26 = nil;
    v27 = nil;
    v28 = nil;
    l_Search_0.Search.Bar.TextBox.Text = "";
    v4:Hide();
end;
local function _(v42) --[[ Line: 94 ]] --[[ Name: close ]]
    -- upvalues: v2 (copy), v24 (ref), v27 (ref), v25 (ref), v26 (ref), v28 (ref), l_Search_0 (copy), v4 (copy)
    if v2:IsOpen("PetChoosePrompt") then
        if v24 and (v42 or not v27) then
            v2:Open(v24);
        else
            v2:Close();
        end;
    end;
    v24 = nil;
    v25 = nil;
    v26 = nil;
    v27 = nil;
    v28 = nil;
    l_Search_0.Search.Bar.TextBox.Text = "";
    v4:Hide();
end;
v2:BindOnClosed("PetChoosePrompt", v41);
local l_animatedGradients_0 = v13.animatedGradients;
local v45 = nil;
local v46 = v12.new():size(20);
local l_v46_0 = v46 --[[ copy: 45 -> 65 ]];
v45 = function(v48) --[[ Line: 115 ]] --[[ Name: formatAmountText ]]
    -- upvalues: v12 (copy), l_v46_0 (copy), v14 (copy)
    return v12.autoStroke((("%*%*"):format(l_v46_0("x"), (v14(v48, 1000)))));
end;
v46 = "Power";
local _ = function(v49, v50) --[[ Line: 128 ]] --[[ Name: findPet ]]
    for _, v52 in v49 do
        if v52.Id == v50 then
            return v52;
        end;
    end;
    return nil;
end;
local _ = function(v54, v55) --[[ Line: 138 ]] --[[ Name: useEntryActivation ]]
    -- upvalues: l_ScreenGui_0 (copy)
    local v56 = false;
    if l_ScreenGui_0:FindFirstChild("Prompt") then
        return;
    else
        local v57 = string.sub(v55, 1, 36);
        local v58;
        for _, v60 in v54.Pets do
            if v60.Id == v57 then
                v58 = v60;
                v56 = true;
            end;
            if v56 then
                break;
            end;
        end;
        if not v56 then
            v58 = nil;
        end;
        v56 = false;
        if not v58 then
            return;
        else
            return v58;
        end;
    end;
end;
local l_Team_0 = l_ScrollingFrame_0.Team;
local l_List_0 = l_Team_0.Main.List;
local l_Template_1 = l_List_0.Template;
l_Template_1.Parent = nil;
local v84 = v10.new(function() --[[ Line: 160 ]]
    -- upvalues: l_Template_1 (copy), v4 (copy), v25 (ref), v28 (ref), v11 (copy), l_ScreenGui_0 (copy), v15 (copy), v22 (copy), v5 (copy), v7 (copy), v6 (copy), v2 (copy), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (copy)
    local v65 = l_Template_1:Clone();
    v4:OnEnter(v65.Inner.Button, function() --[[ Line: 163 ]]
        -- upvalues: v25 (ref), v28 (ref), v11 (ref), v65 (copy), l_ScreenGui_0 (ref), v15 (ref), v22 (ref), v5 (ref), v7 (ref), v6 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (ref), v4 (ref)
        local v66 = false;
        if not v25 then
            return;
        else
            local v67 = v28 or v11:Get();
            if not v67 then
                return;
            else
                local l_Name_0 = v65.Name;
                local v69;
                if l_ScreenGui_0:FindFirstChild("Prompt") then
                    v69 = nil;
                else
                    local v70 = string.sub(l_Name_0, 1, 36);
                    local v71;
                    for _, v73 in v67.Pets do
                        if v73.Id == v70 then
                            v71 = v73;
                            v66 = true;
                        end;
                        if v66 then
                            break;
                        end;
                    end;
                    if not v66 then
                        v71 = nil;
                    end;
                    v66 = false;
                    v69 = if not v71 then nil else v71;
                end;
                if not v69 then
                    return;
                else
                    local v74 = v15.fromPetRaw(v69);
                    v74:ID(l_Name_0);
                    if v22.Mode == "Touch" then
                        v74:Add({
                            Type = "Button", 
                            Callback = function(v75) --[[ Line: 186 ]] --[[ Name: Callback ]]
                                -- upvalues: v5 (ref), v7 (ref), v6 (ref), v25 (ref), v69 (copy), v2 (ref), v24 (ref), v26 (ref), v27 (ref), v28 (ref), l_Search_0 (ref), v4 (ref)
                                v75.Action.Button.Label.Text = "Select";
                                v5(v75.Action.Button, v7.Button.Green);
                                v6(v75.Action.Button, function() --[[ Line: 189 ]]
                                    -- upvalues: v25 (ref), v69 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), v28 (ref), l_Search_0 (ref), v4 (ref)
                                    v25(v69, true);
                                    if v2:IsOpen("PetChoosePrompt") then
                                        if v24 then
                                            v2:Open(v24);
                                        else
                                            v2:Close();
                                        end;
                                    end;
                                    v24 = nil;
                                    v25 = nil;
                                    v26 = nil;
                                    v27 = nil;
                                    v28 = nil;
                                    l_Search_0.Search.Bar.TextBox.Text = "";
                                    v4:Hide();
                                end);
                            end
                        });
                    end;
                    if v28 then
                        v74:Add({
                            Type = "Padding", 
                            Size = 10, 
                            Line = true
                        });
                        v74:Add({
                            Type = "Text", 
                            Text = v69.Id, 
                            Size = 28
                        });
                    end;
                    return v74:Build();
                end;
            end;
        end;
    end);
    v6(v65.Inner.Button, function() --[[ Line: 212 ]]
        -- upvalues: v28 (ref), v11 (ref), v65 (copy), l_ScreenGui_0 (ref), v25 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (ref), v4 (ref)
        local v76 = false;
        if v28 then
            return;
        else
            local v77 = v28 or v11:Get();
            if not v77 then
                return;
            else
                local l_Name_1 = v65.Name;
                local v79;
                if l_ScreenGui_0:FindFirstChild("Prompt") then
                    v79 = nil;
                else
                    local v80 = string.sub(l_Name_1, 1, 36);
                    local v81;
                    for _, v83 in v77.Pets do
                        if v83.Id == v80 then
                            v81 = v83;
                            v76 = true;
                        end;
                        if v76 then
                            break;
                        end;
                    end;
                    if not v76 then
                        v81 = nil;
                    end;
                    v76 = false;
                    v79 = if not v81 then nil else v81;
                end;
                if not v79 then
                    return;
                else
                    if v25 then
                        v25(v79, true);
                        if v2:IsOpen("PetChoosePrompt") then
                            if v24 then
                                v2:Open(v24);
                            else
                                v2:Close();
                            end;
                        end;
                        v24 = nil;
                        v25 = nil;
                        v26 = nil;
                        v27 = nil;
                        v28 = nil;
                        l_Search_0.Search.Bar.TextBox.Text = "";
                        v4:Hide();
                    end;
                    return;
                end;
            end;
        end;
    end);
    return v65;
end);
local v105 = v10.new(function() --[[ Line: 242 ]]
    -- upvalues: l_Template_0 (copy), v4 (copy), v25 (ref), v28 (ref), v11 (copy), l_ScreenGui_0 (copy), v15 (copy), v22 (copy), v5 (copy), v7 (copy), v6 (copy), v2 (copy), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (copy)
    local v85 = l_Template_0:Clone();
    v4:OnEnter(v85.Inner.Button, function() --[[ Line: 246 ]]
        -- upvalues: v25 (ref), v28 (ref), v11 (ref), v85 (copy), v4 (ref), l_ScreenGui_0 (ref), v15 (ref), v22 (ref), v5 (ref), v7 (ref), v6 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (ref)
        local v86 = false;
        if not v25 then
            return;
        else
            local v87 = v28 or v11:Get();
            if not v87 then
                return;
            else
                local l_Name_2 = v85.Name;
                if v4:GetId() == l_Name_2 then
                    return v4:Hide();
                else
                    local v89;
                    if l_ScreenGui_0:FindFirstChild("Prompt") then
                        v89 = nil;
                    else
                        local v90 = string.sub(l_Name_2, 1, 36);
                        local v91;
                        for _, v93 in v87.Pets do
                            if v93.Id == v90 then
                                v91 = v93;
                                v86 = true;
                            end;
                            if v86 then
                                break;
                            end;
                        end;
                        if not v86 then
                            v91 = nil;
                        end;
                        v86 = false;
                        v89 = if not v91 then nil else v91;
                    end;
                    if not v89 then
                        return;
                    else
                        local v94 = v15.fromPetRaw(v89);
                        v94:ID(l_Name_2);
                        if v22.Mode == "Touch" then
                            v94:Add({
                                Type = "Button", 
                                Callback = function(v95) --[[ Line: 271 ]] --[[ Name: Callback ]]
                                    -- upvalues: v5 (ref), v7 (ref), v6 (ref), v25 (ref), v89 (copy), v2 (ref), v24 (ref), v26 (ref), v27 (ref), v28 (ref), l_Search_0 (ref), v4 (ref)
                                    v95.Action.Button.Label.Text = "Select";
                                    v5(v95.Action.Button, v7.Button.Green);
                                    v6(v95.Action.Button, function() --[[ Line: 274 ]]
                                        -- upvalues: v25 (ref), v89 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), v28 (ref), l_Search_0 (ref), v4 (ref)
                                        v25(v89, false);
                                        if v2:IsOpen("PetChoosePrompt") then
                                            if v24 then
                                                v2:Open(v24);
                                            else
                                                v2:Close();
                                            end;
                                        end;
                                        v24 = nil;
                                        v25 = nil;
                                        v26 = nil;
                                        v27 = nil;
                                        v28 = nil;
                                        l_Search_0.Search.Bar.TextBox.Text = "";
                                        v4:Hide();
                                    end);
                                end
                            });
                        end;
                        if v28 then
                            v94:Add({
                                Type = "Padding", 
                                Size = 10, 
                                Line = true
                            });
                            v94:Add({
                                Type = "Text", 
                                Text = v89.Id, 
                                Size = 28
                            });
                        end;
                        return v94:Build();
                    end;
                end;
            end;
        end;
    end);
    v6(v85.Inner.Button, function() --[[ Line: 298 ]]
        -- upvalues: v28 (ref), v22 (ref), v11 (ref), v85 (copy), l_ScreenGui_0 (ref), v25 (ref), v2 (ref), v24 (ref), v26 (ref), v27 (ref), l_Search_0 (ref), v4 (ref)
        local v96 = false;
        if v28 then
            return;
        elseif v22.Mode == "Touch" then
            return;
        else
            local v97 = v28 or v11:Get();
            if not v97 then
                return;
            else
                local l_Name_3 = v85.Name;
                local v99;
                if l_ScreenGui_0:FindFirstChild("Prompt") then
                    v99 = nil;
                else
                    local v100 = string.sub(l_Name_3, 1, 36);
                    local v101;
                    for _, v103 in v97.Pets do
                        if v103.Id == v100 then
                            v101 = v103;
                            v96 = true;
                        end;
                        if v96 then
                            break;
                        end;
                    end;
                    if not v96 then
                        v101 = nil;
                    end;
                    v96 = false;
                    v99 = if not v101 then nil else v101;
                end;
                if not v99 then
                    return;
                else
                    if v25 then
                        v25(v99, false);
                        if v2:IsOpen("PetChoosePrompt") then
                            if v24 then
                                v2:Open(v24);
                            else
                                v2:Close();
                            end;
                        end;
                        v24 = nil;
                        v25 = nil;
                        v26 = nil;
                        v27 = nil;
                        v28 = nil;
                        l_Search_0.Search.Bar.TextBox.Text = "";
                        v4:Hide();
                    end;
                    return;
                end;
            end;
        end;
    end);
    return v85;
end, function(v104) --[[ Line: 326 ]]
    -- upvalues: l_animatedGradients_0 (copy), v16 (copy), v17 (copy)
    l_animatedGradients_0[v104.Inner.Background.UIGradient] = nil;
    v16.None(v104.Inner.Button);
    v16.None(v104.Inner.Button.Inner);
    v17:Remove(v104.Inner.Effect);
end);
local v107 = v10.new(function() --[[ Line: 335 ]]
    local l_Frame_0 = Instance.new("Frame");
    l_Frame_0.BackgroundTransparency = 1;
    return l_Frame_0;
end);
local l_Text_1 = l_Search_0.Search.Bar.TextBox.Text;
local v109 = string.lower((string.gsub(l_Text_1, "%s", "")));
l_Text_1 = nil;
local v110 = nil;
local function v112(v111) --[[ Line: 348 ]] --[[ Name: makeSearchable ]]
    return string.lower((string.gsub(v111, "%s", "")));
end;
local function _(v113) --[[ Line: 352 ]] --[[ Name: getPetSearchName ]]
    -- upvalues: v18 (copy), v112 (copy)
    local l_Name_4 = v113.Name;
    l_Name_4 = ("%* %*"):format(v18[v113.Name].Rarity, l_Name_4);
    if v113.Mythic then
        l_Name_4 = ("Mythic %*"):format(l_Name_4);
    end;
    if v113.Shiny then
        l_Name_4 = ("Shiny %*"):format(l_Name_4);
    end;
    return v112(l_Name_4);
end;
local v152 = v9.new(l_ScrollingFrame_0, l_UIGridLayout_0, function(v116) --[[ Line: 367 ]]
    -- upvalues: v28 (ref), v11 (copy), l_Text_1 (ref), v110 (ref), l_Search_0 (copy), v109 (ref), v19 (copy), v46 (ref), v18 (copy), v23 (ref), v21 (copy), v8 (copy), l_ScrollingFrame_0 (copy), v26 (ref), v107 (copy), v105 (copy), v13 (copy)
    local v117 = v28 or v11:Get();
    if not v117 then
        return function() --[[ Line: 370 ]]
            return nil;
        end, function() --[[ Line: 370 ]]
            return 0;
        end;
    else
        local l_l_Text_1_0 = l_Text_1;
        local l_v110_0 = v110;
        local l_Text_2 = l_Search_0.Search.Bar.TextBox.Text;
        local v121 = string.lower((string.gsub(l_Text_2, "%s", "")));
        if not v110 or not l_l_Text_1_0 or not v116 or v109 ~= v121 then
            l_Text_2 = {};
            l_l_Text_1_0 = {};
            local v122 = {};
            for _, v124 in v117.Teams[v117.TeamEquipped].Pets do
                v122[v124] = (v122[v124] or 0) + 1;
            end;
            local v125 = {};
            local v126 = {};
            for _, v128 in v117.Pets do
                table.insert(v125, v128.Id);
                v126[v128.Id] = v128;
            end;
            v19(v125, v126, v46);
            for _, v130 in v125 do
                local v131 = v126[v130];
                local l_Name_5 = v131.Name;
                local l_Name_6 = v131.Name;
                l_Name_6 = ("%* %*"):format(v18[v131.Name].Rarity, l_Name_6);
                if v131.Mythic then
                    l_Name_6 = ("Mythic %*"):format(l_Name_6);
                end;
                if v131.Shiny then
                    l_Name_6 = ("Shiny %*"):format(l_Name_6);
                end;
                local v134 = string.lower((string.gsub(l_Name_6, "%s", "")));
                if (#v121 <= 0 or string.find(v134, v121, 1, true)) and (not v23 or v23(v131)) then
                    if v18[l_Name_5].Rarity == "Secret" then
                        l_Text_2[v130] = true;
                    end;
                    local v135 = v122[v130] or 0;
                    if v131.Amount == nil then
                        if v135 <= 0 then
                            table.insert(l_l_Text_1_0, (("%*-0"):format(v130)));
                        end;
                        v122[v130] = v135 - 1;
                    else
                        local v136 = math.max(0, v131.Amount - v135);
                        if v136 > 0 then
                            if v21:GetMinStackSize(v117, v131) <= v136 then
                                table.insert(l_l_Text_1_0, (("%*-stack"):format(v130)));
                            else
                                for v137 = 1, v136 do
                                    table.insert(l_l_Text_1_0, (("%*-%*"):format(v130, v137 - 1)));
                                end;
                            end;
                        end;
                        v122[v130] = v135 - v136;
                    end;
                end;
            end;
            l_v110_0 = v8(l_l_Text_1_0, l_Text_2, 8);
            l_Text_1 = l_l_Text_1_0;
            v110 = l_v110_0;
            v109 = v121;
        end;
        l_Text_2 = {};
        for _, v139 in v117.Pets do
            l_Text_2[v139.Id] = v139;
        end;
        local v140 = {};
        for _, v142 in v117.Teams[v117.TeamEquipped].Pets do
            v140[v142] = (v140[v142] or 0) + 1;
        end;
        if #l_v110_0 == 0 then
            l_ScrollingFrame_0.Visible = false;
            l_ScrollingFrame_0.Parent.NoResults.Visible = true;
            if v26 then
                l_ScrollingFrame_0.Parent.NoResults.Content.Text = v26;
                l_ScrollingFrame_0.Parent.NoResults.Content.Visible = true;
            else
                l_ScrollingFrame_0.Parent.NoResults.Content.Visible = false;
            end;
        else
            l_ScrollingFrame_0.Visible = true;
            l_ScrollingFrame_0.Parent.NoResults.Visible = false;
        end;
        return function(v143) --[[ Line: 490 ]]
            -- upvalues: l_v110_0 (ref), v107 (ref), l_Text_2 (copy), v18 (ref), v105 (ref), v13 (ref), v140 (copy)
            local v144 = l_v110_0[v143];
            if v144 == nil then
                return nil;
            elseif v144 == "" then
                return v107:Get();
            else
                local v145 = string.sub(v144, 1, 36);
                local v146 = l_Text_2[v145];
                local v147 = string.sub(v144, -5) == "stack";
                local v148 = v18[v146.Name].Rarity == "Secret";
                local v149 = v105:Get();
                v149.Name = v144;
                if v148 then
                    v149.Inner.Size = UDim2.new(2, 15, 2, 15);
                else
                    v149.Inner.Size = UDim2.new(1, 0, 1, 0);
                end;
                if not v147 then
                    v13.set(v149, v146, false, false);
                    return v149;
                else
                    local v150 = (v146.Amount or 1) - (v140[v145] or 0);
                    local v151 = table.clone(v146);
                    v151.Amount = v150;
                    v13.set(v149, v151, v150 > 1, false);
                    return v149;
                end;
            end;
        end, function() --[[ Line: 527 ]]
            -- upvalues: v105 (ref), v107 (ref), l_v110_0 (ref)
            v105:Done();
            v107:Done();
            return #l_v110_0;
        end;
    end;
end);
local function v182() --[[ Line: 536 ]] --[[ Name: updateTeams ]]
    -- upvalues: v28 (ref), v11 (copy), v18 (copy), v84 (copy), l_List_0 (copy), v13 (copy)
    local v153 = false;
    local v154 = v28 or v11:Get();
    if not v154 then
        return;
    else
        local l_Pets_0 = v154.Pets;
        local v156 = v154.Teams[v154.TeamEquipped];
        local v157 = {};
        for v158 in v156.Pets do
            table.insert(v157, v158);
        end;
        table.sort(v157, function(v159, v160) --[[ Line: 552 ]]
            -- upvalues: l_Pets_0 (copy), v156 (copy), v18 (ref)
            local v161 = false;
            local v162 = false;
            local l_l_Pets_0_0 = l_Pets_0;
            local v164 = v156.Pets[v159];
            local v165;
            for _, v167 in l_l_Pets_0_0 do
                if v167.Id == v164 then
                    v165 = v167;
                    v161 = true;
                end;
                if v161 then
                    break;
                end;
            end;
            if not v161 then
                v165 = nil;
            end;
            v161 = false;
            v164 = l_Pets_0;
            local v168 = v156.Pets[v160];
            for _, v170 in v164 do
                if v170.Id == v168 then
                    l_l_Pets_0_0 = v170;
                    v162 = true;
                end;
                if v162 then
                    break;
                end;
            end;
            if not v162 then
                l_l_Pets_0_0 = nil;
            end;
            v162 = false;
            v164 = false;
            if v165 ~= nil then
                v164 = v18[v165.Name].Rarity == "Secret";
            end;
            v168 = false;
            if l_l_Pets_0_0 ~= nil then
                v168 = v18[l_l_Pets_0_0.Name].Rarity == "Secret";
            end;
            if v164 ~= v168 then
                return v164;
            else
                local v171 = false;
                if v165 ~= nil then
                    v171 = v165.Locked == true;
                end;
                local v172 = false;
                if l_l_Pets_0_0 ~= nil then
                    v172 = l_l_Pets_0_0.Locked == true;
                end;
                if v171 ~= v172 then
                    return v171;
                else
                    return v156.Pets[v159] < v156.Pets[v160];
                end;
            end;
        end);
        local v173 = {};
        for v174, v175 in v157 do
            local v176 = v156.Pets[v175];
            local v177;
            for _, v179 in l_Pets_0 do
                if v179.Id == v176 then
                    v177 = v179;
                    v153 = true;
                end;
                if v153 then
                    break;
                end;
            end;
            if not v153 then
                v177 = nil;
            end;
            v153 = false;
            if v177 then
                local v180 = v84:Get();
                local v181 = v173[v176] or 0;
                v180.Name = ("%*-team-%*"):format(v176, v181);
                v173[v176] = v181 + 1;
                v180.LayoutOrder = v174;
                if v18[v177.Name].Rarity == "Secret" then
                    v180.Size = UDim2.fromOffset(130, 130);
                else
                    v180.Size = UDim2.fromOffset(100, 100);
                end;
                v180.Parent = l_List_0;
                v13.set(v180, v177, false, false, true);
            end;
        end;
        v84:Done();
        return;
    end;
end;
local function v184() --[[ Line: 605 ]] --[[ Name: updateInnerLayout ]]
    -- upvalues: l_List_0 (copy), l_UIScale_0 (copy), l_Team_0 (copy), l_ScrollingFrame_0 (copy)
    local v183 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
    l_Team_0.Size = UDim2.new(1, 0, 0, v183 + 65);
    l_ScrollingFrame_0.Pets.Position = UDim2.fromOffset(0, v183 + 85);
end;
l_List_0.UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(v184);
l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v184);
local v185 = math.ceil(l_List_0.UIListLayout.AbsoluteContentSize.Y / l_UIScale_0.Scale);
l_Team_0.Size = UDim2.new(1, 0, 0, v185 + 65);
l_ScrollingFrame_0.Pets.Position = UDim2.fromOffset(0, v185 + 85);
v185 = function() --[[ Line: 617 ]] --[[ Name: update ]]
    -- upvalues: v152 (copy), v182 (copy)
    v152:Update();
    v182();
end;
local function v186() --[[ Line: 626 ]] --[[ Name: updateSortButton ]]
    -- upvalues: v46 (ref), v5 (copy), l_Tray_0 (copy), v7 (copy)
    if v46 == "Rarity" then
        v5(l_Tray_0.Buttons.Buttons.Sort.Button, v7.Button.Purple);
    else
        v5(l_Tray_0.Buttons.Buttons.Sort.Button, v7.Button.Orange);
    end;
    l_Tray_0.Buttons.Buttons.Sort.Button.Label.Text = ("\226\135\133 %*"):format(v46);
end;
v6(l_Tray_0.Buttons.Buttons.Sort.Button, function() --[[ Line: 637 ]]
    -- upvalues: v46 (ref), v186 (copy), v152 (copy), v182 (copy)
    if v46 == "Rarity" then
        v46 = "Power";
    else
        v46 = "Rarity";
    end;
    v186();
    v152:Update();
    v182();
end);
v186();
l_PropertyChangedSignal_0:Connect(function() --[[ Line: 650 ]]
    -- upvalues: v152 (copy), v182 (copy)
    v152:Update();
    v182();
end);
local v198 = {
    IsOpen = function(_) --[[ Line: 658 ]] --[[ Name: IsOpen ]]
        -- upvalues: v2 (copy)
        return v2:IsOpen("PetChoosePrompt");
    end, 
    Close = function(_) --[[ Line: 662 ]] --[[ Name: Close ]]
        -- upvalues: v2 (copy), v24 (ref), v27 (ref), v25 (ref), v26 (ref), v28 (ref), l_Search_0 (copy), v4 (copy)
        if v2:IsOpen("PetChoosePrompt") then
            if v24 and not v27 then
                v2:Open(v24);
            else
                v2:Close();
            end;
        end;
        v24 = nil;
        v25 = nil;
        v26 = nil;
        v27 = nil;
        v28 = nil;
        l_Search_0.Search.Bar.TextBox.Text = "";
        v4:Hide();
    end, 
    Open = function(_, v190, v191, v192, v193, v194, v195, v196) --[[ Line: 666 ]] --[[ Name: Open ]]
        -- upvalues: l_Search_0 (copy), v24 (ref), v23 (ref), v25 (ref), v26 (ref), v27 (ref), v28 (ref), v152 (copy), v182 (copy), l_PetChoosePrompt_0 (copy), v2 (copy)
        l_Search_0.Search.Bar.TextBox.Text = "";
        v24 = v192;
        v23 = v190;
        v25 = v191;
        v26 = v193;
        v27 = v194;
        v28 = v195;
        v152:Update();
        v182();
        local l_Label_0 = l_PetChoosePrompt_0.Frame.Top.Title.Label;
        if v196 then
            l_Label_0.Text = ("@%* [%*]"):format(v196.Name, v196.Id);
            l_Label_0.TextScaled = true;
            l_Label_0.Size = UDim2.new(0, 750, 1, 0);
        else
            l_Label_0.Text = "Select Pet";
            l_Label_0.TextScaled = false;
        end;
        v2:Open("PetChoosePrompt");
    end
};
v5(l_PetChoosePrompt_0.Frame.Top.Close.Button, v7.Button.Red);
v6(l_PetChoosePrompt_0.Frame.Top.Close.Button, function() --[[ Line: 701 ]]
    -- upvalues: v198 (copy)
    v198:Close();
end);
v2:BindOnClosed("PetChoosePrompt", v41);
return v198;
ModuleScript: Playtime
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v2 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v3 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v4 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v5 = require(l_ReplicatedStorage_0.Shared.Palette);
local v6 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v7 = require(l_ReplicatedStorage_0.Shared.Data.Playtime);
local v8 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Table.Array);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v10 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v11 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v12 = require(l_ReplicatedStorage_0.Shared.Constants);
local v13 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v14 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v15 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v16 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local v17 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.Time);
local v18 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v20 = require(l_ReplicatedStorage_0.Shared.Utils.ApplyMultiplierToPool);
local v21 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.Math.GetRandomWeightedItem);
local v22 = require(l_ReplicatedStorage_0.Client.Gui.Animations.Spinner);
local v23 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.every);
local v24 = require(l_ReplicatedStorage_0.Client.Gui.HUD);
local v25 = require(l_ReplicatedStorage_0.Client.Gui.Utils.GuiArrow);
local v26 = require(l_ReplicatedStorage_0.Client.Gui.Utils.Notification);
local v27 = require(l_ReplicatedStorage_0.Shared.Utils.RichText);
local v28 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v29 = require(l_ReplicatedStorage_0.Shared.Utils.CurrencyUtil);
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local l_Frame_0 = l_ScreenGui_0.Playtime.Frame;
local l_Template_0 = l_Frame_0.Prizes.ScrollingFrame.Template;
l_Template_0.Parent = nil;
local v33 = {};
local v34 = {};
local v35 = false;
local v36 = {
    Powerup = 1, 
    Potion = 2
};
local v41 = v8.from(v7.Prizes):sort(function(v37, v38) --[[ Line: 55 ]]
    -- upvalues: v12 (copy), v10 (copy), v36 (copy)
    if v37.Chance ~= v38.Chance then
        return v37.Chance < v38.Chance;
    else
        local v39 = v12.RarityOrder[v10:GetRarity(v37.Item)];
        local v40 = v12.RarityOrder[v10:GetRarity(v38.Item)];
        if v39 ~= v40 then
            return v40 < v39;
        else
            return (v36[v37.Item.Type] or 0) < (v36[v38.Item.Type] or 0);
        end;
    end;
end):table();
local l_Notification_0 = l_ScreenGui_0.HUD.Left.Buttons.Playtime.Button.Notification;
local v43 = 0;
local function v62() --[[ Line: 73 ]] --[[ Name: update ]]
    -- upvalues: v16 (copy), v17 (copy), v7 (copy), v33 (copy), v5 (copy), v43 (ref), v26 (copy), v27 (copy), v4 (copy), v2 (copy), v3 (copy), v41 (copy), v34 (copy), v28 (copy), v10 (copy), l_Notification_0 (copy)
    local v44 = v16:Get();
    if not v44 then
        return;
    else
        local v45 = v17.now() - v44.PlaytimeRewards.Start;
        local v46 = 0;
        local v47 = false;
        for v48, v49 in v7.Gifts do
            local v50 = v33[v48];
            local v51 = math.max(0, v49.Time - v45);
            local v52 = v44.PlaytimeRewards.Claimed[tostring(v48)] ~= nil;
            if v51 == 0 and not v52 then
                if v48 == 1 then
                    v47 = true;
                end;
                v46 = v46 + 1;
            end;
            v50.Button.Label.Text = v51 == 0 and "Open" or v17.formatTime(v51);
            v50.Button.Label.TextColor3 = v51 == 0 and v5.Text.Green or Color3.new(1, 1, 1);
            v50.Button.Label.Visible = not v52;
            v50.Completed.Visible = v52;
            v50.Button.Icon.ImageTransparency = v52 and 0.4 or 0;
        end;
        if v46 ~= v43 then
            local v53 = false;
            for _, v55 in v44.MasteryUpgrades do
                if v55.Type == "Playtime" then
                    v53 = true;
                    break;
                end;
            end;
            if v46 - v43 > 0 and v53 and not v47 then
                v26(("You have new %* to claim!"):format((v27.autoColor("Playtime Rewards", v5.Text.Green))), {
                    Sound = "NotificationHelp", 
                    Button = function(v56) --[[ Line: 111 ]] --[[ Name: Button ]]
                        -- upvalues: v4 (ref), v5 (ref), v2 (ref), v3 (ref)
                        v56.Label.Text = "Open";
                        v4(v56, v5.Button.Pink);
                        v2(v56, function() --[[ Line: 114 ]]
                            -- upvalues: v3 (ref)
                            v3:Open("Playtime");
                        end);
                    end
                });
            end;
            v43 = v46;
        end;
        for v57, v58 in v41 do
            local v59 = v34[v57];
            if v59 then
                local l_Item_0 = v58.Item;
                if l_Item_0.Type == "Currency" then
                    local v61 = table.clone(l_Item_0);
                    v61.Amount = math.ceil(v61.Amount * v28:GetCurrencyMultiplier(v44, l_Item_0.Currency, true));
                    l_Item_0 = v61;
                end;
                v10:FormatAmount(v59.Icon.Amount, l_Item_0);
            end;
        end;
        l_Notification_0.Visible = v46 > 0;
        l_Notification_0.Label.Text = v46 > 9 and "!" or v46;
        return;
    end;
end;
local function v78(v63, v64) --[[ Line: 142 ]] --[[ Name: playRoll ]]
    -- upvalues: v7 (copy), v20 (copy), v10 (copy), v22 (copy), v16 (copy), v21 (copy), v28 (copy), v9 (copy), v35 (ref), v3 (copy), l_ScreenGui_0 (copy), v24 (copy)
    local l_Prizes_0 = v7.Prizes;
    if v64 > 1 then
        l_Prizes_0 = v20(v7.Prizes, v64, function(v66) --[[ Line: 145 ]]
            -- upvalues: v10 (ref)
            local l_v10_Rarity_0 = v10:GetRarity(v66.Item);
            local v68 = true;
            if l_v10_Rarity_0 ~= "Legendary" then
                v68 = l_v10_Rarity_0 == "Secret";
            end;
            return v68;
        end);
    end;
    local v77 = v22.new(function(v69, _, v71) --[[ Line: 151 ]]
        -- upvalues: v16 (ref), v63 (copy), v21 (ref), l_Prizes_0 (ref), v28 (ref), v9 (ref)
        local v72 = v16:Get();
        local v73 = v71 and v63 or v21(l_Prizes_0);
        if v73.Type == "Currency" and v72 then
            local v74 = table.clone(v73);
            v74.Amount = math.ceil(v74.Amount * v28:GetCurrencyMultiplier(v72, v73.Currency, true));
            v73 = v74;
        end;
        local v75, v76 = v9(v73);
        v75.AnchorPoint = Vector2.one / 2;
        v75.Size = UDim2.fromOffset(130, 130);
        v75.Position = UDim2.fromScale(0.5, 0.5);
        v75.Parent = v69;
        return function() --[[ Line: 167 ]]
            -- upvalues: v76 (copy), v75 (copy)
            v76();
            v75:Destroy();
        end;
    end);
    v35 = true;
    v3:Close();
    l_ScreenGui_0.HUD.Visible = false;
    v77.Finished:Once(function() --[[ Line: 177 ]]
        -- upvalues: v24 (ref), v63 (copy), v35 (ref), v77 (copy), v3 (ref), l_ScreenGui_0 (ref)
        v24.displayItemsReceived({
            v63
        });
        task.delay(1, function() --[[ Line: 180 ]]
            -- upvalues: v35 (ref), v77 (ref), v3 (ref), l_ScreenGui_0 (ref)
            v35 = false;
            v77:Destroy();
            v3:Open("Playtime");
            l_ScreenGui_0.HUD.Visible = true;
        end);
    end);
end;
for v79, v80 in v41 do
    local v81 = l_Template_0:Clone();
    v81.LayoutOrder = v79;
    v81.Title.Text = v10:GetName(v80.Item);
    v81.Chance.Text = ("1 in %*"):format((v13((math.ceil(100 / v80.Chance)))));
    v81.Parent = l_Frame_0.Prizes.ScrollingFrame;
    v10:UpdateIcon(v81.Icon, v80.Item);
    v10:FormatAmount(v81.Icon.Amount, v80.Item);
    v34[v79] = v81;
    local l_v10_Rarity_1 = v10:GetRarity(v80.Item);
    if l_v10_Rarity_1 == "Legendary" then
        v11.Cycle(v81.Title, "Rainbow", {
            Speed = 0.4
        });
    else
        v81.Title.TextColor3 = v12.RarityColors[l_v10_Rarity_1];
    end;
    v14:OnEnter(v81.Hover, function() --[[ Line: 209 ]]
        -- upvalues: v15 (copy), v80 (copy)
        return v15.fromItem(v80.Item);
    end);
end;
for _, v84 in l_Frame_0.Main:GetChildren() do
    if v84:IsA("Frame") then
        local l_Luck_0 = v84:FindFirstChild("Luck");
        if l_Luck_0 then
            l_Luck_0.Label.Text = ("x%*"):format(v7.Gifts[v84.LayoutOrder].Luck);
        end;
        v33[v84.LayoutOrder] = v84;
        v2(v84.Button, function() --[[ Line: 224 ]]
            -- upvalues: v35 (ref), v18 (copy), v84 (copy), v78 (copy), v7 (copy)
            if v35 then
                return;
            else
                local v86 = v18:InvokeServer("ClaimPlaytime", v84.LayoutOrder);
                if v86 then
                    v78(v86, v7.Gifts[v84.LayoutOrder].Luck);
                end;
                return;
            end;
        end);
    end;
end;
v11.Cycle(l_Frame_0.Main["8"].Luck.Label, "Rainbow", {
    Speed = 0.4
});
v11.Cycle(l_Frame_0.Main["9"].Luck.Label, "Rainbow", {
    Speed = 0.4
});
local v87 = nil;
v16:ConnectDataChanged("MasteryUpgrades", function(v88) --[[ Line: 242 ]]
    -- upvalues: v87 (ref), v3 (copy), l_ScreenGui_0 (copy)
    local v89 = false;
    for _, v91 in v88.MasteryUpgrades do
        if v91.Type == "Playtime" then
            v89 = true;
            break;
        end;
    end;
    if v87 ~= v89 then
        if v87 == false and v89 then
            v3:Open("Playtime");
        end;
        v87 = v89;
    end;
    l_ScreenGui_0.HUD.Left.Buttons.Playtime.Visible = v89;
end);
v3:BindOnOpened("Playtime", function() --[[ Line: 276 ]]
    -- upvalues: v25 (copy)
    v25:ClearAll("Playtime");
end);
v16:ConnectDataChanged("PlaytimeRewards", v62);
v16:ConnectDataChanged(v29.CurrencyMultUpdateKeys, v62);
v4(l_Frame_0.Top.Close.Button, v5.Button.Red);
v2(l_Frame_0.Top.Close.Button, function() --[[ Line: 284 ]]
    -- upvalues: v3 (copy)
    v3:Close();
end);
v23(0.5, v62);
v6(l_Frame_0.Prizes.ScrollingFrame, l_Frame_0.Prizes.ScrollingFrame.UIListLayout);
return {};
ModuleScript: Potions
-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

local l_Players_0 = game:GetService("Players");
local l_ReplicatedStorage_0 = game:GetService("ReplicatedStorage");
local v2 = require(l_ReplicatedStorage_0.Client.Framework.Services.LocalData);
local _ = require(l_ReplicatedStorage_0.Shared.Types);
local v4 = require(l_ReplicatedStorage_0.Shared.Constants);
local v5 = require(l_ReplicatedStorage_0.Client.Gui.Utils.AutoButtonColor);
local v6 = require(l_ReplicatedStorage_0.Shared.Palette);
local v7 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ClickableButton);
local v8 = require(l_ReplicatedStorage_0.Client.Framework.Utilities.Gui.HookScrollingFrame);
local v9 = require(l_ReplicatedStorage_0.Client.Gui.GuiFrame);
local v10 = require(l_ReplicatedStorage_0.Shared.Framework.Network.Remote);
local v11 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatCommas);
local v12 = require(l_ReplicatedStorage_0.Client.Gui.Utils.ItemFrame);
local v13 = require(l_ReplicatedStorage_0.Shared.Data.Potions);
local v14 = require(l_ReplicatedStorage_0.Client.Gui.Utils.UpdateWhileGuiOpen);
local v15 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil);
local v16 = require(l_ReplicatedStorage_0.Client.Gui.Tooltip);
local v17 = require(l_ReplicatedStorage_0.Shared.Data.Builders.TooltipBuilder);
local v18 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatSuffix);
local v19 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.ItemUtil.PotionIcon);
local v20 = require(l_ReplicatedStorage_0.Shared.Framework.Utilities.String.FormatRomanNumeral);
local v21 = require(l_ReplicatedStorage_0.Shared.Utils.AnimateColor);
local v22 = require(l_ReplicatedStorage_0.Shared.Utils.Stats.StatsUtil);
local v23 = require(l_ReplicatedStorage_0.Client.Activation);
local v24 = require(l_ReplicatedStorage_0.Client.Gui.GetScreenGuiHolder);
local l_ScreenGui_0 = l_Players_0.LocalPlayer.PlayerGui.ScreenGui;
local l_UIScale_0 = l_ScreenGui_0.UIScale;
local l_Frame_0 = l_ScreenGui_0.Potions.Frame;
local l_ScrollingFrame_0 = l_Frame_0.Inner.Main.ScrollingFrame;
local l_Details_0 = l_Frame_0.Inner.Details;
local v30 = nil;
local l_Template_0 = l_ScrollingFrame_0.Template;
l_Template_0.Parent = nil;
local v32 = {};
local function v38(v33) --[[ Line: 51 ]] --[[ Name: autoSizeLabel ]]
    -- upvalues: l_UIScale_0 (copy)
    local l_Height_0 = v33.Size.Height;
    local function v36() --[[ Line: 53 ]] --[[ Name: update ]]
        -- upvalues: v33 (copy), l_UIScale_0 (ref), l_Height_0 (copy)
        local v35 = math.ceil(v33.TextBounds.X / l_UIScale_0.Scale) + 1;
        v33.Size = UDim2.new(UDim.new(0, v35), l_Height_0);
    end;
    v33:GetPropertyChangedSignal("TextBounds"):Connect(v36);
    l_UIScale_0:GetPropertyChangedSignal("Scale"):Connect(v36);
    local v37 = math.ceil(v33.TextBounds.X / l_UIScale_0.Scale) + 1;
    v33.Size = UDim2.new(UDim.new(0, v37), l_Height_0);
end;
local function v41(v39) --[[ Line: 63 ]] --[[ Name: fixupItemFrame ]]
    v39.Button.Inner.Bottom.RichText = false;
    v39.Button.Inner.Bottom.TextXAlignment = Enum.TextXAlignment.Right;
    v39.Button.Inner.Bottom.TextColor3 = Color3.fromRGB(255, 255, 255);
    local l_Bottom_0 = v39.Button.Inner.Bottom;
    l_Bottom_0.Position = l_Bottom_0.Position - UDim2.fromOffset(5, 0);
    v39.Button.Inner.Bottom.Visible = true;
end;
local v42 = nil;
for v43, v44 in v13 do
    if not v44.OneLevel then
        v32[v43] = {};
        for v45 = 2, v4.PotionMaxLevel - 1 do
            local v46 = {
                Type = "Potion", 
                Name = v43, 
                Level = v45 - 1
            };
            local v47 = {
                Type = "Potion", 
                Name = v43, 
                Level = v45
            };
            local v48 = l_Template_0:Clone();
            v48.Name = ("%*/%*"):format(v43, v45);
            v48.Button.Information.Description.Text = v15:GetDescription(v47);
            v48.Button.Information.Label.Text = v15:GetName(v47);
            local l_v15_Rarity_0 = v15:GetRarity(v47);
            if l_v15_Rarity_0 == "Legendary" or l_v15_Rarity_0 == "Secret" then
                v21.Cycle(v48.Button.Information.Label, "Rainbow", {
                    Speed = 0.4
                });
            else
                v21.None(v48.Button.Information.Label);
                v48.Button.Information.Label.TextColor3 = v4.RarityColors[l_v15_Rarity_0];
            end;
            v38(v48.Button.Information.ItemCost.Label);
            v38(v48.Button.Information.GemCost.Label);
            v19.new(v48.Button.Icon, v47, 1.2);
            v19.new(v48.Button.Information.ItemCost.Icon, v46, 1.2);
            v48.Button.Activated:Connect(function() --[[ Line: 106 ]]
                -- upvalues: v30 (ref), v43 (copy), v45 (copy), v42 (ref)
                v30 = {
                    Name = v43, 
                    Level = v45
                };
                v42();
            end);
            v48.Parent = l_ScrollingFrame_0;
            v32[v43][v45] = v48;
            v48.Button.Information.Description:GetPropertyChangedSignal("TextBounds"):Connect(function() --[[ Line: 117 ]] --[[ Name: update ]]
                -- upvalues: v48 (copy)
                local v50 = v48.Button.Information.Description.TextBounds.Y + 10;
                v48.Button.Information.Description.Size = UDim2.new(1, -20, 0, v50);
                v48.Size = UDim2.new(1, 0, 0, 161 + v50);
            end);
        end;
    end;
end;
v8(l_ScrollingFrame_0, l_ScrollingFrame_0.UIListLayout);
local l_Button_0 = l_Details_0.Main.Buttons.CraftOne.Button;
local l_Button_1 = l_Details_0.Main.Buttons.CraftAll.Button;
v38(l_Button_0.Cost.Gems.Label);
v38(l_Button_1.Cost.Gems.Label);
v5(l_Button_0, v6.Button.Purple);
v7(l_Button_0, function() --[[ Line: 141 ]]
    -- upvalues: v30 (ref), v10 (copy)
    if v30 then
        v10:FireServer("CraftPotion", v30.Name, v30.Level, false);
    end;
end);
v5(l_Button_1, v6.Button.Gold);
v7(l_Button_1, function() --[[ Line: 148 ]]
    -- upvalues: v30 (ref), v10 (copy)
    if v30 then
        v10:FireServer("CraftPotion", v30.Name, v30.Level, true);
    end;
end);
local v53 = nil;
local v54 = nil;
local function v72() --[[ Line: 161 ]] --[[ Name: updateDetails ]]
    -- upvalues: v2 (copy), v30 (ref), l_Details_0 (copy), v53 (ref), v54 (ref), v13 (copy), v15 (copy), v12 (copy), v41 (copy), v16 (copy), v17 (copy), l_Button_0 (copy), v18 (copy), l_Button_1 (copy), v11 (copy)
    local v55 = v2:Get();
    if not v55 or not v30 then
        l_Details_0.Main.Visible = false;
        l_Details_0.NoSelection.Visible = true;
        return;
    else
        l_Details_0.Main.Visible = true;
        l_Details_0.NoSelection.Visible = false;
        local v56 = {
            Type = "Potion", 
            Name = v30.Name, 
            Level = v30.Level - 1
        };
        local v57 = {
            Type = "Potion", 
            Name = v30.Name, 
            Level = v30.Level
        };
        if v53 then
            v53();
        end;
        if v54 then
            v54();
        end;
        local v58 = v13[v30.Name];
        if not v58.CraftingCosts then
            return;
        else
            local v59 = v58.CraftingCosts[v30.Level - 1];
            local l_v15_OwnedAmount_0 = v15:GetOwnedAmount(v55, v56);
            local v61 = nil;
            local v62, v63 = v12(v56);
            v53 = v63;
            v61 = v62;
            v41(v61);
            v61.Size = UDim2.fromScale(1, 1);
            v61.Button.Inner.Bottom.Text = ("x%*"):format(v59.Potions);
            v61.Button.Inner.Bottom.Visible = v59.Potions > 1;
            v61.Button.Inner.Bottom.TextColor3 = v59.Potions <= l_v15_OwnedAmount_0 and Color3.new(1, 1, 1) or Color3.fromRGB(255, 115, 115);
            v61.Parent = l_Details_0.Main.Items.Item1;
            v16:OnEnter(v61.Button, function() --[[ Line: 207 ]]
                -- upvalues: v17 (ref), v56 (copy)
                return v17.fromPotion(v56);
            end);
            v62 = nil;
            local v64;
            v63, v64 = v12(v57);
            v54 = v64;
            v62 = v63;
            v41(v62);
            v62.Size = UDim2.fromScale(1, 1);
            v62.Button.Inner.Bottom.Visible = false;
            v62.Parent = l_Details_0.Main.Items.Item2;
            v16:OnEnter(v62.Button, function() --[[ Line: 218 ]]
                -- upvalues: v17 (ref), v57 (copy)
                return v17.fromPotion(v57);
            end);
            local v65 = math.min(math.floor(v55.Gems / v59.Gems), (math.floor(l_v15_OwnedAmount_0 / v59.Potions)));
            local v66 = math.max(v65, 1);
            l_Button_0.Cost.Gems.Label.Text = v18(v59.Gems);
            l_Button_1.Title.Text = ("Craft All (%*)"):format((v11(v66)));
            l_Button_1.Cost.Gems.Label.Text = v18(v59.Gems * v66);
            local v67 = v65 > 0;
            local v68 = v67 and 0 or 0.4;
            local v69 = v67 and 0 or 0.5;
            local v70 = v67 and 0 or 0.3;
            local v71 = v67 and 0 or 0.7;
            l_Button_0.UIGradient.Transparency = NumberSequence.new(v70);
            l_Button_0.UIStroke.Transparency = v69;
            l_Button_0.Title.TextTransparency = v68;
            l_Button_0.Title.UIStroke.Transparency = v69;
            l_Button_0.Cost.Gems.Label.TextTransparency = v68;
            l_Button_0.Cost.Gems.Label.UIStroke.Transparency = v69;
            l_Button_0.Cost.Gems.Icon.ImageTransparency = v71;
            l_Button_0.Active = v67;
            l_Button_0.Selectable = v67;
            l_Button_1.UIGradient.Transparency = NumberSequence.new(v70);
            l_Button_1.UIStroke.Transparency = v69;
            l_Button_1.Title.TextTransparency = v68;
            l_Button_1.Title.UIStroke.Transparency = v69;
            l_Button_1.Cost.Gems.Label.TextTransparency = v68;
            l_Button_1.Cost.Gems.Label.UIStroke.Transparency = v69;
            l_Button_1.Cost.Gems.Icon.ImageTransparency = v71;
            l_Button_1.Active = v67;
            l_Button_1.Selectable = v67;
            return;
        end;
    end;
end;
v42 = function() --[[ Line: 264 ]] --[[ Name: update ]]
    -- upvalues: v2 (copy), v32 (copy), v13 (copy), v15 (copy), v22 (copy), v18 (copy), v6 (copy), v20 (copy), v72 (copy)
    local v73 = v2:Get();
    if not v73 then
        return;
    else
        for v74, v75 in v32 do
            for v76, v77 in v75 do
                local v78 = v13[v74];
                if v78.CraftingCosts then
                    local v79 = v78.CraftingCosts[v76 - 1];
                    if v79 then
                        local l_v15_OwnedAmount_1 = v15:GetOwnedAmount(v73, {
                            Type = "Potion", 
                            Name = v74, 
                            Level = v76 - 1
                        });
                        local v81 = v79.Potions <= l_v15_OwnedAmount_1;
                        local v82 = v73.Gems >= v79.Gems;
                        local v83 = v81 and v82;
                        local v84 = v76 <= v22:GetPotionCraftLevel(v73);
                        v77.Button.Information.GemCost.Label.Text = ("%* Gems"):format((v18(v79.Gems)));
                        v77.Button.Information.GemCost.LayoutOrder = 5 + (v82 and 0 or 2);
                        v77.Button.Information.GemCost.Label.TextColor3 = v82 and v6.Text.Green or v6.Text.Red;
                        v77.Button.Information.ItemCost.LayoutOrder = 4 + (v81 and 0 or 2);
                        v77.Button.Information.ItemCost.Label.TextColor3 = v81 and v6.Text.Green or v6.Text.Red;
                        v77.Button.Information.ItemCost.Label.Text = ("%* %* <font size=\"24\">(%*/%*)</font>"):format(v74, v20(v76 - 1), v18(l_v15_OwnedAmount_1, 1000), v79.Potions);
                        v77.Button.UIStroke.Color = v83 and Color3.fromRGB(0, 41, 94) or Color3.fromRGB(255, 110, 110);
                        v77.Button.BackgroundColor3 = v83 and Color3.fromRGB(156, 224, 243) or Color3.fromRGB(249, 172, 172);
                        local v85 = v78.LayoutOrder * 100 + v76;
                        if not v84 then
                            v85 = v85 + 100000;
                        end;
                        v77.LayoutOrder = v85;
                        v77.Cover.Visible = not v84;
                        v77.Button.Active = v84;
                        v77.Button.Selectable = v84;
                    end;
                end;
            end;
        end;
        v72();
        return;
    end;
end;
v14("Potions", {
    "Potions", 
    "Gems"
}, v42);
v42();
v2:ConnectDataChanged("Gems", function(v86) --[[ Line: 332 ]]
    -- upvalues: l_Frame_0 (copy), v18 (copy)
    l_Frame_0.Tray.Gems.Amount.Label.Text = v18(v86.Gems, 10000);
end);
l_Frame_0.Tray.Gems.Amount.Label:GetPropertyChangedSignal("TextBounds"):Connect(function() --[[ Line: 336 ]]
    -- upvalues: l_Frame_0 (copy)
    local l_X_0 = l_Frame_0.Tray.Gems.Amount.Label.TextBounds.X;
    l_Frame_0.Tray.Gems.Amount.Label.Size = UDim2.new(0, l_X_0, 1, 0);
    l_Frame_0.Tray.Gems.Size = UDim2.new(0, l_X_0 + 130, 1, 0);
end);
local l_Island_0 = workspace.Worlds["The Overworld"].Islands.Zen.Island;
local l_SurfaceGui_0 = l_Island_0.Board.Display.SurfaceGui;
l_SurfaceGui_0.Adornee = l_Island_0.Board.Display;
l_SurfaceGui_0.Parent = v24();
v19.new(l_SurfaceGui_0.Items.Potion0, {
    Type = "Potion", 
    Name = "Lucky", 
    Level = 1
}, 1);
v19.new(l_SurfaceGui_0.Items.Potion1, {
    Type = "Potion", 
    Name = "Lucky", 
    Level = 5
}, 1.25);
v23:Bind(l_Island_0.PotionUpgrade, function() --[[ Line: 352 ]]
    -- upvalues: v9 (copy)
    v9:Open("Potions");
end);
v5(l_Frame_0.Top.Close.Button, v6.Button.Red);
v7(l_Frame_0.Top.Close.Button, function() --[[ Line: 358 ]]
    -- upvalues: v9 (copy)
    v9:Close();
end);
return {
    SetSelectedPotion = function(_, v91) --[[ Line: 366 ]] --[[ Name: SetSelectedPotion ]]
        -- upvalues: v30 (ref), v42 (ref)
        v30 = v91;
        v42();
    end
};
ModuleScript: Quests
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local SocialService = game:GetService("SocialService")

local Prizes = require(ReplicatedStorage.Shared.Data.Prizes)
local ItemFrame = require(ReplicatedStorage.Client.Gui.Utils.ItemFrame)
local HookScrollingFrame = require(ReplicatedStorage.Client.Framework.Utilities.Gui.HookScrollingFrame)
local FormatCommas = require(ReplicatedStorage.Shared.Framework.Utilities.String.FormatCommas)
local LocalData = require(ReplicatedStorage.Client.Framework.Services.LocalData)
local FormatPercent = require(ReplicatedStorage.Shared.Framework.Utilities.String.FormatPercent)
local ClickableButton = require(ReplicatedStorage.Client.Gui.Utils.ClickableButton)
local AutoButtonColor = require(ReplicatedStorage.Client.Gui.Utils.AutoButtonColor)
local Palette = require(ReplicatedStorage.Shared.Palette)
local Remote = require(ReplicatedStorage.Shared.Framework.Network.Remote)
local GuiFrame = require(ReplicatedStorage.Client.Gui.GuiFrame)
local ItemUtil = require(ReplicatedStorage.Shared.Utils.Stats.ItemUtil)
local RichText = require(ReplicatedStorage.Shared.Utils.RichText)
local AchievementBuilder = require(ReplicatedStorage.Shared.Data.Builders.AchievementBuilder)
local Achievement = require(ReplicatedStorage.Client.Gui.Utils.Achievement)
local PlayLocalSound = require(ReplicatedStorage.Client.Gui.Utils.PlayLocalSound)
local Emitter = require(ReplicatedStorage.Shared.Framework.Classes.Emitter)
local Confetti = require(ReplicatedStorage.Client.Framework.Utilities.Gui.Confetti)
local SequentialSound = require(ReplicatedStorage.Client.Gui.Utils.SequentialSound)
local Pool = require(ReplicatedStorage.Shared.Framework.Classes.Pool)
local FormatSuffix = require(ReplicatedStorage.Shared.Framework.Utilities.String.FormatSuffix)
local Tooltip = require(ReplicatedStorage.Client.Gui.Tooltip)
local TooltipBuilder = require(ReplicatedStorage.Shared.Data.Builders.TooltipBuilder)
local QuestUtil = require(ReplicatedStorage.Shared.Utils.Stats.QuestUtil)
local Prompt = require(ReplicatedStorage.Client.Gui.Prompt)
local PromptBuilder = require(ReplicatedStorage.Shared.Data.Builders.PromptBuilder)
local Constants = require(ReplicatedStorage.Shared.Constants)
local StatsUtil = require(ReplicatedStorage.Shared.Utils.Stats.StatsUtil)
local Shop = require(ReplicatedStorage.Client.Gui.Frames.Shop)
local InitialQuests = require(ReplicatedStorage.Shared.Data.Quests.InitialQuests)

local LocalPlayer = Players.LocalPlayer
local ScreenGui = LocalPlayer.PlayerGui.ScreenGui
local Frame = ScreenGui.Quests.Frame
local CurrentPage = "Quests"
local Template = Frame.Main.Prizes.Template
Template.Parent = nil
Template.Item.Inner:Destroy()

local PrizeFrames = {}
local AchievementCallbacks = {}
local ParticleEmitter = Emitter.fromEmitter(ReplicatedStorage.Assets.Particles.Spots)
ParticleEmitter.Rate = 0

local function updatePrizes()
	local data = LocalData:Get()
	if not data then
		return
	end

	local claimableCounts = {}
	local stats = {
		Bubbles = data.Stats.Bubbles,
		Eggs = data.Stats.Hatches
	}

	for prizeId, prize in Prizes do
		local isQuestPrize = prize.Type == CurrentPage
		local frame = PrizeFrames[prizeId]
		local key = prize.Key
		local statValue = stats[prize.Type]
		local isClaimed = data.ClaimedPrizes[key] ~= nil
		local progress = math.min(1, statValue / prize.Requirement)
		local isClaimable = not isClaimed and progress == 1

		if isClaimable then
			claimableCounts[prize.Type] = (claimableCounts[prize.Type] or 0) + 1
		end

		if isQuestPrize then
			frame.Content.Bar.Label.Text = isClaimed and "Claimed!" or FormatPercent(math.ceil(progress * 100))
			if prize.Reward.Type == "Pet" then
				frame.Item.ItemFrame.Button.Inner.Icon.Label.ImageColor3 = isClaimed and Color3.new(1, 1, 1) or Color3.new()
			end
			frame.Content.Claim.Visible = isClaimable
			frame.Content.Bar.Fill.Visible = progress > 0
			frame.Content.Bar.Fill.Size = UDim2.new(progress, 0, 1, 6)
			frame.Content.Bar.Fill.UIGradient.Enabled = not isClaimed
			frame.Content.Bar.Fill.BackgroundColor3 = isClaimed and Color3.new(0, 1, 0) or Color3.new(1, 1, 1)
			frame.Content.Size = UDim2.new(1, -140, 1, (isClaimed or progress < 1) and -50 or -10)
		end

		local callback = AchievementCallbacks[key]
		if callback and prize.Requirement > 50000 then
			callback(statValue)
		end
		frame.Visible = isQuestPrize
	end

	local totalNotifications = 0
	for _, button in Frame.Sidebar.Buttons:GetChildren() do
		if button:IsA("Frame") then
			local count = claimableCounts[button.Name] or 0
			button.Button.Notification.Label.Text = count > 9 and "!" or count
			button.Button.Notification.Visible = count > 0
			totalNotifications += count
		end
	end

	local notification = ScreenGui.HUD.Left.Buttons.Quests.Button.Notification
	notification.Visible = totalNotifications > 0
	notification.Label.Text = totalNotifications > 9 and "!" or totalNotifications
end

local prizeSound = SequentialSound(ReplicatedStorage.Assets.Sounds.UI.Prize, {
	Ramping = 20,
	Pitch = NumberRange.new(1, 8),
	Buffer = 5
})

for prizeId, prize in Prizes do
	local frame = Template:Clone()
	frame.Name = prize.Key
	frame.LayoutOrder = prize.LayoutOrder
	frame.Content.Label.Text = ("%s %s %s"):format(prize.Type == "Bubbles" and "Blow" or "Hatch", FormatCommas(prize.Requirement), prize.Type)
	frame.Content.Description.Visible = false
	frame.Parent = Frame.Main.Prizes

	local itemFrame = ItemFrame(prize.Reward, true)
	itemFrame.Size = UDim2.fromScale(1, 1)
	itemFrame.Parent = frame.Item

	local isClaiming = false
	local function claim()
		if not isClaiming then
			prizeSound()
			Remote:FireServer("ClaimPrize", prizeId)
			ParticleEmitter.Parent = frame.Effect
			ParticleEmitter:Emit(30)
			Confetti:Emit(Confetti.Bottom, 15)
			isClaiming = true
			task.wait(0.25)
			isClaiming = false
		end
	end

	local achievement = AchievementBuilder.new(("%s Prize"):format(prize.Type))
		:Icon(prize.Reward)
		:Description(frame.Content.Label.Text)
	local achievementCallback = Achievement:Create(prize.Requirement, achievement, function(current, required)
		return ("%s %s more %s"):format(prize.Type == "Bubbles" and "Blow" or "Hatch", FormatCommas(required - current), prize.Type)
	end, "")
	AchievementCallbacks[prize.Key] = achievementCallback

	ClickableButton(itemFrame.Button, function() end)
	AutoButtonColor(frame.Content.Claim.Button, Palette.Button.Pink)
	ClickableButton(frame.Content.Claim.Button, claim)
	PrizeFrames[prizeId] = frame
end

LocalData:ConnectDataChanged({"Bubble", "Hatches", "ClaimedPrizes"}, updatePrizes)
Template = nil

local QuestsFrame = Frame.Main.Quests
local QuestTemplate = QuestsFrame.Template
local TaskTemplate = QuestTemplate.Tasks.Template
local RewardTemplate = QuestTemplate.Rewards.Template
QuestTemplate.Parent = nil
TaskTemplate.Parent = nil
RewardTemplate.Parent = nil

local FriendInvite = workspace.Worlds["The Overworld"].FriendInvite
local SurfaceGui = FriendInvite.Display.SurfaceGui
SurfaceGui.Parent = ScreenGui
SurfaceGui.Adornee = FriendInvite.Display
AutoButtonColor(SurfaceGui.Action.Button, Palette.Button.Pink)
ClickableButton(SurfaceGui.Action.Button, function()
	local options = Instance.new("ExperienceInviteOptions")
	options.PromptMessage = "Earn rewards when friends join from your invite!"
	SocialService:PromptGameInvite(LocalPlayer, options)
end)

local QuestPool = Pool.new(function()
	local quest = QuestTemplate:Clone()
	ClickableButton(quest.Action.Button, function()
		local action = quest.Action:GetAttribute("Action")
		if not action then
			return
		elseif action == "Group" then
			local result = Remote:InvokeServer("VerifyGroup")
			if not result or string.len(result) == 0 then
				return
			end
			local prompt = PromptBuilder.new("Uh Oh!")
				:Text(result)
				:Sound("PopupFailure")
				:Button(function(button, callback)
					button.Label.Text = "Close"
					AutoButtonColor(button, Palette.Button.Red)
					ClickableButton(button, callback)
				end)
			Prompt(prompt:Build())
		elseif action == "Discord" then
			task.defer(function()
				task.wait()
				Shop.setPage("Redeem")
			end)
			GuiFrame:Open("RobuxShop")
		end
	end)
	return quest
end)

local TaskPool = Pool.new(function()
	return TaskTemplate:Clone()
end)

local RewardPool = Pool.new(function()
	local reward = RewardTemplate:Clone()
	Tooltip:OnEnter(reward.Hover, function()
		local item = reward:GetAttribute("Item")
		if not item then
			return
		end
		local decoded = HttpService:JSONDecode(item)
		if not decoded then
			return
		end
		return TooltipBuilder.fromItem(decoded)
	end)
	return reward
end)

local function updateQuests()
	local data = LocalData:Get()
	if not data then
		return
	end

	for index, quest in data.Quests do
		if quest.HUD and not string.find(quest.Id, "invite") then
			local questFrame = QuestPool:Get()
			questFrame.LayoutOrder = index
			questFrame.Rewards.Visible = #quest.Rewards > 0
			questFrame.Action.Visible = quest.Action ~= nil
			questFrame.Action:SetAttribute("Action", quest.Action)
			questFrame.Parent = QuestsFrame

			local hasMultipleTasks = #quest.Tasks ~= 1
			local titleHeight = hasMultipleTasks and 50 or 20
			questFrame.Title.Text = hasMultipleTasks and (quest.DisplayName or quest.Id) or QuestUtil:FormatTask(quest.Tasks[1])
			questFrame.Tasks.Position = UDim2.new(0.5, 0, 0, titleHeight + 10)
			questFrame.Title.Line.Visible = hasMultipleTasks
			questFrame.Title.TextYAlignment = hasMultipleTasks and Enum.TextYAlignment.Center or Enum.TextYAlignment.Top
			questFrame.Title.Size = UDim2.new(1, 0, 0, hasMultipleTasks and 46 or 22)

			if quest.Action == "Invite" then
				questFrame.Action.Button.Label.Text = "Invite"
				AutoButtonColor(questFrame.Action.Button, Palette.Button.Purple)
			elseif quest.Action == "Group" or quest.Action == "Discord" then
				questFrame.Action.Button.Label.Text = "Verify"
				AutoButtonColor(questFrame.Action.Button, Palette.Button.Orange)
			end

			if quest.Id == "discord" then
				questFrame.Visible = table.find(data.PolicyInfo.AllowedExternalLinkReferences, "Discord") ~= nil
			end

			for taskIndex, task in quest.Tasks do
				local progress = (quest.Progress[taskIndex] or 0) / QuestUtil:GetRequirement(task)
				local taskFrame = TaskPool:Get()
				taskFrame.Bar.Label.Visible = task.Type ~= "Purchase"
				taskFrame.Label.Text = QuestUtil:FormatTask(task)
				taskFrame.Label.Visible = hasMultipleTasks
				taskFrame.Bar.Label.Text = ("%s / %s"):format(FormatSuffix(quest.Progress[taskIndex] or 0, 10000), FormatSuffix(QuestUtil:GetRequirement(task), 10000))
				taskFrame.Bar.Fill.Size = UDim2.new(progress, 0, 1, 6)
				taskFrame.Bar.Fill.Visible = progress > 0
				taskFrame.LayoutOrder = taskIndex
				taskFrame.Parent = questFrame.Tasks
			end

			for rewardIndex, reward in quest.Rewards do
				local amount = ItemUtil:GetAmount(reward)
				local rewardFrame = RewardPool:Get()
				rewardFrame.LayoutOrder = rewardIndex
				rewardFrame.Parent = questFrame.Rewards
				rewardFrame:SetAttribute("Item", HttpService:JSONEncode(reward))
				ItemUtil:UpdateIcon(rewardFrame, reward)
				if reward.Type == "Currency" then
					amount = math.ceil(amount * StatsUtil:GetCurrencyMultiplier(data, reward.Currency, true))
					rewardFrame.Amount.Text = FormatSuffix(amount)
				else
					rewardFrame.Amount.Text = ("x%s"):format(FormatSuffix(amount))
				end
				rewardFrame.Amount.Visible = amount > 1
			end

			task.defer(function()
				local taskHeight = questFrame.Tasks.UIListLayout.AbsoluteContentSize.Y / ScreenGui.UIScale.Scale
				local totalHeight = titleHeight + taskHeight
				if questFrame.Rewards.Visible then
					local rewardsHeight = questFrame.Rewards.UIListLayout.AbsoluteContentSize.Y / ScreenGui.UIScale.Scale - 10
					totalHeight += rewardsHeight
					questFrame.Rewards.Size = UDim2.new(1, 0, 0, rewardsHeight)
				end
				questFrame.Tasks.Size = UDim2.new(1, -20, 0, taskHeight)
				questFrame.Size = UDim2.new(1, 0, 0, totalHeight + 30)
			end)

			questFrame.Rewards.UIListLayout.HorizontalAlignment = quest.Action and Enum.HorizontalAlignment.Right or Enum.HorizontalAlignment.Center
		end
	end

	local hasInviteQuests = false
	for i = 1, 4 do
		local entries = {
			QuestsFrame.Invite.Items:FindFirstChild("Entry" .. i),
			SurfaceGui.Items:FindFirstChild("Entry" .. i)
		}
		local quest = QuestUtil:FindById(data, ("invite-%s"):format(i))
		local isActive = quest ~= nil
		if isActive then
			hasInviteQuests = true
		end
		for _, entry in entries do
			if entry then
				if quest then
					local reward = quest.Rewards[1]
					if reward.Type == "Currency" then
						local amount = ItemUtil:GetAmount(reward) * StatsUtil:GetCurrencyMultiplier(data, reward.Currency, true)
						ItemUtil:FormatAmount(entry.Amount, {
							Type = "Currency",
							Currency = reward.Currency,
							Amount = math.floor(amount)
						})
					end
				end
				entry.Goal.Visible = isActive
				entry.Check.Visible = not isActive
				entry.Label.ImageTransparency = isActive and 0 or 0.5
				entry.Amount.TextTransparency = isActive and 0 or 0.5
				entry.Amount.UIStroke.Transparency = isActive and 0 or 0.5
			end
		end
	end

	QuestsFrame.Invite.Visible = hasInviteQuests
	FriendInvite.Parent = hasInviteQuests and workspace.Rendered.Generic or nil
	QuestPool:Done()
	TaskPool:Done()
	RewardPool:Done()
end

local LikeBoard = workspace.Worlds["The Overworld"].LikeBoard
local LikesFrame = QuestsFrame.Likes
local function updateLikes()
	local likes = LikeBoard:GetAttribute("Likes") or 0
	local tier = math.floor(likes / Constants.LikeGoalIncrement)
	local nextGoal = (tier + 1) * Constants.LikeGoalIncrement
	local previousGoal = tier * Constants.LikeGoalIncrement
	local progress = (likes - previousGoal) / (nextGoal - previousGoal)
	LikesFrame.Task.Bar.Fill.Size = UDim2.new(0.8 + progress * 0.2, 0, 1, 6)
	LikesFrame.Task.Label.Text = ("%s / %s Likes"):format(FormatSuffix(likes), FormatSuffix(nextGoal))
end

for _, item in Constants.LikeBonusItems do
	local reward = RewardTemplate:Clone()
	ItemUtil:FormatAmount(reward.Amount, item)
	reward.Parent = LikesFrame.Items
	ItemUtil:UpdateIcon(reward, item)
	Tooltip:OnEnter(reward.Hover, function()
		return TooltipBuilder.fromItem(item)
	end)
end

for i = 1, 4 do
	local entries = {
		QuestsFrame.Invite.Items:FindFirstChild("Entry" .. i),
		SurfaceGui.Items:FindFirstChild("Entry" .. i)
	}
	local questId = ("invite-%s"):format(i)
	local questData
	for _, quest in InitialQuests do
		if quest.Id == questId then
			questData = quest
			break
		end
	end
	if questData then
		for _, entry in entries do
			if entry then
				entry.Goal.Text = ("%s Friend%s"):format(i, i == 1 and "" or "s")
				local reward = questData.Rewards[1]
				ItemUtil:UpdateIcon(entry, reward)
				ItemUtil:FormatAmount(entry.Amount, reward)
				Tooltip:OnEnter(entry.Hover, function()
					return TooltipBuilder.fromItem(reward)
				end)
			end
		end
	end
end

AutoButtonColor(QuestsFrame.Invite.Action.Button, Palette.Button.Purple)
ClickableButton(QuestsFrame.Invite.Action.Button, function()
	local options = Instance.new("ExperienceInviteOptions")
	options.PromptMessage = "Earn rewards when friends join from your invite!"
	SocialService:PromptGameInvite(LocalPlayer, options)
end)

updateLikes()
LikeBoard:GetAttributeChangedSignal("Likes"):Connect(updateLikes)
LocalData:ConnectDataChanged({
	"Quests",
	"QuestsCompleted",
	"TeamEquipped",
	"Teams",
	"ActivePotions",
	"ActiveBuffs"
}, updateQuests)
HookScrollingFrame(QuestsFrame, QuestsFrame.UIListLayout)

local function setPage(page)
	for _, button in Frame.Sidebar.Buttons:GetChildren() do
		if button:IsA("Frame") then
			button.Button.Label.TextColor3 = button.Name == page and Palette.Text.Yellow or Color3.new(1, 1, 1)
		end
	end
	if page == "Quests" then
		Frame.Top.Title.Label.Text = "Quests"
		Frame.Main.Prizes.Visible = false
		Frame.Main.Quests.Visible = true
	else
		Frame.Top.Title.Label.Text = "Prizes"
		Frame.Main.Prizes.Visible = true
		Frame.Main.Quests.Visible = false
	end
	CurrentPage = page
	updateQuests()
	updatePrizes()
end

for _, button in Frame.Sidebar.Buttons:GetChildren() do
	if button:IsA("Frame") then
		ClickableButton(button.Button, function()
			setPage(button.Name)
		end)
	end
end

AutoButtonColor(Frame.Top.Close.Button, Palette.Button.Red)
ClickableButton(Frame.Top.Close.Button, function()
	GuiFrame:Close()
end)

setPage(CurrentPage)
HookScrollingFrame(Frame.Main.Quests, Frame.Main.Quests.UIListLayout)
HookScrollingFrame(Frame.Main.Prizes, Frame.Main.Prizes.UIListLayout)

return {}

